import{L as N,y as ee,r as U,c as D,S as F,d as ae,a as C,n as s,b as e,i as j,t as o,F as Z,e as x,p as H,o as h,_ as le,M as As,w as se,q as te,s as W,v as ye,J as Fe,x as as,D as we,g as ls,C as js,B as Ne,m as he,u as I}from"./index-uWeSuK_C.js";const ns=async()=>(await N.get("/auth/me/")).data.user,os=async()=>(await N.get("/auth/users/")).data,rs=async _=>{const y=new URLSearchParams;return _.q&&y.append("q",_.q),_.limit&&y.append("limit",_.limit.toString()),(await N.get(`/auth/users/search/?${y.toString()}`)).data},us=async _=>(await N.post("/auth/add-user/",_)).data,is=async(_,y)=>(await N.put(`/auth/users/${_}/role/`,y)).data,Ls=async(_,y)=>(await N.post("/auth/users/reset-password/",{user_id:_,new_password:y})).data,Es=async _=>(await N.get(`/auth/users/${_}/groups/`)).data,ds=async _=>(await N.post("/auth/users/invite/",_)).data,Oe=async _=>(await N.post("/auth/users/bulk-delete/",_)).data,cs=async()=>(await N.get("/auth/groups/")).data,Fs=async()=>(await N.get("/auth/groups/")).data,ms=async _=>(await N.post("/auth/groups/",_)).data,qs=async _=>(await N.get(`/auth/groups/${_}/`)).data,ps=async(_,y)=>(await N.put(`/auth/groups/${_}/`,y)).data,vs=async _=>(await N.delete(`/auth/groups/${_}/`)).data,gs=async(_,y)=>(await N.post(`/auth/groups/${_}/users/`,y)).data,Hs=async(_,y,u)=>(await N.put(`/auth/groups/${_}/users/${y}/`,u)).data,ys=async(_,y)=>(await N.delete(`/auth/groups/${_}/users/${y}/`)).data,fs=async _=>(await N.post("/auth/groups/bulk-add-users/",_)).data,bs=async()=>(await N.get("/auth/roles/")).data,_s=async()=>(await N.get("/auth/groups/dropdown/")).data,$s=async()=>(await N.get("/auth/stats/dashboard/")).data,z=_=>{var y,u,P,L,d,r,w;if((u=(y=_.response)==null?void 0:y.data)!=null&&u.detail)return _.response.data.detail;if((L=(P=_.response)==null?void 0:P.data)!=null&&L.message)return _.response.data.message;if((r=(d=_.response)==null?void 0:d.data)!=null&&r.errors){const l=_.response.data.errors,$=Object.keys(l)[0];if($&&((w=l[$])==null?void 0:w.length)>0)return l[$][0]}return _.message?_.message:"An unexpected error occurred"},hs=(_,y)=>{const u={super_admin:3,admin:2,user:1},P=u[_]||0,L=u[y]||0;return P>=L},fe={getCurrentUser:ns,getUsers:os,searchUsers:rs,createUser:us,updateUserRole:is,getUserGroups:Es,inviteUser:ds,bulkDeleteUsers:Oe,getGroups:cs,getGroupsWithDetails:Fs,createGroup:ms,getGroupDetails:qs,updateGroup:ps,deleteGroup:vs,addUserToGroup:gs,updateUserGroupMembership:Hs,removeUserFromGroup:ys,bulkAddUsersToGroup:fs,getRoles:bs,getGroupsDropdown:_s,getDashboardStats:$s,getErrorMessage:z,hasPermission:hs};function Ns(){const _=ee(),y=U(!1),u=U(null),P=U(null),L=U([]),d=U([]),r=U([]),w=U([]),l=U(null),$=U([]),T=U([]),c=U({}),g=U({}),S=U({field:"email",direction:"asc"}),f=U({field:"name",direction:"asc"}),R=U(1),E=U(1),m=20,a=D(()=>{let i=[...L.value];if(c.value.role&&(i=i.filter(k=>k.role===c.value.role)),c.value.is_active!==void 0&&(i=i.filter(k=>k.is_active===c.value.is_active)),c.value.search){const k=c.value.search.toLowerCase();i=i.filter(G=>G.email.toLowerCase().includes(k)||G.full_name.toLowerCase().includes(k)||G.first_name.toLowerCase().includes(k)||G.last_name.toLowerCase().includes(k))}return i.sort((k,G)=>{const q=k[S.value.field],O=G[S.value.field];return S.value.direction==="asc"?q.localeCompare(O):O.localeCompare(q)}),i}),p=D(()=>{let i=[...d.value];if(g.value.search){const k=g.value.search.toLowerCase();i=i.filter(G=>{var q;return G.name.toLowerCase().includes(k)||((q=G.description)==null?void 0:q.toLowerCase().includes(k))})}return g.value.has_admins!==void 0&&(i=i.filter(k=>g.value.has_admins?k.admin_count>0:k.admin_count===0)),i.sort((k,G)=>{const q=k[f.value.field],O=G[f.value.field];return typeof q=="string"&&typeof O=="string"?f.value.direction==="asc"?q.localeCompare(O):O.localeCompare(q):f.value.direction==="asc"?q-O:O-q}),i}),t=D(()=>{const i=(R.value-1)*m,k=i+m;return a.value.slice(i,k)}),n=D(()=>{const i=(E.value-1)*m,k=i+m;return p.value.slice(i,k)}),B=D(()=>Math.ceil(a.value.length/m)),b=D(()=>Math.ceil(p.value.length/m)),A=D(()=>r.value.length>0),X=D(()=>w.value.length>0),ne=D(()=>{var i;return((i=P.value)==null?void 0:i.role)==="super_admin"}),oe=D(()=>{var i;return((i=P.value)==null?void 0:i.role)==="admin"||ne.value}),ie=D(()=>_.t),ke=async()=>{try{y.value=!0,u.value=null,await Promise.all([Ce(),Be(),Me(),Ue()]),oe.value&&await Promise.all([de(),ce()])}catch(i){u.value=z(i)}finally{y.value=!1}},Ce=async()=>{try{P.value=await ns()}catch(i){throw u.value=z(i),i}},de=async()=>{try{const i=await os();L.value=i.users}catch(i){throw u.value=z(i),i}},ce=async()=>{try{const i=await cs();d.value=i.groups}catch(i){throw u.value=z(i),i}},Be=async()=>{try{l.value=await $s()}catch(i){throw u.value=z(i),i}},Me=async()=>{try{const i=await bs();$.value=i.roles}catch(i){throw u.value=z(i),i}},Ue=async()=>{try{const i=await _s();T.value=i.groups}catch(i){throw u.value=z(i),i}};return{loading:y,error:u,currentUser:P,users:L,groups:d,selectedUsers:r,selectedGroups:w,dashboardStats:l,roles:$,groupsDropdown:T,userFilters:c,groupFilters:g,userSort:S,groupSort:f,usersPage:R,groupsPage:E,itemsPerPage:m,filteredUsers:a,filteredGroups:p,paginatedUsers:t,paginatedGroups:n,totalUsersPages:B,totalGroupsPages:b,hasSelectedUsers:A,hasSelectedGroups:X,isCurrentUserSuperAdmin:ne,isCurrentUserAdmin:oe,t:ie,initialize:ke,loadCurrentUser:Ce,loadUsers:de,loadGroups:ce,loadDashboardStats:Be,loadRoles:Me,loadGroupsDropdown:Ue,searchUsersQuery:async(i,k)=>{try{return y.value=!0,(await rs({q:i,limit:k})).users}catch(G){return u.value=z(G),[]}finally{y.value=!1}},createNewGroup:async i=>{try{y.value=!0,u.value=null;const k=await ms(i);return d.value.push(k.group),k}catch(k){throw u.value=z(k),k}finally{y.value=!1}},updateExistingGroup:async(i,k)=>{try{y.value=!0,u.value=null;const G=await ps(i,k),q=d.value.findIndex(O=>O.id===i);return q!==-1&&(d.value[q]=G),G}catch(G){throw u.value=z(G),G}finally{y.value=!1}},deleteExistingGroup:async i=>{try{y.value=!0,u.value=null;const k=await vs(i);return d.value=d.value.filter(G=>G.id!==i),k}catch(k){throw u.value=z(k),k}finally{y.value=!1}},addUserToExistingGroup:async(i,k)=>{try{y.value=!0,u.value=null;const G=await gs(i,k),q=d.value.findIndex(O=>O.id===i);return q!==-1&&(d.value[q]=G.group),G}catch(G){throw u.value=z(G),G}finally{y.value=!1}},removeUserFromExistingGroup:async(i,k)=>{try{y.value=!0,u.value=null;const G=await ys(i,k);return await ce(),G}catch(G){throw u.value=z(G),G}finally{y.value=!1}},updateExistingUserRole:async(i,k)=>{try{y.value=!0,u.value=null;const G=await is(i,k),q=L.value.findIndex(O=>O.id===i);return q!==-1&&(L.value[q]=G.user),G}catch(G){throw u.value=z(G),G}finally{y.value=!1}},bulkAddUsersToExistingGroup:async i=>{try{y.value=!0,u.value=null;const k=await fs(i);return await ce(),k}catch(k){throw u.value=z(k),k}finally{y.value=!1}},inviteNewUser:async i=>{try{y.value=!0,u.value=null;const k=await ds(i);return await de(),k}catch(k){throw u.value=z(k),k}finally{y.value=!1}},createNewUser:async i=>{try{y.value=!0,u.value=null;const k=await us(i);return await de(),k}catch(k){throw u.value=z(k),k}finally{y.value=!1}},toggleUserSelection:i=>{const k=r.value.findIndex(G=>G.id===i.id);k===-1?r.value.push(i):r.value.splice(k,1)},toggleGroupSelection:i=>{const k=w.value.findIndex(G=>G.id===i.id);k===-1?w.value.push(i):w.value.splice(k,1)},selectAllUsersOnPage:()=>{t.value.forEach(i=>{r.value.find(G=>G.id===i.id)||r.value.push(i)})},clearUserSelection:()=>{r.value=[]},clearGroupSelection:()=>{w.value=[]},updateUserFilters:i=>{c.value={...c.value,...i},R.value=1},updateGroupFilters:i=>{g.value={...g.value,...i},E.value=1},updateUserSort:i=>{S.value=i},updateGroupSort:i=>{f.value=i},clearAllFilters:()=>{c.value={},g.value={},R.value=1,E.value=1},goToUsersPage:i=>{R.value=Math.max(1,Math.min(i,B.value))},goToGroupsPage:i=>{E.value=Math.max(1,Math.min(i,b.value))},checkPermission:i=>P.value?hs(P.value.role,i):!1,refreshData:async()=>{await ke()},clearError:()=>{u.value=null}}}const Os=()=>{const _=ee(),y=U(!1),u=async w=>{const l=w.length,$=_.t,T=()=>l>20?$("userManagement.messages.bulkDelete.confirm.largeBatchWarning").replace("{{count}}",l.toString()):$("userManagement.messages.bulkDelete.confirm.text");return(await F.fire({title:$("userManagement.messages.bulkDelete.confirm.title"),text:T(),icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff6b6b",cancelButtonColor:"#6c757d",confirmButtonText:$("userManagement.messages.bulkDelete.confirm.confirmButtonText"),cancelButtonText:$("userManagement.messages.bulkDelete.confirm.cancelButtonText"),reverseButtons:!0,customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}})).isConfirmed},P=async w=>{y.value=!0;try{const l={user_ids:w.map(T=>T.id)};return await Oe(l)}catch(l){throw console.error("Bulk delete error:",l),l}finally{y.value=!1}},L=async w=>{const l=_.t,{summary:$}=w,{total_requested:T,successful_deletions:c,failed_deletions:g}=$;g===0?await F.fire({title:l("userManagement.messages.bulkDelete.results.success.title"),text:l("userManagement.messages.bulkDelete.results.success.text").replace("{{total}}",T.toString()).replace("{{success}}",c.toString()).replace("{{failed}}",g.toString()),icon:"success",confirmButtonText:l("userManagement.messages.bulkDelete.results.success.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}}):await F.fire({title:l("userManagement.messages.bulkDelete.results.partial.title"),text:l("userManagement.messages.bulkDelete.results.partial.text").replace("{{total}}",T.toString()).replace("{{success}}",c.toString()).replace("{{failed}}",g.toString()),icon:"warning",confirmButtonText:l("userManagement.messages.bulkDelete.results.partial.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}})},d=async w=>{var $,T,c,g;const l=_.t;if(w.response){const S=w.response.status,f=w.response.data;switch(S){case 400:let R=l("userManagement.messages.bulkDelete.results.badRequest.title"),E="";($=f.message)!=null&&$.includes("cannot delete yourself")||(T=f.message)!=null&&T.includes("self")?(R=l("userManagement.messages.bulkDelete.results.badRequest.texts.cannotDeleteCurrentUser"),E=l("userManagement.messages.bulkDelete.results.badRequest.texts.cannotDeleteCurrentUserDesc")):(c=f.message)!=null&&c.includes("last super admin")?(R=l("userManagement.messages.bulkDelete.results.badRequest.texts.cannotDeleteLastSuperAdmin"),E=l("userManagement.messages.bulkDelete.results.badRequest.texts.cannotDeleteLastSuperAdminDesc")):(g=f.message)!=null&&g.includes("invalid")?E=l("userManagement.messages.bulkDelete.results.badRequest.texts.invalidData"):E=f.message||l("userManagement.messages.bulkDelete.results.badRequest.texts.noUsersDeleted"),await F.fire({title:R,text:E,icon:"error",confirmButtonText:l("userManagement.messages.bulkDelete.results.badRequest.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}});break;case 401:await F.fire({title:l("userManagement.messages.bulkDelete.results.unauthorized.title"),text:l("userManagement.messages.bulkDelete.results.unauthorized.text"),icon:"error",confirmButtonText:l("userManagement.messages.bulkDelete.results.unauthorized.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}});break;case 403:await F.fire({title:l("userManagement.messages.bulkDelete.results.forbidden.title"),text:l("userManagement.messages.bulkDelete.results.forbidden.text"),icon:"error",confirmButtonText:l("userManagement.messages.bulkDelete.results.forbidden.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}});break;default:await F.fire({title:l("userManagement.messages.bulkDelete.results.serverError.title"),text:l("userManagement.messages.bulkDelete.results.serverError.text"),icon:"error",confirmButtonText:l("userManagement.messages.bulkDelete.results.serverError.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}})}}else await F.fire({title:l("userManagement.messages.bulkDelete.results.serverError.title"),text:l("userManagement.messages.bulkDelete.results.serverError.text"),icon:"error",confirmButtonText:l("userManagement.messages.bulkDelete.results.serverError.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}})};return{isLoading:y,executeBulkDelete:async(w,l)=>{try{if(!l)return!1;if(l.role!=="admin"&&l.role!=="super_admin")return await d({response:{status:403}}),!1;if(w.some(g=>g.id===l.id))return await d({response:{status:400,data:{message:"cannot delete yourself"}}}),!1;if(!await u(w))return!1;const c=await P(w);return await L(c),!0}catch($){return console.error("Error in executeBulkDelete:",$),await d($),!1}}}},Vs=["dir"],zs=["placeholder","value"],Ws=["value"],Qs={value:""},Js=["value"],Ks=["value"],Xs={value:""},Ys={value:"true"},Zs={value:"false"},xs=["disabled"],et=["checked"],st=["checked","onChange"],tt=["onClick","title"],at=["onClick","title"],lt=["onClick","title"],nt=["disabled"],ot=["disabled"],rt=["disabled"],ut=["disabled"],it=ae({__name:"UserManagementTable",props:{users:{},loading:{type:Boolean,default:!1},selectedUsers:{},currentUser:{},totalPages:{},currentPage:{},filters:{},sort:{},roles:{}},emits:["user-selected","select-all","clear-selection","page-changed","filters-changed","sort-changed","user-action","bulk-action"],setup(_,{emit:y}){const u=_,P=y,L=ee(),d=D(()=>L.currentLanguage==="ar"),r=D(()=>L.t),w=D(()=>{var t,n,B;return(((t=u.users)==null?void 0:t.length)||0)>0&&(((n=u.selectedUsers)==null?void 0:n.length)||0)===(((B=u.users)==null?void 0:B.length)||0)}),l=D(()=>!(!u.currentUser||u.selectedUsers.length===0||u.currentUser.role!=="admin"&&u.currentUser.role!=="super_admin"||u.selectedUsers.some(n=>{var B;return n.id===((B=u.currentUser)==null?void 0:B.id)})||u.currentUser.role==="admin"&&u.selectedUsers.some(B=>B.role==="super_admin"))),$=t=>u.selectedUsers.some(n=>n.id===t.id),T=t=>u.currentUser?u.currentUser.role==="super_admin"||u.currentUser.role==="admin"&&t.role!=="super_admin":!1,c=t=>!(!u.currentUser||t.id===u.currentUser.id||u.currentUser.role!=="admin"&&u.currentUser.role!=="super_admin"||u.currentUser.role==="admin"&&t.role==="super_admin"),g=t=>!(!u.currentUser||t.id===u.currentUser.id||u.currentUser.role!=="admin"&&u.currentUser.role!=="super_admin"||u.currentUser.role==="admin"&&t.role==="super_admin"||t.azure_object_id),S=t=>{const n=u.roles.find(B=>B.value===t);return(n==null?void 0:n.display)||t},f=t=>u.sort.field!==t?"fas fa-sort":u.sort.direction==="asc"?"fas fa-sort-up":"fas fa-sort-down",R=t=>{const n=t.target;P("filters-changed",{search:n.value})},E=t=>{const n=t.target;P("filters-changed",{role:n.value||void 0})},m=t=>{const B=t.target.value;let b;B==="true"&&(b=!0),B==="false"&&(b=!1),P("filters-changed",{is_active:b})},a=()=>{w.value?P("clear-selection"):P("select-all")},p=t=>{const n=u.sort.field===t&&u.sort.direction==="asc"?"desc":"asc";P("sort-changed",{field:t,direction:n})};return(t,n)=>{var B;return h(),C("div",{class:s(t.$style.userTable),dir:d.value?"rtl":"ltr"},[e("div",{class:s(t.$style.tableHeader)},[e("div",{class:s(t.$style.headerCopy)},[e("h2",{class:s(t.$style.headerTitle)},o(r.value("userManagement.users.headerTitle")),3),e("p",{class:s(t.$style.headerDescription)},o(r.value("userManagement.users.headerSubtitle")),3)],2),e("div",{class:s(t.$style.searchSection)},[e("div",{class:s(t.$style.searchBox)},[e("i",{class:s(["fas fa-search",t.$style.searchIcon])},null,2),e("input",{type:"text",placeholder:r.value("userManagement.users.searchUsers"),value:t.filters.search||"",onInput:R,class:s(t.$style.searchInput),autocomplete:"off",autocapitalize:"off",autocorrect:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true"},null,42,zs)],2),e("div",{class:s(t.$style.filters)},[e("select",{value:t.filters.role||"",onChange:E,class:s(t.$style.filterSelect)},[e("option",Qs,o(r.value("userManagement.filters.all")),1),(h(!0),C(Z,null,x(t.roles,b=>(h(),C("option",{key:b.value,value:b.value},o(b.display),9,Js))),128))],42,Ws),e("select",{value:((B=t.filters.is_active)==null?void 0:B.toString())||"",onChange:m,class:s(t.$style.filterSelect)},[e("option",Xs,o(r.value("userManagement.filters.all")),1),e("option",Ys,o(r.value("userManagement.filters.active")),1),e("option",Zs,o(r.value("userManagement.filters.inactive")),1)],42,Ks)],2)],2),t.selectedUsers.length>0?(h(),C("div",{key:0,class:s(t.$style.bulkActions)},[e("span",{class:s(t.$style.selectedCount)},o(t.selectedUsers.length)+" "+o(r.value("userManagement.users.selectedUsers")),3),e("button",{class:s([t.$style.bulkBtn,t.$style.primaryBtn]),onClick:n[0]||(n[0]=b=>t.$emit("bulk-action","add_to_group"))},[n[10]||(n[10]=e("i",{class:"fas fa-users"},null,-1)),H(" "+o(r.value("userManagement.users.actions.addToGroup")),1)],2),e("button",{class:s([t.$style.bulkBtn,t.$style.dangerBtn]),onClick:n[1]||(n[1]=b=>t.$emit("bulk-action","bulk_delete")),disabled:!l.value},[n[11]||(n[11]=e("i",{class:"fas fa-trash"},null,-1)),H(" "+o(r.value("userManagement.users.actions.bulkDelete")),1)],10,xs),e("button",{class:s([t.$style.bulkBtn,t.$style.secondaryBtn]),onClick:n[2]||(n[2]=b=>t.$emit("clear-selection"))},[n[12]||(n[12]=e("i",{class:"fas fa-times"},null,-1)),H(" "+o(r.value("userManagement.buttons.cancel")),1)],2)],2)):j("",!0)],2),e("div",{class:s(t.$style.tableContainer)},[e("table",{class:s(t.$style.table)},[e("thead",{class:s(t.$style.tableHead)},[e("tr",null,[e("th",{class:s(t.$style.checkboxColumn)},[e("input",{type:"checkbox",onChange:a,checked:w.value,class:s(t.$style.checkbox)},null,42,et)],2),e("th",{class:s(t.$style.sortableColumn),onClick:n[3]||(n[3]=b=>p("email"))},[H(o(r.value("userManagement.users.columns.email"))+" ",1),e("i",{class:s(f("email"))},null,2)],2),e("th",{class:s(t.$style.sortableColumn),onClick:n[4]||(n[4]=b=>p("full_name"))},[H(o(r.value("userManagement.users.columns.name"))+" ",1),e("i",{class:s(f("full_name"))},null,2)],2),e("th",{class:s(t.$style.sortableColumn),onClick:n[5]||(n[5]=b=>p("role"))},[H(o(r.value("userManagement.users.columns.role"))+" ",1),e("i",{class:s(f("role"))},null,2)],2),e("th",null,o(r.value("userManagement.users.columns.status")),1),e("th",null,o(r.value("userManagement.users.columns.actions")),1)])],2),e("tbody",{class:s(t.$style.tableBody)},[(h(!0),C(Z,null,x(t.users,b=>(h(),C("tr",{key:b.id,class:s([t.$style.tableRow,{[t.$style.selected]:$(b)}])},[e("td",{class:s(t.$style.checkboxColumn)},[e("input",{type:"checkbox",checked:$(b),onChange:()=>t.$emit("user-selected",b),class:s(t.$style.checkbox)},null,42,st)],2),e("td",{class:s(t.$style.emailColumn)},[e("div",{class:s(t.$style.userEmail)},o(b.email),3)],2),e("td",{class:s(t.$style.nameColumn)},[e("div",{class:s(t.$style.userName)},o(b.full_name),3)],2),e("td",{class:s(t.$style.roleColumn)},[e("span",{class:s([t.$style.roleBadge,t.$style[b.role]])},o(S(b.role)),3)],2),e("td",{class:s(t.$style.statusColumn)},[e("span",{class:s([t.$style.statusBadge,b.is_active?t.$style.active:t.$style.inactive])},o(b.is_active?r.value("userManagement.users.status.active"):r.value("userManagement.users.status.inactive")),3)],2),e("td",{class:s(t.$style.actionsColumn)},[e("div",{class:s(t.$style.actionButtons)},[T(b)?(h(),C("button",{key:0,class:s([t.$style.actionBtn,t.$style.editBtn]),onClick:A=>t.$emit("user-action","edit",b),title:r.value("userManagement.tooltips.editUser")},n[13]||(n[13]=[e("i",{class:"fas fa-edit"},null,-1)]),10,tt)):j("",!0),g(b)?(h(),C("button",{key:1,class:s([t.$style.actionBtn,t.$style.resetPasswordBtn]),onClick:A=>t.$emit("user-action","reset_password",b),title:r.value("userManagement.tooltips.resetPassword")},n[14]||(n[14]=[e("i",{class:"fas fa-key"},null,-1)]),10,at)):j("",!0),c(b)?(h(),C("button",{key:2,class:s([t.$style.actionBtn,t.$style.deleteBtn]),onClick:A=>t.$emit("user-action","delete",b),title:r.value("userManagement.tooltips.deleteUser")},n[15]||(n[15]=[e("i",{class:"fas fa-trash"},null,-1)]),10,lt)):j("",!0)],2)],2)],2))),128))],2)],2),t.users.length===0&&!t.loading?(h(),C("div",{key:0,class:s(t.$style.emptyState)},[e("i",{class:s(["fas fa-users",t.$style.emptyIcon])},null,2),e("h3",{class:s(t.$style.emptyTitle)},o(r.value("userManagement.users.noUsersFound")),3)],2)):j("",!0),t.loading?(h(),C("div",{key:1,class:s(t.$style.loadingState)},[e("i",{class:s(["fas fa-spinner fa-spin",t.$style.loadingIcon])},null,2),e("p",null,o(r.value("common.loading"))+"...",1)],2)):j("",!0)],2),t.totalPages>1?(h(),C("div",{key:0,class:s(t.$style.pagination)},[e("button",{class:s([t.$style.paginationBtn,{[t.$style.disabled]:t.currentPage===1}]),onClick:n[6]||(n[6]=b=>t.$emit("page-changed",1)),disabled:t.currentPage===1},o(r.value("userManagement.pagination.first")),11,nt),e("button",{class:s([t.$style.paginationBtn,{[t.$style.disabled]:t.currentPage===1}]),onClick:n[7]||(n[7]=b=>t.$emit("page-changed",t.currentPage-1)),disabled:t.currentPage===1},o(r.value("userManagement.pagination.previous")),11,ot),e("span",{class:s(t.$style.paginationInfo)},o(r.value("userManagement.pagination.showing"))+" "+o(t.currentPage)+" "+o(r.value("userManagement.pagination.of"))+" "+o(t.totalPages),3),e("button",{class:s([t.$style.paginationBtn,{[t.$style.disabled]:t.currentPage===t.totalPages}]),onClick:n[8]||(n[8]=b=>t.$emit("page-changed",t.currentPage+1)),disabled:t.currentPage===t.totalPages},o(r.value("userManagement.pagination.next")),11,rt),e("button",{class:s([t.$style.paginationBtn,{[t.$style.disabled]:t.currentPage===t.totalPages}]),onClick:n[9]||(n[9]=b=>t.$emit("page-changed",t.totalPages)),disabled:t.currentPage===t.totalPages},o(r.value("userManagement.pagination.last")),11,ut)],2)):j("",!0)],10,Vs)}}}),dt="_userTable_rj4gk_3",ct="_tableHeader_rj4gk_17",mt="_headerCopy_rj4gk_37",pt="_searchSection_rj4gk_57",vt="_searchBox_rj4gk_77",gt="_searchInput_rj4gk_89",yt="_searchIcon_rj4gk_143",ft="_filters_rj4gk_163",bt="_filterSelect_rj4gk_177",_t="_bulkActions_rj4gk_239",$t="_selectedCount_rj4gk_261",ht="_bulkBtn_rj4gk_273",wt="_primaryBtn_rj4gk_311",kt="_secondaryBtn_rj4gk_323",Ct="_dangerBtn_rj4gk_335",Bt="_tableContainer_rj4gk_371",Mt="_table_rj4gk_17",Ut="_tableHead_rj4gk_17",Tt="_tableRow_rj4gk_435",St="_sortableColumn_rj4gk_445",Gt="_tableBody_rj4gk_465",Dt="_selected_rj4gk_261",It="_checkboxColumn_rj4gk_521",Rt="_checkbox_rj4gk_521",Pt="_userEmail_rj4gk_595",At="_userName_rj4gk_605",jt="_roleBadge_rj4gk_615",Lt="_super_admin_rj4gk_637",Et="_admin_rj4gk_649",Ft="_user_rj4gk_3",qt="_statusBadge_rj4gk_669",Ht="_active_rj4gk_693",Nt="_inactive_rj4gk_703",Ot="_pending_rj4gk_713",Vt="_overdue_rj4gk_723",zt="_actionButtons_rj4gk_733",Wt="_actionBtn_rj4gk_745",Qt="_editBtn_rj4gk_789",Jt="_resetPasswordBtn_rj4gk_797",Kt="_deleteBtn_rj4gk_805",Xt="_emptyState_rj4gk_813",Yt="_loadingState_rj4gk_815",Zt="_emptyIcon_rj4gk_829",xt="_loadingIcon_rj4gk_831",ea="_pagination_rj4gk_843",sa="_paginationBtn_rj4gk_863",ta="_disabled_rj4gk_891",aa="_paginationInfo_rj4gk_915",la="_headerTitle_rj4gk_925",na="_headerDescription_rj4gk_939",oa={userTable:dt,tableHeader:ct,headerCopy:mt,searchSection:pt,searchBox:vt,searchInput:gt,searchIcon:yt,filters:ft,filterSelect:bt,bulkActions:_t,selectedCount:$t,bulkBtn:ht,primaryBtn:wt,secondaryBtn:kt,dangerBtn:Ct,tableContainer:Bt,table:Mt,tableHead:Ut,tableRow:Tt,sortableColumn:St,tableBody:Gt,selected:Dt,checkboxColumn:It,checkbox:Rt,userEmail:Pt,userName:At,roleBadge:jt,super_admin:Lt,admin:Et,user:Ft,statusBadge:qt,active:Ht,inactive:Nt,pending:Ot,overdue:Vt,actionButtons:zt,actionBtn:Wt,editBtn:Qt,resetPasswordBtn:Jt,deleteBtn:Kt,emptyState:Xt,loadingState:Yt,emptyIcon:Zt,loadingIcon:xt,pagination:ea,paginationBtn:sa,disabled:ta,paginationInfo:aa,headerTitle:la,headerDescription:na},ra={$style:oa},ua=le(it,[["__cssModules",ra]]),ia=["dir"],da=["placeholder","value"],ca=["onClick","title"],ma=["onClick","title"],pa=["onClick","title"],va=["onClick","title"],ga=ae({__name:"GroupManagementTable",props:{groups:{},loading:{type:Boolean},selectedGroups:{},currentUser:{},totalPages:{},currentPage:{},filters:{}},emits:["filters-changed","group-action"],setup(_,{emit:y}){const u=y,P=ee(),L=D(()=>P.currentLanguage==="ar"),d=D(()=>P.t),r=l=>{const $=l.target;u("filters-changed",{search:$.value})},w=l=>{u("group-action","add_users",l)};return(l,$)=>(h(),C("div",{class:s(l.$style.groupTable),dir:L.value?"rtl":"ltr"},[e("div",{class:s(l.$style.tableHeader)},[e("div",{class:s(l.$style.headerCopy)},[e("h2",{class:s(l.$style.headerTitle)},o(d.value("userManagement.groups.headerTitle")),3),e("p",{class:s(l.$style.headerDescription)},o(d.value("userManagement.groups.headerSubtitle")),3)],2),e("div",{class:s(l.$style.searchSection)},[e("div",{class:s(l.$style.searchBox)},[e("i",{class:s(["fas fa-search",l.$style.searchIcon])},null,2),e("input",{type:"text",placeholder:d.value("userManagement.groups.searchGroups"),value:l.filters.search||"",onInput:r,class:s(l.$style.searchInput),autocomplete:"off",autocapitalize:"off",autocorrect:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true"},null,42,da)],2),e("div",{class:s(l.$style.filters)},[As(l.$slots,"filters")],2)],2)],2),e("div",{class:s(l.$style.tableContainer)},[e("table",{class:s(l.$style.table)},[e("thead",{class:s(l.$style.tableHead)},[e("tr",null,[e("th",{class:s(l.$style.checkboxColumn)},[e("input",{type:"checkbox",class:s(l.$style.checkbox)},null,2)],2),e("th",{class:s(l.$style.nameColumn)},o(d.value("userManagement.groups.columns.name")),3),e("th",{class:s(l.$style.countColumn)},o(d.value("userManagement.groups.columns.adminCount")),3),e("th",{class:s(l.$style.countColumn)},o(d.value("userManagement.groups.columns.userCount")),3),e("th",{class:s(l.$style.actionsColumn)},o(d.value("userManagement.groups.columns.actions")),3)])],2),e("tbody",{class:s(l.$style.tableBody)},[(h(!0),C(Z,null,x(l.groups,T=>(h(),C("tr",{key:T.id,class:s(l.$style.tableRow)},[e("td",{class:s(l.$style.checkboxCell)},[e("input",{type:"checkbox",class:s(l.$style.checkbox)},null,2)],2),e("td",{class:s(l.$style.nameCell)},o(T.name),3),e("td",{class:s(l.$style.countCell)},o(T.admin_count),3),e("td",{class:s(l.$style.countCell)},o(T.user_count),3),e("td",{class:s(l.$style.actionsCell)},[e("div",{class:s(l.$style.actionButtons)},[e("button",{class:s([l.$style.actionBtn,l.$style.addUsersBtn]),onClick:c=>w(T),title:d.value("userManagement.groups.actions.addUsers")},$[0]||($[0]=[e("i",{class:"fas fa-user-plus"},null,-1)]),10,ca),e("button",{class:s([l.$style.actionBtn,l.$style.viewBtn]),onClick:c=>l.$emit("group-action","view",T),title:d.value("userManagement.groups.actions.view")},$[1]||($[1]=[e("i",{class:"fas fa-eye"},null,-1)]),10,ma),e("button",{class:s([l.$style.actionBtn,l.$style.editBtn]),onClick:c=>l.$emit("group-action","edit",T),title:d.value("userManagement.groups.actions.edit")},$[2]||($[2]=[e("i",{class:"fas fa-edit"},null,-1)]),10,pa),e("button",{class:s([l.$style.actionBtn,l.$style.deleteBtn]),onClick:c=>l.$emit("group-action","delete",T),title:d.value("userManagement.groups.actions.delete")},$[3]||($[3]=[e("i",{class:"fas fa-trash"},null,-1)]),10,va)],2)],2)],2))),128))],2)],2),l.groups.length===0&&!l.loading?(h(),C("div",{key:0,class:s(l.$style.emptyState)},[e("i",{class:s(["fas fa-layer-group",l.$style.emptyIcon])},null,2),e("h3",{class:s(l.$style.emptyTitle)},o(d.value("userManagement.groups.noGroupsFound")),3)],2)):j("",!0)],2)],10,ia))}}),ya="_groupTable_1sgpx_3",fa="_tableHeader_1sgpx_17",ba="_headerCopy_1sgpx_33",_a="_headerTitle_1sgpx_53",$a="_headerDescription_1sgpx_67",ha="_searchSection_1sgpx_81",wa="_searchBox_1sgpx_95",ka="_searchInput_1sgpx_109",Ca="_searchIcon_1sgpx_163",Ba="_filters_1sgpx_183",Ma="_filterSelect_1sgpx_197",Ua="_tableContainer_1sgpx_219",Ta="_table_1sgpx_17",Sa="_tableHead_1sgpx_17",Ga="_checkboxColumn_1sgpx_271",Da="_countColumn_1sgpx_281",Ia="_actionsColumn_1sgpx_291",Ra="_tableRow_1sgpx_301",Pa="_actionButtons_1sgpx_311",Aa="_actionBtn_1sgpx_321",ja="_emptyState_1sgpx_337",La="_emptyIcon_1sgpx_347",Ea={groupTable:ya,tableHeader:fa,headerCopy:ba,headerTitle:_a,headerDescription:$a,searchSection:ha,searchBox:wa,searchInput:ka,searchIcon:Ca,filters:Ba,filterSelect:Ma,tableContainer:Ua,table:Ta,tableHead:Sa,checkboxColumn:Ga,countColumn:Da,actionsColumn:Ia,tableRow:Ra,actionButtons:Pa,actionBtn:Aa,emptyState:ja,emptyIcon:La},Fa={$style:Ea},qa=le(ga,[["__cssModules",Fa]]),Ha=["dir"],Na=["disabled"],Oa=["disabled"],Va=["disabled"],za=["disabled"],Wa=["value"],Qa=["type","placeholder"],Ja=["title"],Ka=["value"],Xa=["disabled"],Ya=ae({__name:"UserModal",props:{mode:{},user:{},roles:{},groups:{}},emits:["save","close"],setup(_,{emit:y}){const u=_,P=y,L=ee(),d=D(()=>L.currentLanguage==="ar"),r=D(()=>L.t),w=D(()=>!0),l=U({email:"",first_name:"",last_name:"",role:"user",auth_type:"regular",password:"",groups:[]}),$=U({}),T=U(!1),c=D(()=>{const{email:a,first_name:p,last_name:t,role:n,password:B,auth_type:b}=l.value;return!(!a||!p||!t||!n||u.mode.type==="create"&&b==="regular"&&(!B||g(B).length>0)||Object.keys($.value).length>0)}),g=a=>{const p=[],{email:t,first_name:n,last_name:B}=l.value;a.length<8&&p.push(r.value("userManagement.validation.password.minLength")),/^\d+$/.test(a)&&p.push(r.value("userManagement.validation.password.onlyNumbers")),["password","password123","admin","12345678","qwerty","abc123","password1","admin123","123456789","welcome"].includes(a.toLowerCase())&&p.push(r.value("userManagement.validation.password.tooCommon"));const A=[t,n,B].filter(Boolean),X=a.toLowerCase();for(const ne of A)if(ne&&ne.length>2){const oe=ne.toLowerCase();if((X.includes(oe)||oe.includes(X))&&S(X,oe)>.7){p.push(r.value("userManagement.validation.password.tooSimilar"));break}}return p},S=(a,p)=>{const t=a.length>p.length?a:p,n=a.length>p.length?p:a;if(t.length===0)return 1;const B=f(t,n);return(t.length-B)/t.length},f=(a,p)=>{const t=[];for(let n=0;n<=p.length;n++)t[n]=[n];for(let n=0;n<=a.length;n++)t[0][n]=n;for(let n=1;n<=p.length;n++)for(let B=1;B<=a.length;B++)p.charAt(n-1)===a.charAt(B-1)?t[n][B]=t[n-1][B-1]:t[n][B]=Math.min(t[n-1][B-1]+1,t[n][B-1]+1,t[n-1][B]+1);return t[p.length][a.length]},R=()=>{if(u.mode.type==="create"&&l.value.auth_type==="regular"&&l.value.password){const a=g(l.value.password);a.length>0?$.value.password=a[0]:delete $.value.password}else delete $.value.password};se(()=>l.value.password,R),se(()=>l.value.email,R),se(()=>l.value.first_name,R),se(()=>l.value.last_name,R);const E=()=>{switch(u.mode.type){case"create":return r.value("userManagement.modals.user.create.title");case"edit":return r.value("userManagement.modals.user.edit.title");case"view":return r.value("userManagement.modals.user.view.title");case"invite":return r.value("userManagement.modals.user.invite.title");default:return""}},m=()=>{c.value&&P("save",l.value)};return se(()=>u.user,a=>{a?l.value={email:a.email,first_name:a.first_name,last_name:a.last_name,role:a.role,auth_type:"regular",password:"",groups:[]}:l.value={email:"",first_name:"",last_name:"",role:"user",auth_type:"regular",password:"",groups:[]},$.value={}},{immediate:!0}),(a,p)=>w.value?(h(),C("div",{key:0,class:s(a.$style.modalOverlay),onClick:p[9]||(p[9]=te(t=>a.$emit("close"),["self"]))},[e("div",{class:s(a.$style.modal),dir:d.value?"rtl":"ltr"},[e("div",{class:s(a.$style.modalHeader)},[e("h3",{class:s(a.$style.modalTitle)},o(E()),3),e("button",{class:s(a.$style.closeBtn),onClick:p[0]||(p[0]=t=>a.$emit("close"))},p[10]||(p[10]=[e("i",{class:"fas fa-times"},null,-1)]),2)],2),e("div",{class:s(a.$style.modalBody)},[e("form",{onSubmit:te(m,["prevent"])},[e("div",{class:s(a.$style.formGroup)},[e("label",{class:s(a.$style.label)},o(r.value("userManagement.forms.user.email")),3),W(e("input",{"onUpdate:modelValue":p[1]||(p[1]=t=>l.value.email=t),type:"email",required:"",class:s(a.$style.input),disabled:a.mode.type==="view"||a.mode.type==="edit"},null,10,Na),[[ye,l.value.email]])],2),e("div",{class:s(a.$style.formRow)},[e("div",{class:s(a.$style.formGroup)},[e("label",{class:s(a.$style.label)},o(r.value("userManagement.forms.user.firstName")),3),W(e("input",{"onUpdate:modelValue":p[2]||(p[2]=t=>l.value.first_name=t),type:"text",required:"",class:s(a.$style.input),disabled:a.mode.type==="view"||a.mode.type==="edit"},null,10,Oa),[[ye,l.value.first_name]])],2),e("div",{class:s(a.$style.formGroup)},[e("label",{class:s(a.$style.label)},o(r.value("userManagement.forms.user.lastName")),3),W(e("input",{"onUpdate:modelValue":p[3]||(p[3]=t=>l.value.last_name=t),type:"text",required:"",class:s(a.$style.input),disabled:a.mode.type==="view"||a.mode.type==="edit",autocomplete:"off"},null,10,Va),[[ye,l.value.last_name]])],2)],2),e("div",{class:s(a.$style.formGroup)},[e("label",{class:s(a.$style.label)},o(r.value("userManagement.forms.user.role")),3),W(e("select",{"onUpdate:modelValue":p[4]||(p[4]=t=>l.value.role=t),class:s(a.$style.select),disabled:a.mode.type==="view",required:""},[(h(!0),C(Z,null,x(a.roles,t=>(h(),C("option",{key:t.value,value:t.value},o(t.display),9,Wa))),128))],10,za),[[Fe,l.value.role]])],2),a.mode.type==="create"&&l.value.auth_type==="regular"?(h(),C("div",{key:0,class:s(a.$style.formGroup)},[e("label",{class:s(a.$style.label)},o(r.value("userManagement.forms.user.password")),3),e("div",{class:s(a.$style.passwordInputContainer)},[W(e("input",{"onUpdate:modelValue":p[5]||(p[5]=t=>l.value.password=t),type:T.value?"text":"password",required:"",class:s([a.$style.input,$.value.password?a.$style.inputError:""]),placeholder:r.value("userManagement.forms.user.passwordPlaceholder"),autocomplete:"new-password",autocapitalize:"off",autocorrect:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true"},null,10,Qa),[[as,l.value.password]]),e("button",{type:"button",class:s(a.$style.passwordToggle),onClick:p[6]||(p[6]=t=>T.value=!T.value),title:T.value?r.value("userManagement.forms.user.hidePassword"):r.value("userManagement.forms.user.showPassword")},[e("i",{class:s(T.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],10,Ja)],2),$.value.password?(h(),C("div",{key:0,class:s(a.$style.errorMessage)},o($.value.password),3)):j("",!0)],2)):j("",!0),a.mode.type==="invite"?(h(),C("div",{key:1,class:s(a.$style.formGroup)},[e("label",{class:s(a.$style.label)},o(r.value("userManagement.forms.user.groups")),3),e("div",{class:s(a.$style.checkboxGroup)},[(h(!0),C(Z,null,x(a.groups,t=>(h(),C("div",{key:t.id,class:s(a.$style.checkboxItem)},[W(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":p[7]||(p[7]=n=>l.value.groups=n),class:s(a.$style.checkbox)},null,10,Ka),[[we,l.value.groups]]),e("label",null,o(t.name),1)],2))),128))],2)],2)):j("",!0)],32)],2),a.mode.type!=="view"?(h(),C("div",{key:0,class:s(a.$style.modalFooter)},[e("button",{type:"button",class:s([a.$style.btn,a.$style.cancelBtn]),onClick:p[8]||(p[8]=t=>a.$emit("close"))},o(r.value("userManagement.buttons.cancel")),3),e("button",{type:"button",class:s([a.$style.btn,a.$style.saveBtn,c.value?"":a.$style.saveBtn_disabled]),disabled:!c.value,onClick:m},o(r.value("userManagement.buttons.save")),11,Xa)],2)):j("",!0)],10,Ha)],2)):j("",!0)}}),Za="_modalOverlay_q9mic_3",xa="_modal_q9mic_3",el="_modalHeader_q9mic_55",sl="_modalTitle_q9mic_71",tl="_closeBtn_q9mic_85",al="_modalBody_q9mic_117",ll="_formGroup_q9mic_129",nl="_formRow_q9mic_137",ol="_label_q9mic_149",rl="_input_q9mic_163",ul="_select_q9mic_165",il="_inputError_q9mic_201",dl="_errorMessage_q9mic_211",cl="_checkboxGroup_q9mic_239",ml="_checkboxItem_q9mic_251",pl="_checkbox_q9mic_239",vl="_modalFooter_q9mic_271",gl="_btn_q9mic_287",yl="_cancelBtn_q9mic_307",fl="_saveBtn_q9mic_329",bl="_saveBtn_disabled_q9mic_349",_l="_passwordInputContainer_q9mic_373",$l="_passwordToggle_q9mic_391",hl={modalOverlay:Za,modal:xa,modalHeader:el,modalTitle:sl,closeBtn:tl,modalBody:al,formGroup:ll,formRow:nl,label:ol,input:rl,select:ul,inputError:il,errorMessage:dl,checkboxGroup:cl,checkboxItem:ml,checkbox:pl,modalFooter:vl,btn:gl,cancelBtn:yl,saveBtn:fl,saveBtn_disabled:bl,passwordInputContainer:_l,passwordToggle:$l},wl={$style:hl},kl=le(Ya,[["__cssModules",wl]]),Cl=["dir"],Bl=["disabled"],Ml=["placeholder"],Ul=["value"],Tl=["disabled"],Sl=ae({__name:"GroupModal",props:{mode:{},group:{}},emits:["save","close"],setup(_,{emit:y}){const u=_,P=y,L=ee(),d=D(()=>L.currentLanguage==="ar"),r=D(()=>L.t),w=D(()=>({adminHelpText:d.value?"اختر المستخدمين الذين سيكونوا مديري هذه المجموعة (مطلوب مدير واحد على الأقل)":"Select users who will be administrators of this group (at least one admin is required)",selectedAdmins:d.value?"مدير(ين) محدد":"admin(s) selected"})),l=D(()=>!0),$=U(""),T=U(!1),c=U([]),g=U({name:"",description:"",admin_user_ids:[]}),S=D(()=>!(!g.value.name.trim()||u.mode.type==="create"&&g.value.admin_user_ids.length===0)),f=D(()=>$.value?c.value.filter(a=>a.full_name.toLowerCase().includes($.value.toLowerCase())||a.email.toLowerCase().includes($.value.toLowerCase())):c.value),R=()=>{switch(u.mode.type){case"create":return r.value("userManagement.modals.group.create.title");case"edit":return r.value("userManagement.modals.group.edit.title");case"view":return r.value("userManagement.modals.group.view.title");default:return""}},E=async()=>{try{T.value=!0;const a=await fe.getUsers();c.value=a.users}catch{}finally{T.value=!1}},m=()=>{if(!S.value)return;const a={name:g.value.name.trim(),description:g.value.description};u.mode.type==="create"?P("save",{...a,admin_user_ids:g.value.admin_user_ids}):P("save",a)};return ls(()=>{u.mode.type==="create"&&E()}),se(()=>u.group,a=>{a?g.value={name:a.name,description:a.description||"",admin_user_ids:[]}:g.value={name:"",description:"",admin_user_ids:[]}},{immediate:!0}),(a,p)=>l.value?(h(),C("div",{key:0,class:s(a.$style.modalOverlay),onClick:p[5]||(p[5]=te(t=>a.$emit("close"),["self"]))},[e("div",{class:s(a.$style.modal),dir:d.value?"rtl":"ltr"},[e("div",{class:s(a.$style.modalHeader)},[e("h3",{class:s(a.$style.modalTitle)},o(R()),3),e("button",{class:s(a.$style.closeBtn),onClick:p[0]||(p[0]=t=>a.$emit("close"))},p[6]||(p[6]=[e("i",{class:"fas fa-times"},null,-1)]),2)],2),e("div",{class:s(a.$style.modalBody)},[e("form",{onSubmit:te(m,["prevent"])},[e("div",{class:s(a.$style.formGroup)},[e("label",{class:s(a.$style.label)},o(r.value("userManagement.forms.group.name")),3),W(e("input",{"onUpdate:modelValue":p[1]||(p[1]=t=>g.value.name=t),type:"text",required:"",class:s([a.$style.input,!g.value.name.trim()&&g.value.name!==""?a.$style.inputError:""]),disabled:a.mode.type==="view"},null,10,Bl),[[ye,g.value.name]])],2),a.mode.type==="create"?(h(),C("div",{key:0,class:s(a.$style.formGroup)},[e("label",{class:s(a.$style.label)},o(r.value("userManagement.forms.group.admins")),3),e("p",{class:s(a.$style.helpText)},o(w.value.adminHelpText),3),e("div",{class:s(a.$style.userSearch)},[W(e("input",{type:"text",placeholder:r.value("userManagement.users.searchUsers"),"onUpdate:modelValue":p[2]||(p[2]=t=>$.value=t),class:s(a.$style.searchInput)},null,10,Ml),[[ye,$.value]])],2),T.value?(h(),C("div",{key:0,class:s(a.$style.loadingUsers)},[p[7]||(p[7]=e("i",{class:"fas fa-spinner fa-spin"},null,-1)),H(" "+o(r.value("common.loading"))+"... ",1)],2)):(h(),C("div",{key:1,class:s(a.$style.usersList)},[(h(!0),C(Z,null,x(f.value,t=>(h(),C("div",{key:t.id,class:s(a.$style.userCheckboxItem)},[e("label",{class:s(a.$style.userCheckboxLabel)},[W(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":p[3]||(p[3]=n=>g.value.admin_user_ids=n),class:s(a.$style.userCheckbox)},null,10,Ul),[[we,g.value.admin_user_ids]]),e("div",{class:s(a.$style.userInfo)},[e("div",{class:s(a.$style.userName)},o(t.full_name),3),e("div",{class:s(a.$style.userEmail)},o(t.email),3),e("div",{class:s(a.$style.userRole)},o(t.role_display||t.role),3)],2)],2)],2))),128)),f.value.length===0?(h(),C("div",{key:0,class:s(a.$style.noUsers)},[p[8]||(p[8]=e("i",{class:"fas fa-users"},null,-1)),e("p",null,o(r.value("userManagement.users.noUsersFound")),1)],2)):j("",!0)],2)),g.value.admin_user_ids.length>0?(h(),C("div",{key:2,class:s(a.$style.selectedCount)},o(g.value.admin_user_ids.length)+" "+o(w.value.selectedAdmins),3)):j("",!0),u.mode.type==="create"&&g.value.admin_user_ids.length===0?(h(),C("div",{key:3,class:s(a.$style.validationError)},[p[9]||(p[9]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),H(" "+o(d.value?"يجب اختيار مدير واحد على الأقل":"At least one admin is required"),1)],2)):j("",!0)],2)):j("",!0)],32)],2),a.mode.type!=="view"?(h(),C("div",{key:0,class:s(a.$style.modalFooter)},[e("button",{type:"button",class:s([a.$style.btn,a.$style.cancelBtn]),onClick:p[4]||(p[4]=t=>a.$emit("close"))},o(r.value("userManagement.buttons.cancel")),3),e("button",{type:"button",class:s([a.$style.btn,a.$style.saveBtn,S.value?"":a.$style.saveBtn_disabled]),disabled:!S.value,onClick:m},o(r.value("userManagement.buttons.save")),11,Tl)],2)):j("",!0)],10,Cl)],2)):j("",!0)}}),Gl="_modalOverlay_dxjus_3",Dl="_modal_dxjus_3",Il="_modalHeader_dxjus_55",Rl="_modalTitle_dxjus_71",Pl="_closeBtn_dxjus_85",Al="_modalBody_dxjus_117",jl="_formGroup_dxjus_129",Ll="_label_dxjus_137",El="_input_dxjus_151",Fl="_textarea_dxjus_153",ql="_inputError_dxjus_199",Hl="_userSelection_dxjus_209",Nl="_userSearch_dxjus_217",Ol="_searchInput_dxjus_225",Vl="_loadingUsers_dxjus_259",zl="_usersList_dxjus_279",Wl="_userCheckboxItem_dxjus_295",Ql="_userCheckboxLabel_dxjus_311",Jl="_userCheckbox_dxjus_295",Kl="_userInfo_dxjus_351",Xl="_userName_dxjus_359",Yl="_userEmail_dxjus_371",Zl="_userRole_dxjus_383",xl="_noUsers_dxjus_401",en="_selectedCount_dxjus_425",sn="_validationError_dxjus_445",tn="_helpText_dxjus_479",an="_searchResults_dxjus_493",ln="_searchResultItem_dxjus_517",nn="_selectedAdmins_dxjus_537",on="_selectedAdmin_dxjus_537",rn="_removeBtn_dxjus_573",un="_modalFooter_dxjus_611",dn="_btn_dxjus_627",cn="_cancelBtn_dxjus_647",mn="_saveBtn_dxjus_669",pn="_saveBtn_disabled_dxjus_689",vn={modalOverlay:Gl,modal:Dl,modalHeader:Il,modalTitle:Rl,closeBtn:Pl,modalBody:Al,formGroup:jl,label:Ll,input:El,textarea:Fl,inputError:ql,userSelection:Hl,userSearch:Nl,searchInput:Ol,loadingUsers:Vl,usersList:zl,userCheckboxItem:Wl,userCheckboxLabel:Ql,userCheckbox:Jl,userInfo:Kl,userName:Xl,userEmail:Yl,userRole:Zl,noUsers:xl,selectedCount:en,validationError:sn,helpText:tn,searchResults:an,searchResultItem:ln,selectedAdmins:nn,selectedAdmin:on,removeBtn:rn,modalFooter:un,btn:dn,cancelBtn:cn,saveBtn:mn,saveBtn_disabled:pn},gn={$style:vn},yn=le(Sl,[["__cssModules",gn]]),fn=["dir"],bn={value:""},_n=["value"],$n={value:""},hn=["value"],wn=ae({__name:"BulkActionModal",props:{mode:{},groups:{},roles:{}},emits:["apply","close"],setup(_,{emit:y}){const u=_,P=y,L=ee(),d=D(()=>L.currentLanguage==="ar"),r=D(()=>L.t),w=D(()=>!0),l=U({group_id:null,is_group_admin:!1,role:""}),$=()=>{switch(u.mode.type){case"add_to_group":return r.value("userManagement.modals.bulkActions.addToGroup");case"change_role":return r.value("userManagement.modals.bulkActions.changeRole");default:return r.value("userManagement.modals.bulkActions.title")}},T=()=>{u.mode.type==="add_to_group"?P("apply",{group_id:l.value.group_id,user_ids:u.mode.selected_users.map(c=>c.id),is_group_admin:l.value.is_group_admin}):u.mode.type==="change_role"&&P("apply",{role:l.value.role,user_ids:u.mode.selected_users.map(c=>c.id)})};return(c,g)=>w.value?(h(),C("div",{key:0,class:s(c.$style.modalOverlay),onClick:g[5]||(g[5]=te(S=>c.$emit("close"),["self"]))},[e("div",{class:s(c.$style.modal),dir:d.value?"rtl":"ltr"},[e("div",{class:s(c.$style.modalHeader)},[e("h3",{class:s(c.$style.modalTitle)},o($()),3),e("button",{class:s(c.$style.closeBtn),onClick:g[0]||(g[0]=S=>c.$emit("close"))},g[6]||(g[6]=[e("i",{class:"fas fa-times"},null,-1)]),2)],2),e("div",{class:s(c.$style.modalBody)},[e("div",{class:s(c.$style.selectedUsers)},[e("h4",null,o(r.value("userManagement.users.selectedUsers"))+": "+o(c.mode.selected_users.length),1),e("div",{class:s(c.$style.usersList)},[(h(!0),C(Z,null,x(c.mode.selected_users,S=>(h(),C("div",{key:S.id,class:s(c.$style.userItem)},o(S.full_name)+" ("+o(S.email)+") ",3))),128))],2)],2),e("form",{onSubmit:te(T,["prevent"])},[c.mode.type==="add_to_group"?(h(),C("div",{key:0,class:s(c.$style.formGroup)},[e("label",{class:s(c.$style.label)},o(r.value("userManagement.modals.bulkActions.addToGroup")),3),W(e("select",{"onUpdate:modelValue":g[1]||(g[1]=S=>l.value.group_id=S),class:s(c.$style.select),required:""},[e("option",bn,o(r.value("userManagement.forms.group.selectAdmins")),1),(h(!0),C(Z,null,x(c.groups,S=>(h(),C("option",{key:S.id,value:S.id},o(S.name),9,_n))),128))],2),[[Fe,l.value.group_id]]),e("div",{class:s(c.$style.checkboxGroup)},[e("label",{class:s(c.$style.checkboxItem)},[W(e("input",{type:"checkbox","onUpdate:modelValue":g[2]||(g[2]=S=>l.value.is_group_admin=S),class:s(c.$style.checkbox)},null,2),[[we,l.value.is_group_admin]]),H(" "+o(r.value("userManagement.forms.user.makeGroupAdmin")),1)],2)],2)],2)):c.mode.type==="change_role"?(h(),C("div",{key:1,class:s(c.$style.formGroup)},[e("label",{class:s(c.$style.label)},o(r.value("userManagement.modals.bulkActions.changeRole")),3),W(e("select",{"onUpdate:modelValue":g[3]||(g[3]=S=>l.value.role=S),class:s(c.$style.select),required:""},[e("option",$n,o(r.value("userManagement.forms.user.role")),1),(h(!0),C(Z,null,x(c.roles,S=>(h(),C("option",{key:S.value,value:S.value},o(S.display),9,hn))),128))],2),[[Fe,l.value.role]])],2)):j("",!0)],32)],2),e("div",{class:s(c.$style.modalFooter)},[e("button",{type:"button",class:s([c.$style.btn,c.$style.cancelBtn]),onClick:g[4]||(g[4]=S=>c.$emit("close"))},o(r.value("userManagement.buttons.cancel")),3),e("button",{type:"button",class:s([c.$style.btn,c.$style.applyBtn]),onClick:T},o(r.value("userManagement.buttons.apply")),3)],2)],10,fn)],2)):j("",!0)}}),kn="_modalOverlay_2a5eb_3",Cn="_modal_2a5eb_3",Bn="_modalHeader_2a5eb_55",Mn="_modalTitle_2a5eb_71",Un="_closeBtn_2a5eb_85",Tn="_modalBody_2a5eb_117",Sn="_selectedUsers_2a5eb_129",Gn="_usersList_2a5eb_153",Dn="_userItem_2a5eb_163",In="_formGroup_2a5eb_185",Rn="_label_2a5eb_193",Pn="_select_2a5eb_129",An="_checkboxGroup_2a5eb_241",jn="_checkboxItem_2a5eb_249",Ln="_checkbox_2a5eb_241",En="_modalFooter_2a5eb_271",Fn="_btn_2a5eb_287",qn="_cancelBtn_2a5eb_307",Hn="_applyBtn_2a5eb_329",Nn={modalOverlay:kn,modal:Cn,modalHeader:Bn,modalTitle:Mn,closeBtn:Un,modalBody:Tn,selectedUsers:Sn,usersList:Gn,userItem:Dn,formGroup:In,label:Rn,select:Pn,checkboxGroup:An,checkboxItem:jn,checkbox:Ln,modalFooter:En,btn:Fn,cancelBtn:qn,applyBtn:Hn},On={$style:Nn},Vn=le(wn,[["__cssModules",On]]),zn=["dir"],Wn=["placeholder"],Qn=["value"],Jn=["disabled"],Kn={key:0,class:"fas fa-spinner fa-spin"},Xn=ae({__name:"AddUsersToGroupModal",props:{visible:{type:Boolean},group:{}},emits:["close","success"],setup(_,{emit:y}){const u=_,P=y,L=ee(),d=D(()=>L.currentLanguage==="ar"),r=D(()=>L.t),w=D(()=>({title:d.value?"إضافة مستخدمين إلى المجموعة":"Add Users to Group",makeGroupAdmin:d.value?"جعل مدير المجموعة":"Make Group Admin"})),l=U(""),$=U(!1),T=U(!1),c=U([]),g=U([]),S=U(!1),f=D(()=>{var a,p;let m=c.value;if((a=u.group)!=null&&a.members&&u.group.members.length>0){const t=u.group.members.map(n=>n.id);m=m.filter(n=>!t.includes(n.id))}else if((p=u.group)!=null&&p.user_groups){const t=u.group.user_groups.map(n=>n.user.id);m=m.filter(n=>!t.includes(n.id))}return l.value&&(m=m.filter(t=>t.full_name.toLowerCase().includes(l.value.toLowerCase())||t.email.toLowerCase().includes(l.value.toLowerCase()))),m}),R=async()=>{try{$.value=!0;const m=await fe.getUsers();c.value=m.users}catch{}finally{$.value=!1}},E=async()=>{if(!(!u.group||g.value.length===0))try{if(T.value=!0,g.value.length>1){const m=await fe.bulkAddUsersToGroup({group_id:u.group.id,user_ids:g.value,is_group_admin:S.value});P("success",{group:{...m.group,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),description:"",user_groups:[]},addedUsers:m.added_users||[]})}else{const m=await fe.addUserToGroup(u.group.id,{user_id:g.value[0],is_group_admin:S.value});P("success",{group:{...m.group,created_at:m.group.created_at||new Date().toISOString(),updated_at:m.group.updated_at||new Date().toISOString()},addedUsers:[]})}g.value=[],S.value=!1,l.value=""}catch{}finally{T.value=!1}};return se(()=>u.visible,m=>{m&&(R(),g.value=[],S.value=!1,l.value="")}),(m,a)=>{var p,t;return m.visible?(h(),C("div",{key:0,class:s(m.$style.modalOverlay),onClick:a[5]||(a[5]=te(n=>m.$emit("close"),["self"]))},[e("div",{class:s(m.$style.modal),dir:d.value?"rtl":"ltr"},[e("div",{class:s(m.$style.modalHeader)},[e("h3",{class:s(m.$style.modalTitle)},o(w.value.title),3),e("button",{class:s(m.$style.closeBtn),onClick:a[0]||(a[0]=n=>m.$emit("close"))},a[6]||(a[6]=[e("i",{class:"fas fa-times"},null,-1)]),2)],2),e("div",{class:s(m.$style.modalBody)},[e("div",{class:s(m.$style.groupInfo)},[e("div",{class:s(m.$style.groupName)},[a[7]||(a[7]=e("i",{class:"fas fa-users"},null,-1)),H(" "+o((p=m.group)==null?void 0:p.name),1)],2),e("div",{class:s(m.$style.groupDescription)},o((t=m.group)==null?void 0:t.description),3)],2),e("div",{class:s(m.$style.formSection)},[e("div",{class:s(m.$style.sectionHeader)},[e("h4",null,o(r.value("userManagement.modals.addUsersToGroup.selectUsers")),1),e("p",{class:s(m.$style.helpText)},o(r.value("userManagement.modals.addUsersToGroup.helpText")),3)],2),e("div",{class:s(m.$style.userSearch)},[W(e("input",{type:"text",placeholder:r.value("userManagement.users.searchUsers"),"onUpdate:modelValue":a[1]||(a[1]=n=>l.value=n),class:s(m.$style.searchInput)},null,10,Wn),[[ye,l.value]])],2),e("div",{class:s(m.$style.adminToggle)},[e("label",{class:s(m.$style.adminToggleLabel)},[W(e("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=n=>S.value=n),class:s(m.$style.checkbox)},null,2),[[we,S.value]]),e("span",null,o(w.value.makeGroupAdmin),1)],2)],2),$.value?(h(),C("div",{key:0,class:s(m.$style.loadingUsers)},[a[8]||(a[8]=e("i",{class:"fas fa-spinner fa-spin"},null,-1)),H(" "+o(r.value("common.loading"))+"... ",1)],2)):(h(),C("div",{key:1,class:s(m.$style.usersList)},[(h(!0),C(Z,null,x(f.value,n=>(h(),C("div",{key:n.id,class:s(m.$style.userCheckboxItem)},[e("label",{class:s(m.$style.userCheckboxLabel)},[W(e("input",{type:"checkbox",value:n.id,"onUpdate:modelValue":a[3]||(a[3]=B=>g.value=B),class:s(m.$style.userCheckbox)},null,10,Qn),[[we,g.value]]),e("div",{class:s(m.$style.userInfo)},[e("div",{class:s(m.$style.userName)},o(n.full_name),3),e("div",{class:s(m.$style.userEmail)},o(n.email),3),e("div",{class:s(m.$style.userRole)},o(n.role_display||n.role),3)],2)],2)],2))),128)),f.value.length===0?(h(),C("div",{key:0,class:s(m.$style.noUsers)},[a[9]||(a[9]=e("i",{class:"fas fa-users"},null,-1)),e("p",null,o(r.value("userManagement.modals.addUsersToGroup.noAvailableUsers")),1)],2)):j("",!0)],2)),g.value.length>0?(h(),C("div",{key:2,class:s(m.$style.selectedCount)},o(g.value.length)+" "+o(r.value("userManagement.modals.addUsersToGroup.selectedUsers")),3)):j("",!0)],2)],2),e("div",{class:s(m.$style.modalFooter)},[e("button",{type:"button",class:s([m.$style.btn,m.$style.cancelBtn]),onClick:a[4]||(a[4]=n=>m.$emit("close"))},o(r.value("userManagement.buttons.cancel")),3),e("button",{type:"button",class:s([m.$style.btn,m.$style.saveBtn]),onClick:E,disabled:g.value.length===0||T.value},[T.value?(h(),C("i",Kn)):j("",!0),H(" "+o(T.value?r.value("common.saving"):r.value("userManagement.buttons.addUsers")),1)],10,Jn)],2)],10,zn)],2)):j("",!0)}}}),Yn="_modalOverlay_muvm3_3",Zn="_modal_muvm3_3",xn="_modalHeader_muvm3_55",eo="_modalTitle_muvm3_71",so="_closeBtn_muvm3_85",to="_modalBody_muvm3_117",ao="_groupInfo_muvm3_129",lo="_groupName_muvm3_145",no="_groupDescription_muvm3_173",oo="_formSection_muvm3_183",ro="_sectionHeader_muvm3_191",uo="_helpText_muvm3_205",io="_userSearch_muvm3_219",co="_searchInput_muvm3_227",mo="_adminToggle_muvm3_261",po="_adminToggleLabel_muvm3_277",vo="_checkbox_muvm3_295",go="_loadingUsers_muvm3_309",yo="_usersList_muvm3_329",fo="_userCheckboxItem_muvm3_345",bo="_userCheckboxLabel_muvm3_361",_o="_userCheckbox_muvm3_345",$o="_userInfo_muvm3_401",ho="_userName_muvm3_409",wo="_userEmail_muvm3_421",ko="_userRole_muvm3_433",Co="_noUsers_muvm3_451",Bo="_selectedCount_muvm3_475",Mo="_modalFooter_muvm3_495",Uo="_btn_muvm3_511",To="_cancelBtn_muvm3_547",So="_saveBtn_muvm3_569",Go={modalOverlay:Yn,modal:Zn,modalHeader:xn,modalTitle:eo,closeBtn:so,modalBody:to,groupInfo:ao,groupName:lo,groupDescription:no,formSection:oo,sectionHeader:ro,helpText:uo,userSearch:io,searchInput:co,adminToggle:mo,adminToggleLabel:po,checkbox:vo,loadingUsers:go,usersList:yo,userCheckboxItem:fo,userCheckboxLabel:bo,userCheckbox:_o,userInfo:$o,userName:ho,userEmail:wo,userRole:ko,noUsers:Co,selectedCount:Bo,modalFooter:Mo,btn:Uo,cancelBtn:To,saveBtn:So},Do={$style:Go},Io=le(Xn,[["__cssModules",Do]]),Ro=["dir"],Po={value:""},Ao=["value","disabled"],jo=["disabled"],Lo={key:0,class:"fas fa-spinner fa-spin"},Eo=ae({__name:"UserRoleModal",props:{visible:{type:Boolean},user:{}},emits:["close","success"],setup(_,{emit:y}){const u=_,P=y,L=ee(),d=D(()=>L.currentLanguage==="ar"),r=D(()=>L.t),w=U(""),l=U(!1),$=D(()=>[{value:"user",display:r.value("userManagement.roles.user")},{value:"admin",display:r.value("userManagement.roles.admin")},{value:"super_admin",display:r.value("userManagement.roles.super_admin")}]),T=D(()=>!u.user||!w.value?!1:u.user.role==="super_admin"&&w.value!=="super_admin"||w.value==="super_admin"),c=f=>{switch(f){case"user":return r.value("userManagement.modals.changeRole.descriptions.user");case"admin":return r.value("userManagement.modals.changeRole.descriptions.admin");case"super_admin":return r.value("userManagement.modals.changeRole.descriptions.super_admin");default:return""}},g=f=>{var R;return((R=u.user)==null?void 0:R.role)==="super_admin"&&f!=="super_admin"?r.value("userManagement.modals.changeRole.warnings.demoteFromSuperAdmin"):f==="super_admin"?r.value("userManagement.modals.changeRole.warnings.promoteToSuperAdmin"):""},S=async()=>{if(!(!u.user||!w.value||w.value===u.user.role))try{l.value=!0;const f=await fe.updateUserRole(u.user.id,{role:w.value});P("success",{user:f.user,oldRole:u.user.role,newRole:w.value}),w.value=""}catch{}finally{l.value=!1}};return se(()=>u.visible,f=>{f&&(w.value="")}),(f,R)=>{var E,m,a,p,t,n,B,b;return f.visible?(h(),C("div",{key:0,class:s(f.$style.modalOverlay),onClick:R[3]||(R[3]=te(A=>f.$emit("close"),["self"]))},[e("div",{class:s(f.$style.modal),dir:d.value?"rtl":"ltr"},[e("div",{class:s(f.$style.modalHeader)},[e("h3",{class:s(f.$style.modalTitle)},o(r.value("userManagement.modals.changeRole.title")),3),e("button",{class:s(f.$style.closeBtn),onClick:R[0]||(R[0]=A=>f.$emit("close"))},R[4]||(R[4]=[e("i",{class:"fas fa-times"},null,-1)]),2)],2),e("div",{class:s(f.$style.modalBody)},[e("div",{class:s(f.$style.userInfo)},[e("div",{class:s(f.$style.userAvatar)},[e("div",{class:s(f.$style.avatarCircle)},o(((E=f.user)==null?void 0:E.initials)||((a=(m=f.user)==null?void 0:m.full_name)==null?void 0:a.charAt(0))||"?"),3)],2),e("div",{class:s(f.$style.userDetails)},[e("div",{class:s(f.$style.userName)},o((p=f.user)==null?void 0:p.full_name),3),e("div",{class:s(f.$style.userEmail)},o((t=f.user)==null?void 0:t.email),3),e("div",{class:s(f.$style.currentRole)},[H(o(r.value("userManagement.modals.changeRole.currentRole"))+": ",1),e("span",{class:s(f.$style.roleTag)},o(((n=f.user)==null?void 0:n.role_display)||((B=f.user)==null?void 0:B.role)),3)],2)],2)],2),e("div",{class:s(f.$style.formSection)},[e("label",{class:s(f.$style.label)},o(r.value("userManagement.modals.changeRole.newRole")),3),W(e("select",{"onUpdate:modelValue":R[1]||(R[1]=A=>w.value=A),class:s(f.$style.select),required:""},[e("option",Po,o(r.value("userManagement.modals.changeRole.selectRole")),1),(h(!0),C(Z,null,x($.value,A=>{var X;return h(),C("option",{key:A.value,value:A.value,disabled:A.value===((X=f.user)==null?void 0:X.role)},o(A.display),9,Ao)}),128))],2),[[Fe,w.value]]),w.value?(h(),C("div",{key:0,class:s(f.$style.roleDescription)},[R[5]||(R[5]=e("i",{class:"fas fa-info-circle"},null,-1)),H(" "+o(c(w.value)),1)],2)):j("",!0),w.value&&T.value?(h(),C("div",{key:1,class:s(f.$style.warning)},[R[6]||(R[6]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),H(" "+o(g(w.value)),1)],2)):j("",!0)],2)],2),e("div",{class:s(f.$style.modalFooter)},[e("button",{type:"button",class:s([f.$style.btn,f.$style.cancelBtn]),onClick:R[2]||(R[2]=A=>f.$emit("close"))},o(r.value("userManagement.buttons.cancel")),3),e("button",{type:"button",class:s([f.$style.btn,f.$style.saveBtn]),onClick:S,disabled:!w.value||w.value===((b=f.user)==null?void 0:b.role)||l.value},[l.value?(h(),C("i",Lo)):j("",!0),H(" "+o(l.value?r.value("common.saving"):r.value("userManagement.buttons.changeRole")),1)],10,jo)],2)],10,Ro)],2)):j("",!0)}}}),Fo="_modalOverlay_1l8yd_3",qo="_modal_1l8yd_3",Ho="_modalHeader_1l8yd_55",No="_modalTitle_1l8yd_71",Oo="_closeBtn_1l8yd_85",Vo="_modalBody_1l8yd_117",zo="_userInfo_1l8yd_125",Wo="_userAvatar_1l8yd_147",Qo="_avatarCircle_1l8yd_155",Jo="_userDetails_1l8yd_181",Ko="_userName_1l8yd_189",Xo="_userEmail_1l8yd_203",Yo="_currentRole_1l8yd_215",Zo="_roleTag_1l8yd_231",xo="_formSection_1l8yd_249",er="_label_1l8yd_257",sr="_select_1l8yd_271",tr="_roleDescription_1l8yd_305",ar="_warning_1l8yd_341",lr="_modalFooter_1l8yd_379",nr="_btn_1l8yd_395",or="_cancelBtn_1l8yd_431",rr="_saveBtn_1l8yd_453",ur={modalOverlay:Fo,modal:qo,modalHeader:Ho,modalTitle:No,closeBtn:Oo,modalBody:Vo,userInfo:zo,userAvatar:Wo,avatarCircle:Qo,userDetails:Jo,userName:Ko,userEmail:Xo,currentRole:Yo,roleTag:Zo,formSection:xo,label:er,select:sr,roleDescription:tr,warning:ar,modalFooter:lr,btn:nr,cancelBtn:or,saveBtn:rr},ir={$style:ur},dr=le(Eo,[["__cssModules",ir]]),cr=["dir"],mr=["type","placeholder"],pr=["title"],vr=["disabled"],gr={key:0,class:"fas fa-spinner fa-spin"},yr=ae({__name:"ResetPasswordModal",props:{visible:{type:Boolean},user:{},loading:{type:Boolean,default:!1}},emits:["save","close"],setup(_,{emit:y}){const u=_,P=y,L=ee(),d=D(()=>L.currentLanguage==="ar"),r=D(()=>L.t),w=U({password:""}),l=U({}),$=U(!1),T=U(),c=D(()=>{const t=w.value.password,n=u.user?[u.user.email,u.user.first_name,u.user.last_name].filter(Boolean):[];return{minLength:t.length>=8,notOnlyNumbers:t.length===0||!/^\d+$/.test(t),notCommon:t.length===0||!S(t),notSimilar:t.length===0||!f(t,n)}}),g=D(()=>{const{password:t}=w.value;return t?Object.values(c.value).every(n=>n):!1}),S=t=>["password","password123","admin","12345678","qwerty","abc123","password1","admin123","123456789","welcome"].includes(t.toLowerCase()),f=(t,n)=>{const B=t.toLowerCase();for(const b of n)if(b&&b.length>2){const A=b.toLowerCase();if((B.includes(A)||A.includes(B))&&R(B,A)>.7)return!0}return!1},R=(t,n)=>{const B=t.length>n.length?t:n,b=t.length>n.length?n:t;if(B.length===0)return 1;const A=E(B,b);return(B.length-A)/B.length},E=(t,n)=>{const B=[];for(let b=0;b<=n.length;b++)B[b]=[b];for(let b=0;b<=t.length;b++)B[0][b]=b;for(let b=1;b<=n.length;b++)for(let A=1;A<=t.length;A++)n.charAt(b-1)===t.charAt(A-1)?B[b][A]=B[b-1][A-1]:B[b][A]=Math.min(B[b-1][A-1]+1,B[b][A-1]+1,B[b-1][A]+1);return B[n.length][t.length]},m=()=>{const t=a(w.value.password);t.length>0?l.value.password=t[0]:delete l.value.password},a=t=>{const n=[];return t&&(c.value.minLength||n.push(r.value("userManagement.validation.password.minLength")),c.value.notOnlyNumbers||n.push(r.value("userManagement.validation.password.onlyNumbers")),c.value.notCommon||n.push(r.value("userManagement.validation.password.tooCommon")),c.value.notSimilar||n.push(r.value("userManagement.validation.password.tooSimilar"))),n};se(()=>w.value.password,m);const p=()=>{g.value&&!u.loading&&P("save",w.value.password)};return se(()=>u.visible,async t=>{var n;t&&(w.value.password="",l.value={},$.value=!1,await js(),(n=T.value)==null||n.focus())}),(t,n)=>{var B,b;return t.visible?(h(),C("div",{key:0,class:s(t.$style.modalOverlay),onClick:n[4]||(n[4]=te(A=>t.$emit("close"),["self"]))},[e("div",{class:s(t.$style.modal),dir:d.value?"rtl":"ltr"},[e("div",{class:s(t.$style.modalHeader)},[e("h3",{class:s(t.$style.modalTitle)},o(r.value("userManagement.modals.user.resetPassword.title")),3),e("button",{class:s(t.$style.closeBtn),onClick:n[0]||(n[0]=A=>t.$emit("close"))},n[5]||(n[5]=[e("i",{class:"fas fa-times"},null,-1)]),2)],2),e("div",{class:s(t.$style.modalBody)},[e("div",{class:s(t.$style.userInfo)},[e("div",{class:s(t.$style.userDetails)},[e("i",{class:s(["fas fa-user",t.$style.userIcon])},null,2),e("div",null,[e("div",{class:s(t.$style.userName)},o((B=t.user)==null?void 0:B.full_name),3),e("div",{class:s(t.$style.userEmail)},o((b=t.user)==null?void 0:b.email),3)])],2)],2),e("form",{onSubmit:te(p,["prevent"])},[e("div",{class:s(t.$style.formGroup)},[e("label",{class:s(t.$style.label)},o(r.value("userManagement.forms.user.password")),3),e("div",{class:s(t.$style.passwordInputContainer)},[W(e("input",{"onUpdate:modelValue":n[1]||(n[1]=A=>w.value.password=A),type:$.value?"text":"password",required:"",class:s([t.$style.input,l.value.password?t.$style.inputError:""]),placeholder:r.value("userManagement.forms.user.passwordPlaceholder"),autocomplete:"new-password",autocapitalize:"off",autocorrect:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true",ref_key:"passwordInput",ref:T},null,10,mr),[[as,w.value.password]]),e("button",{type:"button",class:s(t.$style.passwordToggle),onClick:n[2]||(n[2]=A=>$.value=!$.value),title:$.value?r.value("userManagement.forms.user.hidePassword"):r.value("userManagement.forms.user.showPassword")},[e("i",{class:s($.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],10,pr)],2),l.value.password?(h(),C("div",{key:0,class:s(t.$style.errorMessage)},o(l.value.password),3)):j("",!0)],2)],32)],2),e("div",{class:s(t.$style.modalFooter)},[e("button",{type:"button",class:s([t.$style.btn,t.$style.cancelBtn]),onClick:n[3]||(n[3]=A=>t.$emit("close"))},o(r.value("userManagement.buttons.cancel")),3),e("button",{type:"button",class:s([t.$style.btn,t.$style.saveBtn,g.value?"":t.$style.saveBtn_disabled]),disabled:!g.value||t.loading,onClick:p},[t.loading?(h(),C("i",gr)):j("",!0),H(" "+o(t.loading?r.value("common.saving"):r.value("userManagement.buttons.resetPassword")),1)],10,vr)],2)],10,cr)],2)):j("",!0)}}}),fr="_modalOverlay_8sud8_3",br="_modal_8sud8_3",_r="_modalHeader_8sud8_55",$r="_modalTitle_8sud8_71",hr="_closeBtn_8sud8_85",wr="_modalBody_8sud8_117",kr="_userInfo_8sud8_129",Cr="_userDetails_8sud8_145",Br="_userIcon_8sud8_157",Mr="_userName_8sud8_181",Ur="_userEmail_8sud8_193",Tr="_formGroup_8sud8_203",Sr="_label_8sud8_211",Gr="_input_8sud8_225",Dr="_inputError_8sud8_259",Ir="_errorMessage_8sud8_269",Rr="_passwordInputContainer_8sud8_297",Pr="_passwordToggle_8sud8_315",Ar="_passwordHints_8sud8_375",jr="_hintTitle_8sud8_391",Lr="_hintList_8sud8_405",Er="_valid_8sud8_449",Fr="_invalid_8sud8_457",qr="_modalFooter_8sud8_465",Hr="_btn_8sud8_481",Nr="_cancelBtn_8sud8_507",Or="_saveBtn_8sud8_529",Vr="_saveBtn_disabled_8sud8_549",zr={modalOverlay:fr,modal:br,modalHeader:_r,modalTitle:$r,closeBtn:hr,modalBody:wr,userInfo:kr,userDetails:Cr,userIcon:Br,userName:Mr,userEmail:Ur,formGroup:Tr,label:Sr,input:Gr,inputError:Dr,errorMessage:Ir,passwordInputContainer:Rr,passwordToggle:Pr,passwordHints:Ar,hintTitle:jr,hintList:Lr,valid:Er,invalid:Fr,modalFooter:qr,btn:Hr,cancelBtn:Nr,saveBtn:Or,saveBtn_disabled:Vr},Wr={$style:zr},Qr=le(yr,[["__cssModules",Wr]]),Jr=["data-theme"],Kr=ae({__name:"UserManagement",setup(_){const y=ee(),u=Ns(),P=Os(),L=D(()=>y.currentTheme),d=D(()=>y.t),{loading:r,error:w,currentUser:l,selectedUsers:$,selectedGroups:T,dashboardStats:c,roles:g,groupsDropdown:S,userFilters:f,groupFilters:R,userSort:E,groupSort:m,usersPage:a,groupsPage:p,paginatedUsers:t,paginatedGroups:n,totalUsersPages:B,totalGroupsPages:b,isCurrentUserAdmin:A,toggleUserSelection:X,toggleGroupSelection:ne,selectAllUsersOnPage:oe,clearUserSelection:ie,clearGroupSelection:ke,goToUsersPage:Ce,goToGroupsPage:de,updateUserFilters:ce,updateGroupFilters:Be,updateUserSort:Me,updateGroupSort:Ue,initialize:Te,refreshData:qe,clearError:He,createNewGroup:Ve,updateExistingGroup:ze,deleteExistingGroup:We,inviteNewUser:Qe,createNewUser:Je,updateExistingUserRole:Ke,bulkAddUsersToExistingGroup:Xe}=u,me=U("users"),Se=U(!1),Ge=U(!1),De=U(!1),pe=U(null),ve=U(null),Ie=U({type:"create"}),be=U({type:"create"}),Re=U({type:"add_to_group",selected_users:[]}),_e=U(!1),$e=U(null),Pe=U(!1),Ae=U(null),je=U(!1),ue=U(null),i=U(!1),k=v=>{me.value=v},G=(v,M)=>{Ie.value={type:v,user:M},pe.value=M||null,Se.value=!0},q=()=>{Se.value=!1,pe.value=null},O=(v,M)=>{be.value={type:v,group:M},ve.value=M||null,Ge.value=!0},Ye=()=>{Ge.value=!1,ve.value=null},ws=v=>{Re.value={type:v,selected_users:$.value},De.value=!0},Ze=()=>{De.value=!1},ks=v=>{ue.value=v,je.value=!0},xe=()=>{je.value=!1,ue.value=null,i.value=!1},Cs=async v=>{var M,Q;if(ue.value)try{i.value=!0,await Ls(ue.value.id,v);const K=ue.value.email;xe(),await F.fire({title:d.value("userManagement.messages.resetPassword.success.title"),text:d.value("userManagement.messages.resetPassword.success.text").replace("{{email}}",K),icon:"success",confirmButtonText:d.value("userManagement.buttons.ok"),confirmButtonColor:"#28a745",customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}})}catch(K){console.error("API Error:",K),i.value=!1;let re=d.value("userManagement.messages.resetPassword.error.title"),V=d.value("userManagement.messages.resetPassword.error.text");if(K.response){const Le=K.response.status,Y=K.response.data;switch(Le){case 400:if((M=Y.errors)!=null&&M.new_password){const J=Y.errors.new_password[0]||V;J.includes("too common")?V=d.value("userManagement.validation.password.tooCommon"):J.includes("only numbers")?V=d.value("userManagement.validation.password.onlyNumbers"):J.includes("too similar")?V=d.value("userManagement.validation.password.tooSimilar"):J.includes("at least 8 characters")?V=d.value("userManagement.validation.password.minLength"):V=J}else(Q=Y.errors)!=null&&Q.user_id?V=Y.errors.user_id[0]||V:V=Y.detail||V;break;case 403:re=d.value("userManagement.messages.resetPassword.error.forbidden.title"),V=d.value("userManagement.messages.resetPassword.error.forbidden.text");break;case 404:V=d.value("userManagement.messages.resetPassword.error.userNotFound");break}}await F.fire({title:re,text:V,icon:"error",confirmButtonText:d.value("userManagement.buttons.ok"),confirmButtonColor:"#dc3545",customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}})}},Bs=async(v,M)=>{var Q,K,re,V;try{switch(v){case"view":G("view",M);break;case"edit":G("edit",M);break;case"delete":if((await F.fire({title:d.value("userManagement.messages.singleDelete.confirm.title"),text:d.value("userManagement.messages.singleDelete.confirm.text").replace("{{email}}",M.email),icon:"warning",showCancelButton:!0,confirmButtonText:d.value("userManagement.messages.singleDelete.confirm.confirmButtonText"),cancelButtonText:d.value("userManagement.messages.singleDelete.confirm.cancelButtonText"),confirmButtonColor:"#ff6b6b",cancelButtonColor:"#6c757d",reverseButtons:!0,customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}})).isConfirmed)try{const Y={user_ids:[M.id]},J=await Oe(Y);await qe(),J.summary.successful_deletions===1?await F.fire({title:d.value("userManagement.messages.singleDelete.results.success.title"),text:d.value("userManagement.messages.singleDelete.results.success.text").replace("{{email}}",M.email),icon:"success",confirmButtonText:d.value("userManagement.messages.singleDelete.results.success.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}}):await F.fire({title:d.value("userManagement.messages.singleDelete.results.error.title"),text:((Q=J.results.failed[0])==null?void 0:Q.error)||d.value("userManagement.messages.singleDelete.results.error.text"),icon:"error",confirmButtonText:d.value("userManagement.messages.singleDelete.results.error.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}})}catch(Y){let J=d.value("userManagement.messages.singleDelete.results.error.title"),ge=d.value("userManagement.messages.singleDelete.results.error.text");if(Y.response){const Ps=Y.response.status,Ee=Y.response.data;switch(Ps){case 400:(K=Ee.message)!=null&&K.includes("cannot delete yourself")||(re=Ee.message)!=null&&re.includes("self")?(J=d.value("userManagement.messages.bulkDelete.results.badRequest.texts.cannotDeleteCurrentUser"),ge=d.value("userManagement.messages.bulkDelete.results.badRequest.texts.cannotDeleteCurrentUserDesc")):(V=Ee.message)!=null&&V.includes("last super admin")?(J=d.value("userManagement.messages.bulkDelete.results.badRequest.texts.cannotDeleteLastSuperAdmin"),ge=d.value("userManagement.messages.bulkDelete.results.badRequest.texts.cannotDeleteLastSuperAdminDesc")):ge=Ee.message||ge;break;case 403:J=d.value("userManagement.messages.bulkDelete.results.forbidden.title"),ge=d.value("userManagement.messages.bulkDelete.results.forbidden.text");break}}await F.fire({title:J,text:ge,icon:"error",confirmButtonText:d.value("userManagement.messages.singleDelete.results.error.confirmButtonText"),customClass:{popup:"swal-rtl-popup",title:"swal-rtl-title",htmlContainer:"swal-rtl-content"}})}break;case"change_role":Is(M);break;case"reset_password":await ks(M);break;case"view_groups":break}}catch(Le){await F.fire({title:"خطأ في عملية المستخدم",text:Le.message||"فشل في تنفيذ العملية المطلوبة",icon:"error",confirmButtonText:"موافق",confirmButtonColor:"#dc3545"})}},Ms=async(v,M)=>{try{switch(v){case"view":O("view",M);break;case"edit":O("edit",M);break;case"delete":(await F.fire({title:"تأكيد حذف المجموعة",text:"هل أنت متأكد من حذف هذه المجموعة؟ لا يمكن التراجع عن هذا الإجراء.",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، احذف",cancelButtonText:"إلغاء",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"})).isConfirmed&&(await We(M.id),await F.fire({title:"تم الحذف",text:"تم حذف المجموعة بنجاح",icon:"success",confirmButtonText:"موافق",confirmButtonColor:"#28a745"}));break;case"add_users":es(M);break;case"view_members":O("view",M);break}}catch(Q){await F.fire({title:"خطأ في عملية المجموعة",text:Q.message||"فشل في تنفيذ العملية المطلوبة",icon:"error",confirmButtonText:"موافق",confirmButtonColor:"#dc3545"})}},Us=async v=>{$.value.length!==0&&(v==="bulk_delete"?await P.executeBulkDelete($.value,l.value)&&(await qe(),ie()):ws(v))},Ts=async v=>{try{switch(Ie.value.type){case"create":await Je(v);break;case"edit":pe.value&&await Ke(pe.value.id,v);break;case"invite":await Qe(v);break}q(),await F.fire({title:"تم بنجاح",text:"تمت عملية المستخدم بنجاح",icon:"success",confirmButtonText:"موافق",confirmButtonColor:"#28a745"})}catch(M){await F.fire({title:"خطأ في حفظ المستخدم",text:M.message||"فشل في حفظ بيانات المستخدم",icon:"error",confirmButtonText:"موافق",confirmButtonColor:"#dc3545"})}},Ss=async v=>{try{let M=null;switch(be.value.type){case"create":M=(await Ve(v)).group;break;case"edit":ve.value&&await ze(ve.value.id,v);break}Ye(),M&&be.value.type==="create"&&setTimeout(()=>{es(M)},300),await F.fire({title:"تم بنجاح",text:"تمت عملية المجموعة بنجاح",icon:"success",confirmButtonText:"موافق",confirmButtonColor:"#28a745"})}catch(M){await F.fire({title:"خطأ في حفظ المجموعة",text:M.message||"فشل في حفظ بيانات المجموعة",icon:"error",confirmButtonText:"موافق",confirmButtonColor:"#dc3545"})}},Gs=async v=>{try{switch(Re.value.type){case"add_to_group":await Xe(v);break;case"remove_from_group":break;case"change_role":break}Ze(),ie(),await F.fire({title:"تم بنجاح",text:"تمت العملية المجمعة بنجاح",icon:"success",confirmButtonText:"موافق",confirmButtonColor:"#28a745"})}catch(M){await F.fire({title:"خطأ في العملية المجمعة",text:M.message||"فشل في تنفيذ العملية المجمعة",icon:"error",confirmButtonText:"موافق",confirmButtonColor:"#dc3545"})}},es=async v=>{try{const M=new Promise((re,V)=>{setTimeout(()=>V(new Error("TIMEOUT")),15e3)}),K=(await Promise.race([fe.getGroupsWithDetails(),M])).groups.find(re=>re.id===v.id);if(!K)return;$e.value=K,_e.value=!0}catch(M){M.message==="TIMEOUT"?await F.fire({title:"انتهت مهلة الطلب",text:"فشل في تحميل بيانات المجموعة خلال 15 ثانية. يرجى المحاولة مرة أخرى.",icon:"error",confirmButtonText:"موافق",confirmButtonColor:"#dc3545"}):await F.fire({title:"خطأ في تحميل البيانات",text:"فشل في تحميل بيانات المجموعة. سيتم استخدام البيانات الأساسية.",icon:"warning",confirmButtonText:"موافق",confirmButtonColor:"#ffc107"}),$e.value=v,_e.value=!0}},ss=()=>{_e.value=!1,$e.value=null},Ds=async()=>{await Te(),ss()},Is=v=>{Ae.value=v,Pe.value=!0},ts=()=>{Pe.value=!1,Ae.value=null},Rs=async()=>{await Te(),ts()};return ls(()=>{Te()}),(v,M)=>(h(),C("div",{class:s(v.$style.userManagement),"data-theme":L.value},[e("header",{class:s(v.$style.header)},[e("div",{class:s(v.$style.headerContent)},[I(A)?(h(),C("div",{key:0,class:s(v.$style.headerActions)},[e("button",{class:s([v.$style.actionBtn,v.$style.primaryBtn]),onClick:M[0]||(M[0]=Q=>O("create"))},[M[5]||(M[5]=e("i",{class:"fas fa-users"},null,-1)),H(" "+o(d.value("userManagement.groups.addGroup")),1)],2),e("button",{class:s([v.$style.actionBtn,v.$style.primaryBtn]),onClick:M[1]||(M[1]=Q=>G("create"))},[M[6]||(M[6]=e("i",{class:"fas fa-user-plus"},null,-1)),H(" "+o(d.value("userManagement.users.addUser")),1)],2)],2)):j("",!0),e("div",{class:s(v.$style.headerInfo)},[e("h1",{class:s(v.$style.title)},o(d.value("userManagement.title")),3)],2)],2)],2),I(c)?(h(),C("section",{key:0,class:s(v.$style.statsSection)},[e("div",{class:s(v.$style.statsGrid)},[e("div",{class:s([v.$style.statCard,v.$style.totalUsers])},[e("div",{class:s(v.$style.statContent)},[e("div",{class:s(v.$style.statLabel)},o(d.value("userManagement.dashboard.totalUsers")),3),e("div",{class:s(v.$style.statNumber)},[H(o(I(c).total_users)+" ",1),e("span",{class:s(v.$style.statspan)},"مستخدم",2)],2)],2)],2),e("div",{class:s([v.$style.statCard,v.$style.activeUsers])},[e("div",{class:s(v.$style.statContent)},[e("div",{class:s(v.$style.statLabel)},o(d.value("userManagement.dashboard.activeUsers")),3),e("div",{class:s(v.$style.statNumber)},[H(o(I(c).active_users)+" ",1),e("span",{class:s(v.$style.statspan)},"مستخدم نشط",2)],2)],2)],2),e("div",{class:s([v.$style.statCard,v.$style.totalGroups])},[e("div",{class:s(v.$style.statContent)},[e("div",{class:s(v.$style.statLabel)},o(d.value("userManagement.dashboard.totalGroups")),3),e("div",{class:s(v.$style.statNumber)},[H(o(I(c).total_groups)+" ",1),e("span",{class:s(v.$style.statspan)},"مجموعة",2)],2)],2)],2),e("div",{class:s([v.$style.statCard,v.$style.admins])},[e("div",{class:s(v.$style.statContent)},[e("div",{class:s(v.$style.statLabel)},o(d.value("userManagement.dashboard.admins")),3),e("div",{class:s(v.$style.statNumber)},[H(o(I(c).admins)+" ",1),e("span",{class:s(v.$style.statspan)},"مدير",2)],2)],2)],2)],2)],2)):j("",!0),e("div",{class:s(v.$style.tabsHeader)},[e("button",{class:s([v.$style.tabBtn,me.value==="users"?v.$style.tabBtnActive:""]),onClick:M[2]||(M[2]=Q=>k("users"))},o(d.value("userManagement.users.title")),3),e("button",{class:s([v.$style.tabBtn,me.value==="groups"?v.$style.tabBtnActive:""]),onClick:M[3]||(M[3]=Q=>k("groups"))},o(d.value("userManagement.groups.title")),3)],2),e("main",{class:s(v.$style.mainContent)},[e("div",{class:s(v.$style.tabsContainer)},[e("div",{class:s(v.$style.tabContent)},[me.value==="users"?(h(),C("div",{key:0,class:s(v.$style.tabPane)},[he(ua,{users:I(t),loading:I(r),"selected-users":I($),"current-user":I(l),"total-pages":I(B),"current-page":I(a),filters:I(f),sort:I(E),roles:I(g),onUserSelected:I(X),onSelectAll:I(oe),onClearSelection:I(ie),onPageChanged:I(Ce),onFiltersChanged:I(ce),onSortChanged:I(Me),onUserAction:Bs,onBulkAction:Us},null,8,["users","loading","selected-users","current-user","total-pages","current-page","filters","sort","roles","onUserSelected","onSelectAll","onClearSelection","onPageChanged","onFiltersChanged","onSortChanged"])],2)):j("",!0),me.value==="groups"?(h(),C("div",{key:1,class:s(v.$style.tabPane)},[he(qa,{groups:I(n),loading:I(r),"selected-groups":I(T),"current-user":I(l),"total-pages":I(b),"current-page":I(p),filters:I(R),sort:I(m),onGroupSelected:I(ne),onClearSelection:I(ke),onPageChanged:I(de),onFiltersChanged:I(Be),onSortChanged:I(Ue),onGroupAction:Ms},null,8,["groups","loading","selected-groups","current-user","total-pages","current-page","filters","sort","onGroupSelected","onClearSelection","onPageChanged","onFiltersChanged","onSortChanged"])],2)):j("",!0)],2)],2)],2),Se.value?(h(),Ne(kl,{key:1,mode:Ie.value,user:pe.value,roles:I(g),groups:I(S),onSave:Ts,onClose:q},null,8,["mode","user","roles","groups"])):j("",!0),Ge.value?(h(),Ne(yn,{key:2,mode:be.value,group:ve.value,onSave:Ss,onClose:Ye},null,8,["mode","group"])):j("",!0),De.value?(h(),Ne(Vn,{key:3,mode:Re.value,"selected-users":I($),groups:I(S),roles:I(g),onSave:Gs,onClose:Ze},null,8,["mode","selected-users","groups","roles"])):j("",!0),he(Io,{visible:_e.value,group:$e.value,onSuccess:Ds,onClose:ss},null,8,["visible","group"]),he(dr,{visible:Pe.value,user:Ae.value,onSuccess:Rs,onClose:ts},null,8,["visible","user"]),he(Qr,{visible:je.value,user:ue.value,loading:i.value,onSave:Cs,onClose:xe},null,8,["visible","user","loading"]),I(w)?(h(),C("div",{key:4,class:s(v.$style.errorMessage)},[e("div",{class:s(v.$style.errorContent)},[M[8]||(M[8]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),e("span",null,o(I(w)),1),e("button",{onClick:M[4]||(M[4]=(...Q)=>I(He)&&I(He)(...Q)),class:s(v.$style.errorClose)},M[7]||(M[7]=[e("i",{class:"fas fa-times"},null,-1)]),2)],2)],2)):j("",!0)],10,Jr))}}),Xr="_userManagement_inifw_185",Yr="_header_inifw_203",Zr="_headerContent_inifw_213",xr="_headerInfo_inifw_229",eu="_breadcrumbWrapper_inifw_239",su="_breadcrumb_inifw_239",tu="_title_inifw_269",au="_subtitle_inifw_285",lu="_headerActions_inifw_299",nu="_actionBtn_inifw_311",ou="_primaryBtn_inifw_369",ru="_refreshBtn_inifw_391",uu="_spinning_inifw_483",iu="_spin_inifw_483",du="_statsSection_inifw_503",cu="_statsGrid_inifw_511",mu="_statCard_inifw_523",pu="_statContent_inifw_571",vu="_statNumber_inifw_585",gu="_statspan_inifw_607",yu="_statLabel_inifw_617",fu="_mainContent_inifw_637",bu="_tabsHeader_inifw_663",_u="_tabBtn_inifw_687",$u="_tabBtnActive_inifw_725",hu="_tabContent_inifw_749",wu="_tabPane_inifw_757",ku="_loadingOverlay_inifw_791",Cu="_loadingSpinner_inifw_821",Bu="_errorMessage_inifw_867",Mu="_errorContent_inifw_883",Uu="_slideInRight_inifw_1",Tu="_errorClose_inifw_921",Su="_statIcon_inifw_1103",Gu={userManagement:Xr,header:Yr,headerContent:Zr,headerInfo:xr,breadcrumbWrapper:eu,breadcrumb:su,title:tu,subtitle:au,headerActions:lu,actionBtn:nu,primaryBtn:ou,refreshBtn:ru,spinning:uu,spin:iu,statsSection:du,statsGrid:cu,statCard:mu,statContent:pu,statNumber:vu,statspan:gu,statLabel:yu,mainContent:fu,tabsHeader:bu,tabBtn:_u,tabBtnActive:$u,tabContent:hu,tabPane:wu,loadingOverlay:ku,loadingSpinner:Cu,errorMessage:Bu,errorContent:Mu,slideInRight:Uu,errorClose:Tu,statIcon:Su},Du={$style:Gu},Ru=le(Kr,[["__cssModules",Du]]);export{Ru as default};
