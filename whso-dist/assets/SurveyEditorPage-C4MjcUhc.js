import{d as $e,y as he,c as U,r as T,w as ue,h as ze,g as qe,a as d,b as t,i as g,B as pe,n as a,t as o,G as ge,F as q,s as I,v as Z,e as P,J as me,D as W,p as b,q as ie,T as Ce,m as ke,u as we,S as v,o as u,_ as Je,k as Ze,l as We}from"./index-uWeSuK_C.js";import{s as F}from"./surveyService-BDce2LuR.js";import{C as Se,t as re}from"./templateService-BrStWVpN.js";const Xe=["data-theme","dir"],xe=["title"],et=["title"],tt=["title"],st=["disabled"],at=["disabled"],lt=["disabled"],nt=["placeholder"],ot=["placeholder"],it=["onDragover","onDrop"],rt=["onDragstart"],ut=["onUpdate:modelValue","placeholder","onFocus"],pt=["onUpdate:modelValue","onChange"],dt={value:"text"},ct={value:"textarea"},vt={value:"single_choice"},yt={value:"multiple_choice"},ft={value:"rating"},_t={value:"yes_no"},gt=["onUpdate:modelValue"],mt={value:"none"},Ct={value:"email"},kt={value:"phone"},wt={value:"number"},St={value:"url"},$t=["onUpdate:modelValue","placeholder","onInput"],ht=["onClick"],qt=["onClick"],Tt=["onUpdate:modelValue"],Dt=["onUpdate:modelValue"],Bt=["onClick","title"],bt=["onClick","title"],It=["onClick","title"],Ot=["value","onChange"],Nt={value:2},Ht={value:1},At={value:0},Pt=["value","onChange"],Mt={value:2},Lt={value:1},Qt={value:0},Vt=["onClick","title"],Et=["onClick","title"],Rt=["onUpdate:modelValue"],Ut={key:0},Ft=["data-theme","dir"],Gt=["data-theme","dir"],jt=$e({__name:"SurveyEditor",props:{template:{default:null},mode:{default:"create"},surveyId:{default:void 0},isCreatingPredefinedTemplate:{type:Boolean,default:!1}},emits:["back","publish","saveDraft","saveTemplate"],setup(de,{emit:N}){const _=de,h=N,D=he(),M=U(()=>D.currentTheme),l=U(()=>D.currentLanguage==="ar"),X=U(()=>!_.template),p=T({title:"",description:"",questions:[]}),L=T({}),C=T(null),f=T(!1),c=T(null),y=T(null),B=T(!1),S=T(!1),k=T({start_date:null,end_date:null}),$=T({is_active:!0}),G=U(()=>{if(p.value.title.trim().length===0||p.value.questions.length===0||!p.value.questions.every(e=>e.text.trim().length>0))return!1;for(const e of p.value.questions)if(e.question_type==="single_choice"&&e.CSAT_Calculate&&(!e.options_satisfaction_values||!e.options||e.options_satisfaction_values.length!==e.options.length||e.options_satisfaction_values.some(s=>s==null))||e.question_type==="yes_no"&&e.CSAT_Calculate&&(!e.options_satisfaction_values||e.options_satisfaction_values.length<2||e.options_satisfaction_values[0]===void 0||e.options_satisfaction_values[1]===void 0))return!1;return!0}),ce=U(()=>({enableTime:!0,time_24hr:!0,altInput:!0,altFormat:"Y-m-d H:i",dateFormat:"Y-m-d\\TH:i:S",allowInput:!0,minuteIncrement:1})),j=U(()=>{const e=new Date,s=k.value.start_date?new Date(k.value.start_date):null,n=k.value.end_date?new Date(k.value.end_date):null;if(!s&&!n)return{status:"active",icon:"fas fa-play-circle",title:l.value?"ÙŠØ¨Ø¯Ø£ ÙÙˆØ±Ù‹Ø§ ÙˆÙŠØ³ØªÙ…Ø± Ø¥Ù„Ù‰ Ø£Ø¬Ù„ ØºÙŠØ± Ù…Ø³Ù…Ù‰":"Starts immediately, runs indefinitely",description:l.value?"Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø³ÙŠÙƒÙˆÙ† Ù†Ø´Ø·Ù‹Ø§ ÙÙˆØ± Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ„Ù† ÙŠÙ†ØªÙ‡ÙŠ Ø­ØªÙ‰ ÙŠØªÙ… Ø¥ÙŠÙ‚Ø§ÙÙ‡ ÙŠØ¯ÙˆÙŠØ§Ù‹":"Survey will be active immediately after creation and won't expire until manually deactivated"};if(s&&!n){const i=s>e;return{status:i?"scheduled":"active",icon:i?"fas fa-clock":"fas fa-play-circle",title:l.value?i?`Ù…Ø¬Ø¯ÙˆÙ„ Ù„Ù„Ø¨Ø¯Ø¡ ${s.toLocaleDateString("ar",{calendar:"gregory"})}`:"ÙŠØ¨Ø¯Ø£ ÙÙˆØ±Ù‹Ø§ ÙˆÙŠØ³ØªÙ…Ø± Ø¥Ù„Ù‰ Ø£Ø¬Ù„ ØºÙŠØ± Ù…Ø³Ù…Ù‰":i?`Scheduled to start ${s.toLocaleDateString()}`:"Starts immediately, runs indefinitely",description:l.value?i?"Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø³ÙŠØ¨Ø¯Ø£ ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙˆÙŠØ³ØªÙ…Ø± Ø­ØªÙ‰ ÙŠØªÙ… Ø¥ÙŠÙ‚Ø§ÙÙ‡ ÙŠØ¯ÙˆÙŠØ§Ù‹":"Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ù†Ø´Ø· Ø­Ø§Ù„ÙŠØ§Ù‹ ÙˆÙŠØ³ØªÙ…Ø± Ø­ØªÙ‰ ÙŠØªÙ… Ø¥ÙŠÙ‚Ø§ÙÙ‡ ÙŠØ¯ÙˆÙŠØ§Ù‹":i?"Survey will start on the specified date and run indefinitely until manually deactivated":"Survey is active now and will run indefinitely until manually deactivated"}}if(!s&&n){const i=n<e;return{status:i?"expired":"active",icon:i?"fas fa-stop-circle":"fas fa-play-circle",title:l.value?i?"Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©":`ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù†ØŒ ÙŠÙ†ØªÙ‡ÙŠ ${n.toLocaleDateString("ar",{calendar:"gregory"})}`:i?"Expired":`Starts now, expires ${n.toLocaleDateString()}`,description:l.value?i?"Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ù†Ø´Ø· Ø­Ø§Ù„ÙŠØ§Ù‹ ÙˆØ³ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø¯Ø¯":i?"Survey has expired":"Survey is active now and will expire on the specified date"}}if(s&&n){const i=s>e,r=n<e,m=s<=e&&n>e;let w,H,A,K;return r?(w="expired",H="fas fa-stop-circle",A=l.value?"Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©":"Expired",K=l.value?"Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Survey has expired"):i?(w="scheduled",H="fas fa-clock",A=l.value?`Ù…Ø¬Ø¯ÙˆÙ„ Ù…Ù† ${s.toLocaleDateString("ar",{calendar:"gregory"})} Ø¥Ù„Ù‰ ${n.toLocaleDateString("ar",{calendar:"gregory"})}`:`Scheduled from ${s.toLocaleDateString()} to ${n.toLocaleDateString()}`,K=l.value?"Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø³ÙŠØ¹Ù…Ù„ Ø®Ù„Ø§Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©":"Survey will run within the specified time window"):m?(w="active",H="fas fa-play-circle",A=l.value?`Ù†Ø´Ø· Ø­ØªÙ‰ ${n.toLocaleDateString("ar",{calendar:"gregory"})}`:`Active until ${n.toLocaleDateString()}`,K=l.value?"Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ù†Ø´Ø· Ø­Ø§Ù„ÙŠØ§Ù‹ ÙˆØ³ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø¯Ø¯":"Survey is currently active and will expire on the specified date"):(w="inactive",H="fas fa-pause-circle",A=l.value?"ØºÙŠØ± Ù†Ø´Ø·":"Inactive",K=l.value?"Ø­Ø§Ù„Ø© ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹Ø©":"Unexpected state"),{status:w,icon:H,title:A,description:K}}return null});ue([f,B,S],([e,s,n])=>{e||s||n?document.body.style.overflow="hidden":document.body.style.overflow=""}),ze(()=>{document.body.style.overflow=""});const ve=()=>{console.log("ğŸ”§ Initializing Survey Editor with template:",_.template),_.template?"questions"in _.template&&Array.isArray(_.template.questions)&&(console.log("âœ… Loading survey data from template"),p.value={title:_.template.name||_.template.title||"",description:_.template.description||"",questions:_.template.questions.map((e,s)=>{let n=[];if(e.options)if(typeof e.options=="string")try{n=JSON.parse(e.options)}catch{n=[]}else Array.isArray(e.options)&&(n=e.options);let i=[];if(e.options_satisfaction_values)if(typeof e.options_satisfaction_values=="string")try{i=JSON.parse(e.options_satisfaction_values)}catch{i=[]}else Array.isArray(e.options_satisfaction_values)&&(i=e.options_satisfaction_values);return{tempId:`temp-${Date.now()}-${s}`,text:e.text||"",question_type:e.question_type,options:n,is_required:e.is_required!==void 0?e.is_required:!1,order:e.order!==void 0?e.order:s+1,NPS_Calculate:e.NPS_Calculate||!1,CSAT_Calculate:e.CSAT_Calculate||!1,min_scale:e.min_scale!==void 0&&e.min_scale!==null?e.min_scale:0,max_scale:e.max_scale!==void 0&&e.max_scale!==null?e.max_scale:5,semantic_tag:e.semantic_tag||"none",options_satisfaction_values:i,validation_type:e.validation_type||"none"}})},console.log("ğŸ“ Initialized surveyData:",p.value),k.value={start_date:_.template.start_date||null,end_date:_.template.end_date||null},console.log("ğŸ“… Scheduling settings:",k.value),$.value={is_active:_.template.is_active!==void 0?_.template.is_active:!0},console.log("âš™ï¸ Survey settings:",$.value)):(console.log("â• No template provided, adding default question"),_e())},Y=()=>{p.value.title.trim()?delete L.value.title:L.value.title=l.value?"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ø·Ù„ÙˆØ¨":"Title is required"},x=e=>{C.value=e},Q=e=>["single_choice","multiple_choice"].includes(e),O=e=>(e.options||(e.options=[l.value?"Ø®ÙŠØ§Ø± 1":"Option 1"]),e.options),Te=(e,s)=>{e.options=s},De=e=>{const s=O(e),n=s.length+1;s.push(l.value?`Ø®ÙŠØ§Ø± ${n}`:`Option ${n}`),e.options_satisfaction_values||(e.options_satisfaction_values=[]),e.options_satisfaction_values.push(null)},Be=(e,s)=>{const n=O(e);n.length>1&&(n.splice(s,1),e.options_satisfaction_values&&e.options_satisfaction_values.length>s&&e.options_satisfaction_values.splice(s,1))},be=e=>e==="multiple_choice"?"far fa-square":"far fa-circle",ee=e=>e==="rating",te=e=>["single_choice","rating","yes_no"].includes(e),Ie=e=>{var s,n;if(ee(e.question_type)||(e.NPS_Calculate=!1,e.min_scale=null,e.max_scale=null),te(e.question_type)||(e.CSAT_Calculate=!1,e.options_satisfaction_values=[]),e.question_type==="single_choice"&&e.CSAT_Calculate&&(!e.options_satisfaction_values||e.options_satisfaction_values.length!==(((s=e.options)==null?void 0:s.length)||0))){const i=((n=e.options)==null?void 0:n.length)||0;e.options_satisfaction_values=Array.from({length:i},()=>null)}},se=(e,s)=>{var n;if(!e.options_satisfaction_values){const i=((n=e.options)==null?void 0:n.length)||0;e.options_satisfaction_values=Array.from({length:i},()=>null)}return e.options_satisfaction_values[s]??null},ae=(e,s,n)=>{var i;if(!e.options_satisfaction_values){const r=((i=e.options)==null?void 0:i.length)||0;e.options_satisfaction_values=Array.from({length:r},()=>null)}e.options_satisfaction_values[s]=n},ye=(e,s)=>{(!e.options_satisfaction_values||e.options_satisfaction_values.length<2)&&(e.options_satisfaction_values=[2,0]);const n=s==="yes"?0:1;return e.options_satisfaction_values[n]??(s==="yes"?2:0)},fe=(e,s,n)=>{(!e.options_satisfaction_values||e.options_satisfaction_values.length<2)&&(e.options_satisfaction_values=[2,0]);const i=s==="yes"?0:1;e.options_satisfaction_values[i]=n},_e=()=>{const e={tempId:`temp-${Date.now()}`,text:"",question_type:"text",options:[],is_required:!1,order:p.value.questions.length+1,NPS_Calculate:!1,CSAT_Calculate:!1,min_scale:0,max_scale:5,semantic_tag:"none",options_satisfaction_values:[],validation_type:"none"};p.value.questions.push(e),setTimeout(()=>{x(p.value.questions.length-1)},100)},Oe=e=>{const n={...p.value.questions[e],tempId:`temp-${Date.now()}`,order:e+2};p.value.questions.splice(e+1,0,n),V()},Ne=async e=>{if(p.value.questions.length===1){v.fire({icon:"warning",title:l.value?"ØªØ­Ø°ÙŠØ±":"Warning",text:l.value?"ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„":"Survey must have at least one question",confirmButtonText:l.value?"Ù…ÙˆØ§ÙÙ‚":"OK"});return}(await v.fire({icon:"warning",title:l.value?"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù":"Confirm Delete",text:l.value?"Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„ØŸ":"Do you want to delete this question?",showCancelButton:!0,confirmButtonText:l.value?"Ø­Ø°Ù":"Delete",cancelButtonText:l.value?"Ø¥Ù„ØºØ§Ø¡":"Cancel",confirmButtonColor:"#d33"})).isConfirmed&&(p.value.questions.splice(e,1),V())},V=()=>{p.value.questions.forEach((e,s)=>{e.order=s+1})},E=(e,s)=>{s.dataTransfer&&(s.dataTransfer.effectAllowed="copy",s.dataTransfer.setData("application/json",JSON.stringify({type:"palette",questionType:e})))},R=e=>{const s={tempId:`temp-${Date.now()}`,text:"",question_type:e,options:Q(e)?[l.value?"Ø®ÙŠØ§Ø± 1":"Option 1"]:[],is_required:!1,order:p.value.questions.length+1,NPS_Calculate:!1,CSAT_Calculate:!1,min_scale:0,max_scale:5,semantic_tag:"none",options_satisfaction_values:[],validation_type:"none"};p.value.questions.push(s),V(),setTimeout(()=>{x(p.value.questions.length-1)},100)},He=(e,s)=>{c.value=e,s.dataTransfer&&(s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("application/json",JSON.stringify({type:"reorder",index:e})),s.target instanceof HTMLElement&&(s.target.style.opacity="0.5"))},Ae=e=>{c.value=null,y.value=null,e.target instanceof HTMLElement&&(e.target.style.opacity="1")},Pe=(e,s)=>{s.preventDefault(),s.stopPropagation(),s.dataTransfer&&s.dataTransfer.types.includes("application/json")&&(s.dataTransfer.dropEffect="move"),y.value=e},Me=()=>{y.value=null},Le=e=>{e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},Qe=e=>{var s;e.preventDefault();try{const n=(s=e.dataTransfer)==null?void 0:s.getData("application/json");if(n){const i=JSON.parse(n);if(i.type==="palette"&&i.questionType){const r={tempId:`temp-${Date.now()}`,text:"",question_type:i.questionType,options:Q(i.questionType)?[l.value?"Ø®ÙŠØ§Ø± 1":"Option 1"]:[],is_required:!1,order:p.value.questions.length+1,NPS_Calculate:!1,CSAT_Calculate:!1,min_scale:0,max_scale:5,semantic_tag:"none",options_satisfaction_values:[],validation_type:"none"};p.value.questions.push(r),V()}}}catch(n){console.error("Error handling drop:",n)}},Ve=(e,s)=>{var n;s.preventDefault(),s.stopPropagation(),y.value=null;try{const i=(n=s.dataTransfer)==null?void 0:n.getData("application/json");if(!i)return;const r=JSON.parse(i);if(r.type==="palette"&&r.questionType){const m={tempId:`temp-${Date.now()}`,text:"",question_type:r.questionType,options:Q(r.questionType)?[l.value?"Ø®ÙŠØ§Ø± 1":"Option 1"]:[],is_required:!1,order:e+1,NPS_Calculate:!1,CSAT_Calculate:!1,min_scale:0,max_scale:5,semantic_tag:"none",options_satisfaction_values:[],validation_type:"none"};p.value.questions.splice(e,0,m),V();return}if(r.type==="reorder"&&r.index!==void 0){const m=r.index;if(m===e)return;const w=[...p.value.questions],[H]=w.splice(m,1),A=m<e?e-1:e;w.splice(A,0,H),p.value.questions=w,V()}}catch(i){console.error("Error handling question drop:",i)}finally{c.value=null}},le=()=>{f.value=!f.value},Ee=()=>{B.value=!0},z=()=>{B.value=!1},Re=()=>{z(),v.fire({icon:"success",title:l.value?"ØªÙ… Ø§Ù„Ø­ÙØ¸":"Saved",text:l.value?"ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© Ø¨Ù†Ø¬Ø§Ø­":"Scheduling settings saved successfully",timer:1500,showConfirmButton:!1})},Ue=()=>{S.value=!0},J=()=>{S.value=!1},Fe=()=>{J(),v.fire({icon:"success",title:l.value?"ØªÙ… Ø§Ù„Ø­ÙØ¸":"Saved",text:l.value?"ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø¨Ù†Ø¬Ø§Ø­":"Survey settings saved successfully",timer:1500,showConfirmButton:!1})},Ge=async()=>{(await v.fire({icon:"warning",title:l.value?"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬":"Confirm Exit",text:l.value?"Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ Ù„Ù† ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.":"Do you want to exit? Changes will not be saved.",showCancelButton:!0,confirmButtonText:l.value?"Ù†Ø¹Ù…ØŒ Ø§Ø®Ø±Ø¬":"Yes, Exit",cancelButtonText:l.value?"Ø¥Ù„ØºØ§Ø¡":"Cancel",confirmButtonColor:"#d33"})).isConfirmed&&h("back")},ne=()=>({title:p.value.title,description:p.value.description,visibility:"AUTH",is_active:$.value.is_active,start_date:k.value.start_date,end_date:k.value.end_date,questions:p.value.questions.map(e=>({text:e.text,question_type:e.question_type,options:Q(e.question_type)?JSON.stringify(e.options):void 0,is_required:e.is_required,order:e.order,NPS_Calculate:e.NPS_Calculate||!1,CSAT_Calculate:e.CSAT_Calculate||!1,min_scale:e.min_scale!==void 0?e.min_scale:0,max_scale:e.max_scale!==void 0?e.max_scale:5,options_satisfaction_values:e.options_satisfaction_values&&e.options_satisfaction_values.length>0?JSON.stringify(e.options_satisfaction_values):void 0,validation_type:e.validation_type||"none"}))}),oe=()=>{if(p.value.title.trim().length===0)return l.value?"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ù…Ø·Ù„ÙˆØ¨":"Survey title is required";if(p.value.questions.length===0)return l.value?"ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„":"At least one question is required";for(let e=0;e<p.value.questions.length;e++)if(p.value.questions[e].text.trim().length===0)return l.value?`Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… ${e+1} ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù†Øµ`:`Question ${e+1} needs text`;for(let e=0;e<p.value.questions.length;e++){const s=p.value.questions[e],n=e+1;if(s.question_type==="single_choice"&&s.CSAT_Calculate&&(!s.options_satisfaction_values||!s.options||s.options_satisfaction_values.length!==s.options.length||s.options_satisfaction_values.some(i=>i==null)))return l.value?`Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… ${n}: ÙŠØ±Ø¬Ù‰ ØªØ¹ÙŠÙŠÙ† Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø¶Ø§ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª`:`Question ${n}: Please map satisfaction levels for all options`;if(s.question_type==="yes_no"&&s.CSAT_Calculate&&(!s.options_satisfaction_values||s.options_satisfaction_values.length<2||s.options_satisfaction_values[0]===void 0||s.options_satisfaction_values[1]===void 0))return l.value?`Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… ${n}: ÙŠØ±Ø¬Ù‰ ØªØ¹ÙŠÙŠÙ† Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø¶Ø§ Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù†Ø¹Ù…/Ù„Ø§`:`Question ${n}: Please map satisfaction levels for Yes/No answers`}return null},je=()=>{Y();const e=oe();if(e){v.fire({icon:"error",title:l.value?"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚":"Validation Error",text:e,confirmButtonText:l.value?"Ù…ÙˆØ§ÙÙ‚":"OK"});return}const s=ne();h("saveDraft",s)},Ke=()=>{Y();const e=oe();if(e){v.fire({icon:"error",title:l.value?"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚":"Validation Error",text:e,confirmButtonText:l.value?"Ù…ÙˆØ§ÙÙ‚":"OK"});return}const s=ne();h("publish",s)},Ye=()=>{Y();const e=oe();if(e){v.fire({icon:"error",title:l.value?"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚":"Validation Error",text:e,confirmButtonText:l.value?"Ù…ÙˆØ§ÙÙ‚":"OK"});return}const s=ne();h("saveTemplate",s)};return qe(()=>{console.log("ğŸ¬ SurveyEditor mounted"),console.log("ğŸ“¦ Initial props.template:",_.template),ve(),console.log("âœ… After initialization, surveyData:",p.value)}),ue(()=>_.template,(e,s)=>{console.log("ğŸ‘€ Template prop changed!"),console.log("   Old:",s),console.log("   New:",e),e&&(console.log("ğŸ”„ Re-initializing survey with new template data"),ve(),console.log("âœ… After re-initialization, surveyData:",p.value))},{immediate:!1,deep:!0}),(e,s)=>(u(),d("div",{class:a(e.$style.editorContainer),"data-theme":M.value,dir:l.value?"rtl":"ltr"},[t("div",{class:a(e.$style.editorHeader)},[t("div",{class:a(e.$style.headerContent)},[t("button",{class:a(e.$style.backButton),onClick:Ge},[s[22]||(s[22]=t("i",{class:"fas fa-arrow-right"},null,-1)),t("span",null,o(l.value?"Ø±Ø¬ÙˆØ¹":"Back"),1)],2),t("div",{class:a(e.$style.headerTitle)},[s[23]||(s[23]=t("i",{class:"fas fa-poll-h"},null,-1)),t("span",null,o(l.value?"ØªØµÙ…ÙŠÙ… Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Survey Builder"),1)],2),t("div",{class:a(e.$style.headerActions)},[t("button",{class:a([e.$style.headerButton,e.$style.iconButton]),onClick:Ee,title:l.value?"ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¯Ø©":"Scheduling Settings"},[s[24]||(s[24]=ge('<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.5 9C1.5 6.17157 1.5 4.75736 2.37868 3.87868C3.25736 3 4.67157 3 7.5 3H10.5C13.3284 3 14.7426 3 15.6213 3.87868C16.5 4.75736 16.5 6.17157 16.5 9V10.5C16.5 13.3284 16.5 14.7426 15.6213 15.6213C14.7426 16.5 13.3284 16.5 10.5 16.5H7.5C4.67157 16.5 3.25736 16.5 2.37868 15.6213C1.5 14.7426 1.5 13.3284 1.5 10.5V9Z" stroke="currentColor" stroke-width="1.125"></path><path d="M5.25 3V1.875" stroke="currentColor" stroke-width="1.125" stroke-linecap="round"></path><path d="M12.75 3V1.875" stroke="currentColor" stroke-width="1.125" stroke-linecap="round"></path><path d="M6.75 10.875L7.875 9.75V12.75" stroke="currentColor" stroke-width="1.125" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.75 12V10.5C9.75 10.0858 10.0858 9.75 10.5 9.75C10.9142 9.75 11.25 10.0858 11.25 10.5V12C11.25 12.4142 10.9142 12.75 10.5 12.75C10.0858 12.75 9.75 12.4142 9.75 12Z" stroke="currentColor" stroke-width="1.125" stroke-linecap="round"></path><path d="M1.875 6.75H16.125" stroke="currentColor" stroke-width="1.125" stroke-linecap="round"></path></svg>',1)),t("span",null,o(l.value?"ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¯Ø©":"Schedule"),1)],10,xe),t("button",{class:a([e.$style.headerButton,e.$style.iconButton]),onClick:le,title:l.value?"Ù…Ø¹Ø§ÙŠÙ†Ø©":"Preview"},[s[25]||(s[25]=ge('<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_219_10368)"><path d="M1.54688 9.26103C1.48437 9.09264 1.48437 8.90741 1.54688 8.73903C2.15565 7.26292 3.18902 6.00081 4.51596 5.1127C5.8429 4.22459 7.40366 3.75049 9.00038 3.75049C10.5971 3.75049 12.1579 4.22459 13.4848 5.1127C14.8117 6.00081 15.8451 7.26292 16.4539 8.73903C16.5164 8.90741 16.5164 9.09264 16.4539 9.26103C15.8451 10.7371 14.8117 11.9992 13.4848 12.8874C12.1579 13.7755 10.5971 14.2496 9.00038 14.2496C7.40366 14.2496 5.8429 13.7755 4.51596 12.8874C3.18902 11.9992 2.15565 10.7371 1.54688 9.26103Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9 11.25C10.2426 11.25 11.25 10.2426 11.25 9C11.25 7.75736 10.2426 6.75 9 6.75C7.75736 6.75 6.75 7.75736 6.75 9C6.75 10.2426 7.75736 11.25 9 11.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_219_10368"><rect width="18" height="18" fill="white"></rect></clipPath></defs></svg>',1)),t("span",null,o(l.value?"Ù…Ø¹Ø§ÙŠÙ†Ø©":"Preview"),1)],10,et),t("button",{class:a([e.$style.headerButton,e.$style.iconButton]),onClick:Ue,title:l.value?"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª":"Settings"},[s[26]||(s[26]=t("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M7.25177 3.10211C7.29309 2.66737 7.49502 2.26365 7.8181 1.96982C8.14117 1.676 8.56219 1.51318 8.99889 1.51318C9.4356 1.51318 9.85662 1.676 10.1797 1.96982C10.5028 2.26365 10.7047 2.66737 10.746 3.10211C10.7709 3.38295 10.863 3.65368 11.0146 3.89137C11.1662 4.12906 11.3729 4.32672 11.6171 4.46762C11.8613 4.60852 12.1359 4.68851 12.4175 4.70083C12.6992 4.71314 12.9797 4.65742 13.2353 4.53836C13.6321 4.3582 14.0818 4.33213 14.4968 4.46523C14.9118 4.59833 15.2624 4.88108 15.4804 5.25844C15.6984 5.63581 15.7682 6.08079 15.6763 6.50679C15.5843 6.93279 15.3371 7.30933 14.9828 7.56311C14.7521 7.725 14.5637 7.94007 14.4337 8.19013C14.3037 8.4402 14.2358 8.71789 14.2358 8.99974C14.2358 9.28158 14.3037 9.55928 14.4337 9.80934C14.5637 10.0594 14.7521 10.2745 14.9828 10.4364C15.3371 10.6902 15.5843 11.0667 15.6763 11.4927C15.7682 11.9187 15.6984 12.3637 15.4804 12.741C15.2624 13.1184 14.9118 13.4011 14.4968 13.5342C14.0818 13.6673 13.6321 13.6413 13.2353 13.4611C12.9797 13.3421 12.6992 13.2863 12.4175 13.2986C12.1359 13.311 11.8613 13.391 11.6171 13.5319C11.3729 13.6728 11.1662 13.8704 11.0146 14.1081C10.863 14.3458 10.7709 14.6165 10.746 14.8974C10.7047 15.3321 10.5028 15.7358 10.1797 16.0297C9.85662 16.3235 9.4356 16.4863 8.99889 16.4863C8.56219 16.4863 8.14117 16.3235 7.8181 16.0297C7.49502 15.7358 7.29309 15.3321 7.25177 14.8974C7.22698 14.6164 7.13484 14.3456 6.98317 14.1078C6.83149 13.87 6.62475 13.6723 6.38044 13.5314C6.13614 13.3905 5.86147 13.3105 5.5797 13.2983C5.29794 13.2861 5.01737 13.3419 4.76177 13.4611C4.36494 13.6413 3.91526 13.6673 3.50027 13.5342C3.08527 13.4011 2.73465 13.1184 2.51663 12.741C2.29862 12.3637 2.22881 11.9187 2.32079 11.4927C2.41277 11.0667 2.65997 10.6902 3.01427 10.4364C3.24498 10.2745 3.43332 10.0594 3.56334 9.80934C3.69335 9.55928 3.76123 9.28158 3.76123 8.99974C3.76123 8.71789 3.69335 8.4402 3.56334 8.19013C3.43332 7.94007 3.24498 7.725 3.01427 7.56311C2.66047 7.3092 2.41371 6.93281 2.32195 6.5071C2.23018 6.08139 2.29998 5.63677 2.51776 5.25965C2.73554 4.88253 3.08575 4.59985 3.50034 4.46654C3.91492 4.33324 4.36426 4.35884 4.76102 4.53836C5.01659 4.65742 5.29708 4.71314 5.57874 4.70083C5.86041 4.68851 6.13497 4.60852 6.37917 4.46762C6.62338 4.32672 6.83004 4.12906 6.98167 3.89137C7.1333 3.65368 7.22543 3.38295 7.25027 3.10211",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M9 11.25C10.2426 11.25 11.25 10.2426 11.25 9C11.25 7.75736 10.2426 6.75 9 6.75C7.75736 6.75 6.75 7.75736 6.75 9C6.75 10.2426 7.75736 11.25 9 11.25Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("span",null,o(l.value?"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª":"Settings"),1)],10,tt),_.isCreatingPredefinedTemplate?(u(),d("button",{key:0,class:a([e.$style.headerButton,e.$style.publishButton]),onClick:Ye,disabled:!G.value},[s[27]||(s[27]=t("i",{class:"fas fa-save"},null,-1)),t("span",null,o(l.value?"Ø­ÙØ¸ Ø§Ù„Ù‚Ø§Ù„Ø¨":"Save Template"),1)],10,st)):(u(),d(q,{key:1},[t("button",{class:a([e.$style.headerButton,e.$style.draftButton]),onClick:je,disabled:!G.value},[t("span",null,o(l.value?"Ø­ÙØ¸ ÙƒÙ…Ø³ÙˆØ¯Ø©":"Save as Draft"),1)],10,at),t("button",{class:a([e.$style.headerButton,e.$style.publishButton]),onClick:Ke,disabled:!G.value},[t("span",null,o(l.value?"Ù†Ø´Ø±":"Publish"),1)],10,lt)],64))],2)],2)],2),t("div",{class:a(e.$style.editorMain)},[t("div",{class:a(e.$style.editorGrid)},[t("div",{class:a(e.$style.editorContent)},[X.value?(u(),d("div",{key:0,class:a(e.$style.infoBanner)},[s[28]||(s[28]=t("i",{class:"fas fa-info-circle"},null,-1)),t("div",{class:a(e.$style.infoContent)},[t("strong",null,o(l.value?"Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯":"Creating New Template"),1),t("p",null,o(l.value?"Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒØŒ ÙˆØ¹Ù†Ø¯ Ø§Ù„Ù†Ø´Ø± ÙŠÙ…ÙƒÙ†Ùƒ Ø­ÙØ¸Ù‡ ÙƒÙ‚Ø§Ù„Ø¨ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹.":"Create your survey, and when you publish it, you can save it as a template for future use."),1)],2)],2)):g("",!0),t("div",{class:a(e.$style.surveyHeaderSection)},[t("div",{class:a(e.$style.surveyHeaderCard)},[I(t("input",{type:"text",class:a(e.$style.surveyTitle),"onUpdate:modelValue":s[0]||(s[0]=n=>p.value.title=n),placeholder:l.value?"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Survey Title",onBlur:Y},null,42,nt),[[Z,p.value.title]]),L.value.title?(u(),d("div",{key:0,class:a(e.$style.errorMessage)},o(L.value.title),3)):g("",!0),I(t("textarea",{class:a(e.$style.surveyDescription),"onUpdate:modelValue":s[1]||(s[1]=n=>p.value.description=n),placeholder:l.value?"ÙˆØµÙ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)":"Survey Description (optional)",rows:"3"},null,10,ot),[[Z,p.value.description]])],2)],2),t("div",{class:a(e.$style.questionsSection),onDragover:s[2]||(s[2]=n=>Le(n)),onDrop:s[3]||(s[3]=n=>Qe(n))},[p.value.questions.length===0?(u(),d("div",{key:0,class:a(e.$style.emptyDropZone)},[s[29]||(s[29]=t("i",{class:"fas fa-hand-pointer"},null,-1)),t("h3",null,o(l.value?"Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„":"Start by adding a question"),1),t("p",null,o(l.value?"Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø£Ùˆ Ø§Ø³Ø­Ø¨Ù‡ Ø¥Ù„Ù‰ Ù‡Ù†Ø§ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰":"Click on a question type or drag it here from the left panel"),1)],2)):g("",!0),(u(!0),d(q,null,P(p.value.questions,(n,i)=>(u(),d("div",{key:n.tempId,class:a([e.$style.questionCard,{[e.$style.dragging]:c.value===i,[e.$style.dragOver]:y.value===i}]),onDragover:r=>Pe(i,r),onDragleave:Me,onDrop:r=>Ve(i,r)},[t("div",{class:a(e.$style.questionHeader)},[t("div",{class:a(e.$style.questionNumber)},o(i+1),3),t("div",{class:a(e.$style.questionDragHandle),draggable:"true",onDragstart:r=>He(i,r),onDragend:Ae},s[30]||(s[30]=[t("i",{class:"fas fa-grip-vertical",style:{"pointer-events":"none"}},null,-1)]),42,rt)],2),t("div",{class:a(e.$style.questionContent)},[t("div",{class:a(e.$style.questionTextRow)},[I(t("input",{type:"text",class:a(e.$style.questionTextInput),"onUpdate:modelValue":r=>n.text=r,placeholder:l.value?"Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„":"Question Text",onFocus:r=>x(i)},null,42,ut),[[Z,n.text]]),t("div",{class:a(e.$style.questionTypeDropdown)},[I(t("select",{"onUpdate:modelValue":r=>n.question_type=r,class:a(e.$style.typeSelect),onChange:r=>Ie(n)},[t("option",dt,o(l.value?"Ù†Øµ Ù‚ØµÙŠØ±":"Short Text"),1),t("option",ct,o(l.value?"Ù†Øµ Ø·ÙˆÙŠÙ„":"Long Text"),1),t("option",vt,o(l.value?"Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯":"Single Choice"),1),t("option",yt,o(l.value?"Ø§Ø®ØªÙŠØ§Ø± Ù…ØªØ¹Ø¯Ø¯":"Multiple Choice"),1),t("option",ft,o(l.value?"ØªÙ‚ÙŠÙŠÙ…":"Rating"),1),t("option",_t,o(l.value?"Ù†Ø¹Ù…/Ù„Ø§":"Yes/No"),1)],42,pt),[[me,n.question_type]]),t("i",{class:a(["fas fa-chevron-down",e.$style.dropdownIcon])},null,2)],2)],2),n.question_type==="text"?(u(),d("div",{key:0,class:a(e.$style.validationSection)},[t("div",{class:a(e.$style.validationHeader)},[s[31]||(s[31]=t("i",{class:"fas fa-shield-alt"},null,-1)),t("span",null,o(l.value?"Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„":"Input Validation"),1)],2),t("div",{class:a(e.$style.validationControl)},[t("label",{class:a(e.$style.validationLabel)},[s[32]||(s[32]=t("i",{class:"fas fa-check-circle"},null,-1)),t("span",null,o(l.value?"Ù†ÙˆØ¹ Ø§Ù„ØªØ­Ù‚Ù‚":"Validation Type"),1)],2),t("div",{class:a(e.$style.validationTypeDropdown)},[I(t("select",{"onUpdate:modelValue":r=>n.validation_type=r,class:a(e.$style.validationSelect)},[t("option",mt,o(l.value?"Ø¨Ø¯ÙˆÙ† ØªØ­Ù‚Ù‚":"No Validation"),1),t("option",Ct,o(l.value?"Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ":"Email Address"),1),t("option",kt,o(l.value?"Ø±Ù‚Ù… Ù‡Ø§ØªÙ":"Phone Number"),1),t("option",wt,o(l.value?"Ø±Ù‚Ù…":"Number"),1),t("option",St,o(l.value?"Ø±Ø§Ø¨Ø· Ù…ÙˆÙ‚Ø¹":"Website URL"),1)],10,gt),[[me,n.validation_type]]),t("i",{class:a(["fas fa-chevron-down",e.$style.validationDropdownIcon])},null,2)],2)],2),n.validation_type!=="none"?(u(),d("div",{key:0,class:a(e.$style.validationInfoBox)},[s[36]||(s[36]=t("i",{class:"fas fa-info-circle"},null,-1)),t("div",{class:a(e.$style.validationInfoContent)},[n.validation_type==="email"?(u(),d(q,{key:0},[t("strong",null,o(l.value?"Ù…Ø«Ø§Ù„:":"Example:"),1),s[33]||(s[33]=t("span",null,"example@domain.com",-1))],64)):n.validation_type==="phone"?(u(),d(q,{key:1},[t("strong",null,o(l.value?"Ù…Ø«Ø§Ù„:":"Example:"),1),s[34]||(s[34]=t("span",null,"+971501234567",-1))],64)):n.validation_type==="number"?(u(),d(q,{key:2},[t("strong",null,o(l.value?"Ù…Ø«Ø§Ù„:":"Example:"),1),t("span",null,"123 "+o(l.value?"Ø£Ùˆ":"or")+" 123.45",1)],64)):n.validation_type==="url"?(u(),d(q,{key:3},[t("strong",null,o(l.value?"Ù…Ø«Ø§Ù„:":"Example:"),1),s[35]||(s[35]=t("span",null,"https://example.com",-1))],64)):g("",!0)],2)],2)):g("",!0)],2)):g("",!0),Q(n.question_type)?(u(),d("div",{key:1,class:a(e.$style.optionsSection)},[(u(!0),d(q,null,P(O(n),(r,m)=>(u(),d("div",{key:m,class:a(e.$style.optionRow)},[t("div",{class:a(e.$style.optionBullet)},[t("i",{class:a(be(n.question_type))},null,2)],2),I(t("input",{type:"text",class:a(e.$style.optionInput),"onUpdate:modelValue":w=>O(n)[m]=w,placeholder:`${l.value?"Ø®ÙŠØ§Ø±":"Option"} ${m+1}`,onInput:w=>Te(n,O(n))},null,42,$t),[[Z,O(n)[m]]]),O(n).length>1?(u(),d("button",{key:0,class:a(e.$style.removeOptionButton),onClick:w=>Be(n,m)},s[37]||(s[37]=[t("i",{class:"fas fa-times"},null,-1)]),10,ht)):g("",!0)],2))),128)),t("button",{class:a(e.$style.addOptionButton),onClick:r=>De(n)},[s[38]||(s[38]=t("i",{class:"fas fa-plus"},null,-1)),t("span",null,o(l.value?"Ø¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø±":"Add Option"),1)],10,qt)],2)):g("",!0),n.question_type==="rating"?(u(),d("div",{key:2,class:a(e.$style.ratingPreview)},[t("div",{class:a(e.$style.ratingStars)},[(u(),d(q,null,P(5,r=>t("i",{key:r,class:a(["fas fa-star",e.$style.ratingStar])},null,2)),64))],2)],2)):g("",!0),ee(n.question_type)||te(n.question_type)?(u(),d("div",{key:3,class:a(e.$style.analyticsSection)},[t("div",{class:a(e.$style.analyticsHeader)},[s[39]||(s[39]=t("i",{class:"fas fa-chart-line"},null,-1)),t("span",null,o(l.value?"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª":"Analytics Settings"),1)],2),ee(n.question_type)?(u(),d("div",{key:0,class:a(e.$style.analyticsCard)},[t("div",{class:a(e.$style.analyticsCardHeader)},[t("div",{class:a(e.$style.analyticsCardTitle)},[s[40]||(s[40]=t("i",{class:"fas fa-tachometer-alt"},null,-1)),t("span",null,o(l.value?"ØµØ§ÙÙŠ Ù†Ù‚Ø§Ø· Ø§Ù„ØªØ±ÙˆÙŠØ¬ (NPS)":"Net Promoter Score (NPS)"),1)],2),t("label",{class:a(e.$style.modernToggle)},[I(t("input",{type:"checkbox","onUpdate:modelValue":r=>n.NPS_Calculate=r},null,8,Tt),[[W,n.NPS_Calculate]]),t("span",{class:a(e.$style.toggleSlider)},null,2)],2)],2),t("p",{class:a(e.$style.analyticsCardDescription)},o(l.value?"ØªØªØ¨Ø¹ ÙˆÙ„Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø®Ù„Ø§Ù„ Ø­Ø³Ø§Ø¨ NPS Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ":"Track customer loyalty with automatic NPS calculation"),3),n.NPS_Calculate?(u(),d("div",{key:0,class:a(e.$style.scaleSettings)},[t("div",{class:a(e.$style.scaleInfoBox)},[t("div",{class:a(e.$style.scaleInfoHeader)},[s[41]||(s[41]=t("i",{class:"fas fa-info-circle"},null,-1)),t("span",null,o(l.value?"Ù…Ù‚ÙŠØ§Ø³ NPS Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (0-5 Ù†Ø¬ÙˆÙ…)":"Default NPS Scale (0-5 Stars)"),1)],2),t("div",{class:a(e.$style.scaleRanges)},[t("div",{class:a(e.$style.scaleRange)},[t("span",{class:a(e.$style.rangeLabel)},[t("i",{class:a(["fas fa-frown",e.$style.detractorIcon])},null,2),b(" "+o(l.value?"Ø§Ù„Ù…Ù†ØªÙ‚Ø¯ÙˆÙ† (0-2 Ù†Ø¬ÙˆÙ…)":"Detractors (0-2 stars)"),1)],2),t("span",{class:a(e.$style.rangeDescription)},o(l.value?"Ø¹Ù…Ù„Ø§Ø¡ ØºÙŠØ± Ø±Ø§Ø¶ÙŠÙ† Ù‚Ø¯ ÙŠØ¶Ø±ÙˆÙ† Ø¨Ø¹Ù„Ø§Ù…ØªÙƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":"Unhappy customers who can harm your brand"),3)],2),t("div",{class:a(e.$style.scaleRange)},[t("span",{class:a(e.$style.rangeLabel)},[t("i",{class:a(["fas fa-meh",e.$style.passiveIcon])},null,2),b(" "+o(l.value?"Ø§Ù„Ù…Ø­Ø§ÙŠØ¯ÙˆÙ† (3-4 Ù†Ø¬ÙˆÙ…)":"Passives (3-4 stars)"),1)],2),t("span",{class:a(e.$style.rangeDescription)},o(l.value?"Ø¹Ù…Ù„Ø§Ø¡ Ø±Ø§Ø¶ÙˆÙ† Ù„ÙƒÙ† ØºÙŠØ± Ù…ØªØ­Ù…Ø³ÙŠÙ†":"Satisfied but unenthusiastic customers"),3)],2),t("div",{class:a(e.$style.scaleRange)},[t("span",{class:a(e.$style.rangeLabel)},[t("i",{class:a(["fas fa-smile",e.$style.promoterIcon])},null,2),b(" "+o(l.value?"Ø§Ù„Ù…Ø±ÙˆØ¬ÙˆÙ† (5 Ù†Ø¬ÙˆÙ…)":"Promoters (5 stars)"),1)],2),t("span",{class:a(e.$style.rangeDescription)},o(l.value?"Ù…Ø¤ÙŠØ¯ÙˆÙ† Ù…Ø®Ù„ØµÙˆÙ† ÙŠÙˆØµÙˆÙ† Ø¨Ø¹Ù„Ø§Ù…ØªÙƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":"Loyal advocates who recommend your brand"),3)],2)],2)],2)],2)):g("",!0)],2)):g("",!0),te(n.question_type)?(u(),d("div",{key:1,class:a(e.$style.analyticsCard)},[t("div",{class:a(e.$style.analyticsCardHeader)},[t("div",{class:a(e.$style.analyticsCardTitle)},[s[42]||(s[42]=t("i",{class:"fas fa-smile"},null,-1)),t("span",null,o(l.value?"Ø¯Ø±Ø¬Ø© Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (CSAT)":"Customer Satisfaction (CSAT)"),1)],2),t("label",{class:a(e.$style.modernToggle)},[I(t("input",{type:"checkbox","onUpdate:modelValue":r=>n.CSAT_Calculate=r},null,8,Dt),[[W,n.CSAT_Calculate]]),t("span",{class:a(e.$style.toggleSlider)},null,2)],2)],2),t("p",{class:a(e.$style.analyticsCardDescription)},o(l.value?"Ù‚ÙŠØ§Ø³ Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØªØªØ¨Ø¹ Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª Ø¨Ù…Ø±ÙˆØ± Ø§Ù„ÙˆÙ‚Øª":"Measure customer satisfaction and track trends over time"),3),n.question_type==="single_choice"&&n.CSAT_Calculate?(u(),d("div",{key:0,class:a(e.$style.satisfactionMapping)},[t("div",{class:a(e.$style.satisfactionHeader)},[s[43]||(s[43]=t("i",{class:"fas fa-sliders-h"},null,-1)),t("span",null,o(l.value?"ØªØ¹ÙŠÙŠÙ† Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø¶Ø§":"Map Satisfaction Levels"),1)],2),(u(!0),d(q,null,P(O(n),(r,m)=>(u(),d("div",{key:`satisfaction-${m}`,class:a(e.$style.satisfactionRow)},[t("span",{class:a(e.$style.satisfactionOptionText)},o(r),3),t("div",{class:a(e.$style.satisfactionButtons)},[t("button",{type:"button",class:a([e.$style.satisfactionButton,{[e.$style.active]:se(n,m)===2}]),onClick:w=>ae(n,m,2),title:l.value?"Ø±Ø§Ø¶Ù":"Satisfied"},s[44]||(s[44]=[t("i",{class:"fas fa-smile"},null,-1)]),10,Bt),t("button",{type:"button",class:a([e.$style.satisfactionButton,{[e.$style.active]:se(n,m)===1}]),onClick:w=>ae(n,m,1),title:l.value?"Ù…Ø­Ø§ÙŠØ¯":"Neutral"},s[45]||(s[45]=[t("i",{class:"fas fa-meh"},null,-1)]),10,bt),t("button",{type:"button",class:a([e.$style.satisfactionButton,{[e.$style.active]:se(n,m)===0}]),onClick:w=>ae(n,m,0),title:l.value?"ØºÙŠØ± Ø±Ø§Ø¶Ù":"Dissatisfied"},s[46]||(s[46]=[t("i",{class:"fas fa-frown"},null,-1)]),10,It)],2)],2))),128))],2)):g("",!0),n.question_type==="yes_no"&&n.CSAT_Calculate?(u(),d("div",{key:1,class:a(e.$style.satisfactionMapping)},[t("div",{class:a(e.$style.satisfactionHeader)},[s[47]||(s[47]=t("i",{class:"fas fa-sliders-h"},null,-1)),t("span",null,o(l.value?"ØªØ¹ÙŠÙŠÙ† Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø¶Ø§ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª":"Map Satisfaction for Answers"),1)],2),t("div",{class:a(e.$style.yesNoMappingInfo)},[s[48]||(s[48]=t("i",{class:"fas fa-info-circle"},null,-1)),t("span",null,o(l.value?"Ø­Ø¯Ø¯ ÙƒÙŠÙÙŠØ© ØªØµÙ†ÙŠÙ ÙƒÙ„ Ø¥Ø¬Ø§Ø¨Ø© (Ù†Ø¹Ù…/Ù„Ø§) Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø³ÙŠØ§Ù‚ Ø³Ø¤Ø§Ù„Ùƒ":"Define how each answer (Yes/No) should be classified based on your question context"),1)],2),t("div",{class:a(e.$style.yesNoMappingRow)},[t("div",{class:a(e.$style.yesNoLabel)},[t("i",{class:a(["fas fa-check-circle",e.$style.yesIcon])},null,2),t("span",null,o(l.value?'Ø¥Ø°Ø§ Ø£Ø¬Ø§Ø¨ Ø§Ù„Ù…Ø³ØªØ¬ÙŠØ¨ Ø¨Ù€ "Ù†Ø¹Ù…"ØŒ ØªØµÙ†Ù ÙƒÙ€:':'If respondent answers "YES", classify as:'),1)],2),t("select",{value:ye(n,"yes"),onChange:r=>fe(n,"yes",Number(r.target.value)),class:a(e.$style.yesNoSelect)},[t("option",Nt,o(l.value?"ğŸ˜Š Ø±Ø§Ø¶Ù":"ğŸ˜Š Satisfied"),1),t("option",Ht,o(l.value?"ğŸ˜ Ù…Ø­Ø§ÙŠØ¯":"ğŸ˜ Neutral"),1),t("option",At,o(l.value?"â˜¹ï¸ ØºÙŠØ± Ø±Ø§Ø¶Ù":"â˜¹ï¸ Dissatisfied"),1)],42,Ot)],2),t("div",{class:a(e.$style.yesNoMappingRow)},[t("div",{class:a(e.$style.yesNoLabel)},[t("i",{class:a(["fas fa-times-circle",e.$style.noIcon])},null,2),t("span",null,o(l.value?'Ø¥Ø°Ø§ Ø£Ø¬Ø§Ø¨ Ø§Ù„Ù…Ø³ØªØ¬ÙŠØ¨ Ø¨Ù€ "Ù„Ø§"ØŒ ØªØµÙ†Ù ÙƒÙ€:':'If respondent answers "NO", classify as:'),1)],2),t("select",{value:ye(n,"no"),onChange:r=>fe(n,"no",Number(r.target.value)),class:a(e.$style.yesNoSelect)},[t("option",Mt,o(l.value?"ğŸ˜Š Ø±Ø§Ø¶Ù":"ğŸ˜Š Satisfied"),1),t("option",Lt,o(l.value?"ğŸ˜ Ù…Ø­Ø§ÙŠØ¯":"ğŸ˜ Neutral"),1),t("option",Qt,o(l.value?"â˜¹ï¸ ØºÙŠØ± Ø±Ø§Ø¶Ù":"â˜¹ï¸ Dissatisfied"),1)],42,Pt)],2)],2)):g("",!0)],2)):g("",!0)],2)):g("",!0)],2),t("div",{class:a(e.$style.questionActions)},[t("button",{class:a(e.$style.actionButton),onClick:r=>Oe(i),title:l.value?"ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³Ø¤Ø§Ù„":"Duplicate"},s[49]||(s[49]=[t("i",{class:"fas fa-copy"},null,-1)]),10,Vt),t("button",{class:a(e.$style.actionButton),onClick:r=>Ne(i),title:l.value?"Ø­Ø°Ù Ø§Ù„Ø³Ø¤Ø§Ù„":"Delete"},s[50]||(s[50]=[t("i",{class:"fas fa-trash"},null,-1)]),10,Et),t("div",{class:a(e.$style.actionDivider)},null,2),t("label",{class:a(e.$style.requiredToggle)},[I(t("input",{type:"checkbox","onUpdate:modelValue":r=>n.is_required=r},null,8,Rt),[[W,n.is_required]]),t("span",null,o(l.value?"Ù…Ø·Ù„ÙˆØ¨":"Required"),1)],2)],2)],42,it))),128)),p.value.questions.length>0?(u(),d("div",{key:1,class:a(e.$style.addQuestionSection)},[t("button",{class:a(e.$style.addQuestionButton),onClick:_e},[s[51]||(s[51]=t("i",{class:"fas fa-plus-circle"},null,-1)),t("span",null,o(l.value?"Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„":"Add Question"),1)],2)],2)):g("",!0),p.value.questions.length>0?(u(),d("div",{key:2,class:a(e.$style.addQuestionSection)},[t("div",{class:a(e.$style.dropHint)},[s[52]||(s[52]=t("i",{class:"fas fa-info-circle"},null,-1)),t("span",null,o(l.value?"Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø£Ùˆ Ø§Ø³Ø­Ø¨Ù‡ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø©":"Click or drag a question type to add more questions"),1)],2)],2)):g("",!0)],34)],2),t("div",{class:a(e.$style.questionPalette)},[t("div",{class:a(e.$style.paletteHeader)},[s[53]||(s[53]=t("i",{class:"fas fa-puzzle-piece"},null,-1)),t("h3",null,o(l.value?"Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©":"Question Types"),1)],2),t("div",{class:a(e.$style.paletteItems)},[t("div",{class:a(e.$style.paletteItem),draggable:"true",onDragstart:s[4]||(s[4]=n=>E("text",n)),onClick:s[5]||(s[5]=n=>R("text"))},[t("div",{class:a(e.$style.paletteIcon),style:{"pointer-events":"none"}},s[54]||(s[54]=[t("i",{class:"fas fa-font"},null,-1)]),2),t("div",{class:a(e.$style.paletteContent),style:{"pointer-events":"none"}},[t("h4",null,o(l.value?"Ù†Øµ Ù‚ØµÙŠØ±":"Short Text"),1),t("p",null,o(l.value?"Ø¥Ø¬Ø§Ø¨Ø© Ù†ØµÙŠØ© Ù‚ØµÙŠØ±Ø©":"Single line text"),1)],2)],34),t("div",{class:a(e.$style.paletteItem),draggable:"true",onDragstart:s[6]||(s[6]=n=>E("textarea",n)),onClick:s[7]||(s[7]=n=>R("textarea"))},[t("div",{class:a(e.$style.paletteIcon),style:{"pointer-events":"none"}},s[55]||(s[55]=[t("i",{class:"fas fa-align-left"},null,-1)]),2),t("div",{class:a(e.$style.paletteContent),style:{"pointer-events":"none"}},[t("h4",null,o(l.value?"Ù†Øµ Ø·ÙˆÙŠÙ„":"Long Text"),1),t("p",null,o(l.value?"Ù†Øµ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø·Ø±":"Multi-line text"),1)],2)],34),t("div",{class:a(e.$style.paletteItem),draggable:"true",onDragstart:s[8]||(s[8]=n=>E("single_choice",n)),onClick:s[9]||(s[9]=n=>R("single_choice"))},[t("div",{class:a(e.$style.paletteIcon),style:{"pointer-events":"none"}},s[56]||(s[56]=[t("i",{class:"far fa-circle"},null,-1)]),2),t("div",{class:a(e.$style.paletteContent),style:{"pointer-events":"none"}},[t("h4",null,o(l.value?"Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯":"Single Choice"),1),t("p",null,o(l.value?"Ø®ÙŠØ§Ø± ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·":"Select one option"),1)],2)],34),t("div",{class:a(e.$style.paletteItem),draggable:"true",onDragstart:s[10]||(s[10]=n=>E("multiple_choice",n)),onClick:s[11]||(s[11]=n=>R("multiple_choice"))},[t("div",{class:a(e.$style.paletteIcon),style:{"pointer-events":"none"}},s[57]||(s[57]=[t("i",{class:"far fa-square"},null,-1)]),2),t("div",{class:a(e.$style.paletteContent),style:{"pointer-events":"none"}},[t("h4",null,o(l.value?"Ø§Ø®ØªÙŠØ§Ø± Ù…ØªØ¹Ø¯Ø¯":"Multiple Choice"),1),t("p",null,o(l.value?"Ø¹Ø¯Ø© Ø®ÙŠØ§Ø±Ø§Øª":"Select multiple"),1)],2)],34),t("div",{class:a(e.$style.paletteItem),draggable:"true",onDragstart:s[12]||(s[12]=n=>E("rating",n)),onClick:s[13]||(s[13]=n=>R("rating"))},[t("div",{class:a(e.$style.paletteIcon),style:{"pointer-events":"none"}},s[58]||(s[58]=[t("i",{class:"fas fa-star"},null,-1)]),2),t("div",{class:a(e.$style.paletteContent),style:{"pointer-events":"none"}},[t("h4",null,o(l.value?"ØªÙ‚ÙŠÙŠÙ…":"Rating"),1),t("p",null,o(l.value?"ØªÙ‚ÙŠÙŠÙ… Ø¨Ø§Ù„Ù†Ø¬ÙˆÙ…":"Star rating"),1)],2)],34),t("div",{class:a(e.$style.paletteItem),draggable:"true",onDragstart:s[14]||(s[14]=n=>E("yes_no",n)),onClick:s[15]||(s[15]=n=>R("yes_no"))},[t("div",{class:a(e.$style.paletteIcon),style:{"pointer-events":"none"}},s[59]||(s[59]=[t("i",{class:"fas fa-check-circle"},null,-1)]),2),t("div",{class:a(e.$style.paletteContent),style:{"pointer-events":"none"}},[t("h4",null,o(l.value?"Ù†Ø¹Ù…/Ù„Ø§":"Yes/No"),1),t("p",null,o(l.value?"Ø³Ø¤Ø§Ù„ Ø¨Ù†Ø¹Ù… Ø£Ùˆ Ù„Ø§":"Binary choice"),1)],2)],34)],2)],2)],2)],2),f.value?(u(),d("div",{key:0,class:a(e.$style.previewOverlay),onClick:le},[t("div",{class:a(e.$style.previewModal),onClick:s[16]||(s[16]=ie(()=>{},["stop"]))},[t("div",{class:a(e.$style.previewHeader)},[t("h2",null,o(l.value?"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Survey Preview"),1),t("button",{class:a(e.$style.closePreview),onClick:le},s[60]||(s[60]=[t("i",{class:"fas fa-times"},null,-1)]),2)],2),t("div",{class:a(e.$style.previewContent)},[t("div",{class:a(e.$style.previewSurveyHeader)},[t("h1",null,o(p.value.title||(l.value?"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Survey Title")),1),p.value.description?(u(),d("p",Ut,o(p.value.description),1)):g("",!0)],2),t("div",{class:a(e.$style.previewQuestions)},[(u(!0),d(q,null,P(p.value.questions,(n,i)=>(u(),d("div",{key:i,class:a(e.$style.previewQuestion)},[t("div",{class:a(e.$style.previewQuestionText)},[b(o(i+1)+". "+o(n.text||(l.value?"Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„":"Question Text"))+" ",1),n.is_required?(u(),d("span",{key:0,class:a(e.$style.requiredMark)},"*",2)):g("",!0)],2),t("div",{class:a(e.$style.previewAnswer)},[n.question_type==="text"?(u(),d("div",{key:0,class:a(e.$style.previewInput)},o(l.value?"Ø¥Ø¬Ø§Ø¨Ø© Ù†ØµÙŠØ© Ù‚ØµÙŠØ±Ø©":"Short text answer"),3)):n.question_type==="textarea"?(u(),d("div",{key:1,class:a(e.$style.previewTextarea)},o(l.value?"Ø¥Ø¬Ø§Ø¨Ø© Ù†ØµÙŠØ© Ø·ÙˆÙŠÙ„Ø©":"Long text answer"),3)):n.question_type==="yes_no"?(u(),d("div",{key:2,class:a(e.$style.previewOptions)},[t("div",{class:a(e.$style.previewOption)},"â—‹ "+o(l.value?"Ù†Ø¹Ù…":"Yes"),3),t("div",{class:a(e.$style.previewOption)},"â—‹ "+o(l.value?"Ù„Ø§":"No"),3)],2)):Q(n.question_type)?(u(),d("div",{key:3,class:a(e.$style.previewOptions)},[(u(!0),d(q,null,P(O(n),(r,m)=>(u(),d("div",{key:m,class:a(e.$style.previewOption)},o(n.question_type==="multiple_choice"?"â˜":"â—‹")+" "+o(r),3))),128))],2)):n.question_type==="rating"?(u(),d("div",{key:4,class:a(e.$style.previewRating)},[(u(),d(q,null,P(5,r=>t("i",{key:r,class:"fas fa-star"})),64))],2)):g("",!0)],2)],2))),128))],2)],2)],2)],2)):g("",!0),(u(),pe(Ce,{to:"body"},[B.value?(u(),d("div",{key:0,class:a(e.$style.modalOverlay),onClick:z},[t("div",{class:a(e.$style.modalContainer),onClick:s[19]||(s[19]=ie(()=>{},["stop"])),"data-theme":M.value,dir:l.value?"rtl":"ltr"},[t("div",{class:a(e.$style.modalHeader)},[t("h3",null,[s[61]||(s[61]=t("i",{class:"fas fa-calendar-alt"},null,-1)),b(" "+o(l.value?"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©":"Scheduling Settings"),1)]),t("button",{class:a(e.$style.closeButton),onClick:z},s[62]||(s[62]=[t("i",{class:"fas fa-times"},null,-1)]),2)],2),t("div",{class:a(e.$style.modalBody)},[t("p",{class:a(e.$style.helpText)},o(l.value?"Ø­Ø¯Ø¯ Ù…ØªÙ‰ Ø³ÙŠÙƒÙˆÙ† Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ù†Ø´Ø·Ù‹Ø§. Ø§ØªØ±Ùƒ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙØ§Ø±ØºØ© Ù„Ù„Ø¨Ø¯Ø¡ ÙÙˆØ±Ù‹Ø§ ÙˆØ§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø¥Ù„Ù‰ Ø£Ø¬Ù„ ØºÙŠØ± Ù…Ø³Ù…Ù‰.":"Set when the survey will be active. Leave fields empty to start immediately and run indefinitely."),3),t("div",{class:a(e.$style.formGrid)},[t("div",{class:a(e.$style.formGroup)},[t("label",{class:a(e.$style.formLabel)},[t("i",{class:a(["fas fa-play",e.$style.labelIcon])},null,2),b(" "+o(l.value?"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©":"Start Date"),1)],2),ke(we(Se),{modelValue:k.value.start_date,"onUpdate:modelValue":s[17]||(s[17]=n=>k.value.start_date=n),config:ce.value,class:a(e.$style.formInput),placeholder:l.value?"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©":"Select start date and time"},null,8,["modelValue","config","class","placeholder"]),t("div",{class:a(e.$style.fieldHelp)},o(l.value?"Ù…ØªÙ‰ Ø³ÙŠÙƒÙˆÙ† Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ù…ØªØ§Ø­Ù‹Ø§ Ù„Ù„Ù…Ø³ØªØ¬ÙŠØ¨ÙŠÙ†":"When the survey will become available to respondents"),3)],2),t("div",{class:a(e.$style.formGroup)},[t("label",{class:a(e.$style.formLabel)},[t("i",{class:a(["fas fa-stop",e.$style.labelIcon])},null,2),b(" "+o(l.value?"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©":"End Date"),1)],2),ke(we(Se),{modelValue:k.value.end_date,"onUpdate:modelValue":s[18]||(s[18]=n=>k.value.end_date=n),config:ce.value,class:a(e.$style.formInput),placeholder:l.value?"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©":"Select end date and time"},null,8,["modelValue","config","class","placeholder"]),t("div",{class:a(e.$style.fieldHelp)},o(l.value?"Ù…ØªÙ‰ Ø³ÙŠØªÙˆÙ‚Ù Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø¹Ù† Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø±Ø¯ÙˆØ¯":"When the survey will stop accepting responses"),3)],2)],2),j.value?(u(),d("div",{key:0,class:a(e.$style.schedulingPreview)},[t("div",{class:a([e.$style.previewItem,e.$style[j.value.status]])},[t("i",{class:a([j.value.icon,e.$style.previewIcon])},null,2),t("div",{class:a(e.$style.previewContent)},[t("h4",{class:a(e.$style.previewTitle)},o(j.value.title),3),t("p",{class:a(e.$style.previewDescription)},o(j.value.description),3)],2)],2)],2)):g("",!0)],2),t("div",{class:a(e.$style.modalFooter)},[t("button",{class:a([e.$style.modalButton,e.$style.cancelButton]),onClick:z},o(l.value?"Ø¥Ù„ØºØ§Ø¡":"Cancel"),3),t("button",{class:a([e.$style.modalButton,e.$style.saveButton]),onClick:Re},[s[63]||(s[63]=t("i",{class:"fas fa-check"},null,-1)),b(" "+o(l.value?"Ø­ÙØ¸":"Save"),1)],2)],2)],10,Ft)],2)):g("",!0)])),(u(),pe(Ce,{to:"body"},[S.value?(u(),d("div",{key:0,class:a(e.$style.modalOverlay),onClick:J},[t("div",{class:a(e.$style.modalContainer),onClick:s[21]||(s[21]=ie(()=>{},["stop"])),"data-theme":M.value,dir:l.value?"rtl":"ltr"},[t("div",{class:a(e.$style.modalHeader)},[t("h3",null,[s[64]||(s[64]=t("i",{class:"fas fa-cog"},null,-1)),b(" "+o(l.value?"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Survey Settings"),1)]),t("button",{class:a(e.$style.closeButton),onClick:J},s[65]||(s[65]=[t("i",{class:"fas fa-times"},null,-1)]),2)],2),t("div",{class:a(e.$style.modalBody)},[t("div",{class:a(e.$style.settingItem)},[t("div",{class:a(e.$style.settingContent)},[t("h4",{class:a(e.$style.settingTitle)},[s[66]||(s[66]=t("i",{class:"fas fa-toggle-on"},null,-1)),b(" "+o(l.value?"Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Survey Status"),1)],2),t("p",{class:a(e.$style.settingDescription)},o(l.value?"ØªÙØ¹ÙŠÙ„ Ø£Ùˆ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Activate or deactivate the survey"),3)],2),t("label",{class:a(e.$style.modernToggle)},[I(t("input",{type:"checkbox","onUpdate:modelValue":s[20]||(s[20]=n=>$.value.is_active=n)},null,512),[[W,$.value.is_active]]),t("span",{class:a(e.$style.toggleSlider)},null,2)],2)],2)],2),t("div",{class:a(e.$style.modalFooter)},[t("button",{class:a([e.$style.modalButton,e.$style.cancelButton]),onClick:J},o(l.value?"Ø¥Ù„ØºØ§Ø¡":"Cancel"),3),t("button",{class:a([e.$style.modalButton,e.$style.saveButton]),onClick:Fe},[s[67]||(s[67]=t("i",{class:"fas fa-check"},null,-1)),b(" "+o(l.value?"Ø­ÙØ¸":"Save"),1)],2)],2)],10,Gt)],2)):g("",!0)]))],10,Xe))}}),Kt="_editorContainer_kp6q6_5",Yt="_editorHeader_kp6q6_23",zt="_headerContent_kp6q6_51",Jt="_backButton_kp6q6_71",Zt="_headerTitle_kp6q6_129",Wt="_headerActions_kp6q6_167",Xt="_headerButton_kp6q6_179",xt="_iconButton_kp6q6_223",es="_previewButton_kp6q6_279",ts="_draftButton_kp6q6_323",ss="_publishButton_kp6q6_397",as="_editorMain_kp6q6_455",ls="_editorGrid_kp6q6_467",ns="_questionPalette_kp6q6_485",os="_paletteHeader_kp6q6_513",is="_paletteItems_kp6q6_571",rs="_paletteItem_kp6q6_571",us="_paletteIcon_kp6q6_655",ps="_paletteContent_kp6q6_689",ds="_editorContent_kp6q6_753",cs="_infoBanner_kp6q6_763",vs="_slideDown_kp6q6_1",ys="_infoContent_kp6q6_835",fs="_surveyHeaderSection_kp6q6_891",_s="_surveyHeaderCard_kp6q6_899",gs="_surveyTitle_kp6q6_935",ms="_surveyDescription_kp6q6_987",Cs="_questionsSection_kp6q6_1041",ks="_emptyDropZone_kp6q6_1059",ws="_dragOver_kp6q6_1099",Ss="_questionCard_kp6q6_1191",$s="_dragging_kp6q6_1231",hs="_questionHeader_kp6q6_1257",qs="_questionNumber_kp6q6_1271",Ts="_questionDragHandle_kp6q6_1297",Ds="_questionContent_kp6q6_1335",Bs="_questionTextRow_kp6q6_1347",bs="_questionTextInput_kp6q6_1359",Is="_questionTypeDropdown_kp6q6_1409",Os="_typeSelect_kp6q6_1419",Ns="_dropdownIcon_kp6q6_1487",Hs="_validationSection_kp6q6_1519",As="_validationHeader_kp6q6_1545",Ps="_validationControl_kp6q6_1583",Ms="_validationLabel_kp6q6_1595",Ls="_validationTypeDropdown_kp6q6_1639",Qs="_validationSelect_kp6q6_1649",Vs="_validationDropdownIcon_kp6q6_1717",Es="_validationInfoBox_kp6q6_1747",Rs="_validationInfoContent_kp6q6_1817",Us="_optionsSection_kp6q6_1871",Fs="_optionRow_kp6q6_1895",Gs="_optionBullet_kp6q6_1907",js="_optionInput_kp6q6_1923",Ks="_removeOptionButton_kp6q6_1965",Ys="_addOptionButton_kp6q6_2001",zs="_ratingPreview_kp6q6_2039",Js="_ratingStars_kp6q6_2053",Zs="_ratingStar_kp6q6_2053",Ws="_questionActions_kp6q6_2075",Xs="_actionButton_kp6q6_2101",xs="_actionDivider_kp6q6_2141",ea="_requiredToggle_kp6q6_2163",ta="_addQuestionSection_kp6q6_2203",sa="_dropHint_kp6q6_2215",aa="_addQuestionButton_kp6q6_2271",la="_errorMessage_kp6q6_2345",na="_previewOverlay_kp6q6_2361",oa="_fadeIn_kp6q6_1",ia="_previewModal_kp6q6_2389",ra="_slideUp_kp6q6_1",ua="_previewHeader_kp6q6_2421",pa="_closePreview_kp6q6_2467",da="_previewContent_kp6q6_2513",ca="_previewSurveyHeader_kp6q6_2525",va="_previewQuestions_kp6q6_2579",ya="_previewQuestion_kp6q6_2579",fa="_previewQuestionText_kp6q6_2613",_a="_requiredMark_kp6q6_2635",ga="_previewAnswer_kp6q6_2645",ma="_previewInput_kp6q6_2663",Ca="_previewTextarea_kp6q6_2665",ka="_previewOptions_kp6q6_2703",wa="_previewOption_kp6q6_2703",Sa="_previewRating_kp6q6_2741",$a="_modalOverlay_kp6q6_2827",ha="_modalContainer_kp6q6_2855",qa="_modalSlideIn_kp6q6_1",Ta="_modalHeader_kp6q6_2911",Da="_closeButton_kp6q6_2971",Ba="_modalBody_kp6q6_3027",ba="_formGroup_kp6q6_3039",Ia="_formLabel_kp6q6_3047",Oa="_formInput_kp6q6_3085",Na="_fieldHelp_kp6q6_3139",Ha="_settingItem_kp6q6_3159",Aa="_settingContent_kp6q6_3187",Pa="_settingTitle_kp6q6_3195",Ma="_settingDescription_kp6q6_3231",La="_toggle_kp6q6_3251",Qa="_active_kp6q6_3297",Va="_modalFooter_kp6q6_3321",Ea="_modalButton_kp6q6_3347",Ra="_cancelButton_kp6q6_3373",Ua="_saveButton_kp6q6_3407",Fa="_settingsButton_kp6q6_3427",Ga="_formGrid_kp6q6_3485",ja="_labelIcon_kp6q6_3509",Ka="_schedulingPreview_kp6q6_3531",Ya="_previewItem_kp6q6_3543",za="_scheduled_kp6q6_3575",Ja="_expired_kp6q6_3585",Za="_inactive_kp6q6_3595",Wa="_previewIcon_kp6q6_3647",Xa="_previewTitle_kp6q6_3701",xa="_previewDescription_kp6q6_3715",el="_helpText_kp6q6_3787",tl="_analyticsSection_kp6q6_3809",sl="_analyticsHeader_kp6q6_3819",al="_analyticsCard_kp6q6_3861",ll="_analyticsCardHeader_kp6q6_3909",nl="_analyticsCardTitle_kp6q6_3923",ol="_analyticsCardDescription_kp6q6_3959",il="_modernToggle_kp6q6_3995",rl="_toggleSlider_kp6q6_4025",ul="_scaleSettings_kp6q6_4117",pl="_scaleInfoBox_kp6q6_4139",dl="_scaleInfoHeader_kp6q6_4165",cl="_scaleRanges_kp6q6_4201",vl="_scaleRange_kp6q6_4201",yl="_rangeLabel_kp6q6_4243",fl="_detractorIcon_kp6q6_4277",_l="_passiveIcon_kp6q6_4285",gl="_promoterIcon_kp6q6_4293",ml="_rangeDescription_kp6q6_4301",Cl="_scaleInputsRow_kp6q6_4333",kl="_scaleGroup_kp6q6_4345",wl="_scaleInput_kp6q6_4333",Sl="_satisfactionMapping_kp6q6_4425",$l="_satisfactionHeader_kp6q6_4445",hl="_satisfactionRow_kp6q6_4483",ql="_satisfactionOptionText_kp6q6_4537",Tl="_satisfactionButtons_kp6q6_4559",Dl="_satisfactionButton_kp6q6_4559",Bl="_satisfactionSelect_kp6q6_4695",bl="_yesNoMappingInfo_kp6q6_4719",Il="_yesNoMappingRow_kp6q6_4771",Ol="_yesNoLabel_kp6q6_4817",Nl="_yesIcon_kp6q6_4843",Hl="_noIcon_kp6q6_4853",Al="_yesNoSelect_kp6q6_4863",Pl="_yesNoExamples_kp6q6_4939",Ml="_examplesHeader_kp6q6_4969",Ll="_examplesList_kp6q6_5003",Ql="_exampleItem_kp6q6_5015",Vl="_spin_kp6q6_1",El={editorContainer:Kt,editorHeader:Yt,headerContent:zt,backButton:Jt,headerTitle:Zt,headerActions:Wt,headerButton:Xt,iconButton:xt,previewButton:es,draftButton:ts,publishButton:ss,editorMain:as,editorGrid:ls,questionPalette:ns,paletteHeader:os,paletteItems:is,paletteItem:rs,paletteIcon:us,paletteContent:ps,editorContent:ds,infoBanner:cs,slideDown:vs,infoContent:ys,surveyHeaderSection:fs,surveyHeaderCard:_s,surveyTitle:gs,surveyDescription:ms,questionsSection:Cs,emptyDropZone:ks,dragOver:ws,questionCard:Ss,dragging:$s,questionHeader:hs,questionNumber:qs,questionDragHandle:Ts,questionContent:Ds,questionTextRow:Bs,questionTextInput:bs,questionTypeDropdown:Is,typeSelect:Os,dropdownIcon:Ns,validationSection:Hs,validationHeader:As,validationControl:Ps,validationLabel:Ms,validationTypeDropdown:Ls,validationSelect:Qs,validationDropdownIcon:Vs,validationInfoBox:Es,validationInfoContent:Rs,optionsSection:Us,optionRow:Fs,optionBullet:Gs,optionInput:js,removeOptionButton:Ks,addOptionButton:Ys,ratingPreview:zs,ratingStars:Js,ratingStar:Zs,questionActions:Ws,actionButton:Xs,actionDivider:xs,requiredToggle:ea,addQuestionSection:ta,dropHint:sa,addQuestionButton:aa,errorMessage:la,previewOverlay:na,fadeIn:oa,previewModal:ia,slideUp:ra,previewHeader:ua,closePreview:pa,previewContent:da,previewSurveyHeader:ca,previewQuestions:va,previewQuestion:ya,previewQuestionText:fa,requiredMark:_a,previewAnswer:ga,previewInput:ma,previewTextarea:Ca,previewOptions:ka,previewOption:wa,previewRating:Sa,modalOverlay:$a,modalContainer:ha,modalSlideIn:qa,modalHeader:Ta,closeButton:Da,modalBody:Ba,formGroup:ba,formLabel:Ia,formInput:Oa,fieldHelp:Na,settingItem:Ha,settingContent:Aa,settingTitle:Pa,settingDescription:Ma,toggle:La,active:Qa,modalFooter:Va,modalButton:Ea,cancelButton:Ra,saveButton:Ua,settingsButton:Fa,formGrid:Ga,labelIcon:ja,schedulingPreview:Ka,previewItem:Ya,scheduled:za,expired:Ja,inactive:Za,previewIcon:Wa,previewTitle:Xa,previewDescription:xa,helpText:el,analyticsSection:tl,analyticsHeader:sl,analyticsCard:al,analyticsCardHeader:ll,analyticsCardTitle:nl,analyticsCardDescription:ol,modernToggle:il,toggleSlider:rl,scaleSettings:ul,scaleInfoBox:pl,scaleInfoHeader:dl,scaleRanges:cl,scaleRange:vl,rangeLabel:yl,detractorIcon:fl,passiveIcon:_l,promoterIcon:gl,rangeDescription:ml,scaleInputsRow:Cl,scaleGroup:kl,scaleInput:wl,satisfactionMapping:Sl,satisfactionHeader:$l,satisfactionRow:hl,satisfactionOptionText:ql,satisfactionButtons:Tl,satisfactionButton:Dl,satisfactionSelect:Bl,yesNoMappingInfo:bl,yesNoMappingRow:Il,yesNoLabel:Ol,yesIcon:Nl,noIcon:Hl,yesNoSelect:Al,yesNoExamples:Pl,examplesHeader:Ml,examplesList:Ll,exampleItem:Ql,spin:Vl},Rl={$style:El},Ul=Je(jt,[["__cssModules",Rl]]),Kl=$e({__name:"SurveyEditorPage",setup(de){const N=We(),_=Ze(),h=he(),D=T(null),M=T(!1);ue(D,C=>{console.log("ğŸ”„ TemplateData changed in SurveyEditorPage:",C)}),qe(async()=>{const C=h.currentLanguage==="ar";if(_.query.createTemplate==="true"){M.value=!0;return}const f=_.params.id;if(f)try{v.fire({title:C?"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹...":"Loading Survey...",allowOutsideClick:!1,didOpen:()=>v.showLoading()});const y=(await F.getSurvey(f)).data;console.log("ğŸ“Š Loaded Survey Data:",y),console.log("ğŸ“ Title:",y.title),console.log("ğŸ“„ Description:",y.description),console.log("â“ Questions:",y.questions),y.questions||(y.questions=[]),console.log("âœ… Setting templateData.value to survey object"),D.value=y,console.log("ğŸ” templateData.value is now:",D.value),console.log("ğŸ” Is it the same object?",D.value===y),v.close();return}catch(c){v.fire({icon:"error",title:C?"Ø®Ø·Ø£":"Error",text:c.message||(C?"ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Failed to load survey"),confirmButtonText:C?"Ù…ÙˆØ§ÙÙ‚":"OK"}).then(()=>{N.push({name:"SurveyControl"})});return}if(_.query.templateId)try{const c=_.query.templateId,y=_.query.type;if(y==="predefined"){const S=(await re.getPredefinedTemplates()).templates.find(k=>k.id===c);if(S){console.log("ğŸ“‹ Found predefined template:",S);const k={title:C&&S.name_ar||S.name,description:C&&S.description_ar||S.description,questions:S.questions.map(($,G)=>({text:C&&$.text_ar||$.text,question_type:$.question_type,options:$.options||void 0,is_required:$.is_required||!1,order:$.order||G+1,placeholder:$.placeholder||void 0,validation_type:$.validation_type||"none",NPS_Calculate:!1,CSAT_Calculate:!1,min_scale:0,max_scale:5,semantic_tag:"none",options_satisfaction_values:[]}))};console.log("âœ… Transformed template:",k),D.value=k}}else if(y==="custom"){const B=await re.getTemplate(c);D.value=B.template}else if(y==="recent"){const B=await F.getSurvey(c),{id:S,...k}=B.data;D.value=k}}catch(c){const y=h.currentLanguage==="ar";v.fire({icon:"error",title:y?"Ø®Ø·Ø£":"Error",text:c.message||(y?"ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨":"Failed to load template"),confirmButtonText:y?"Ù…ÙˆØ§ÙÙ‚":"OK"})}});const l=()=>{N.push({name:"SurveyControl"})},X=async C=>{try{const f=h.currentLanguage==="ar",c=_.params.id;v.fire({title:f?"Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø³ÙˆØ¯Ø©...":"Saving Draft...",allowOutsideClick:!1,didOpen:()=>v.showLoading()}),c?await F.updateSurvey(c,C):await F.createDraft(C),v.close(),await v.fire({icon:"success",title:f?"ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­":"Saved Successfully",confirmButtonText:f?"Ù…ÙˆØ§ÙÙ‚":"OK"}),N.push({name:"SurveyControl"})}catch(f){const c=h.currentLanguage==="ar";v.fire({icon:"error",title:c?"Ø®Ø·Ø£":"Error",text:f.message||(c?"ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø³ÙˆØ¯Ø©":"Failed to save draft"),confirmButtonText:c?"Ù…ÙˆØ§ÙÙ‚":"OK"})}},p=async C=>{try{const f=h.currentLanguage==="ar",c=_.params.id;v.fire({title:f?"Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹...":"Saving Survey...",allowOutsideClick:!1,didOpen:()=>v.showLoading()});let y;c?y=(await F.updateSurvey(c,C)).data:y=(await F.createDraft(C)).data,v.close(),N.push({name:"SurveyControl",query:{openAccess:"true",surveyId:y.id,isSubmission:"true"}})}catch(f){const c=h.currentLanguage==="ar";v.fire({icon:"error",title:c?"Ø®Ø·Ø£":"Error",text:f.message||(c?"ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹":"Failed to save survey"),confirmButtonText:c?"Ù…ÙˆØ§ÙÙ‚":"OK"})}},L=async C=>{try{const f=h.currentLanguage==="ar";v.fire({title:f?"Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ù‚Ø§Ù„Ø¨...":"Saving Template...",allowOutsideClick:!1,didOpen:()=>v.showLoading()}),await re.createPredefinedTemplate(C),v.close(),await v.fire({icon:"success",title:f?"ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­":"Saved Successfully",text:f?"ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ù…Ø­Ø¯Ø¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ø¨Ù†Ø¬Ø§Ø­ ÙˆÙ‡Ùˆ Ø§Ù„Ø¢Ù† Ù…ØªØ§Ø­ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†":"Predefined template saved successfully and is now available to all users",confirmButtonText:f?"Ù…ÙˆØ§ÙÙ‚":"OK"}),N.push({name:"SurveyControl"})}catch(f){const c=h.currentLanguage==="ar";v.fire({icon:"error",title:c?"Ø®Ø·Ø£":"Error",text:f.message||(c?"ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù‚Ø§Ù„Ø¨":"Failed to save template"),confirmButtonText:c?"Ù…ÙˆØ§ÙÙ‚":"OK"})}};return(C,f)=>(u(),pe(Ul,{template:D.value,isCreatingPredefinedTemplate:M.value,onBack:l,onPublish:p,onSaveDraft:X,onSaveTemplate:L},null,8,["template","isCreatingPredefinedTemplate"]))}});export{Kl as default};
