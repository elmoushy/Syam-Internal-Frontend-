import{d as j,y as H,c as y,j as J,r as m,g as T,a as i,b as s,i as g,t as a,n as e,u as n,q,s as k,v as C,l as z,o as r,_ as Y}from"./index-C7bNMsZb.js";const K=["disabled"],O={key:0},Q={key:1},W=["placeholder"],X=["placeholder"],Z=["disabled"],x=["disabled"],ss=["disabled"],ts=["disabled"],es=j({__name:"Profile",setup(Vs){const P=z(),$=H(),D=y(()=>$.t),{user:p,userFullName:S,isAuthenticated:_,isLoading:v,error:b,logout:F,clearError:B}=J(),V=y(()=>S.value),U=y(()=>{var t;return((t=p.value)==null?void 0:t.email)||""}),w=y(()=>{var t;return((t=p.value)==null?void 0:t.id)||0}),I=y(()=>{var t;return((t=p.value)==null?void 0:t.is_active)||!1}),o=y(()=>p.value),c=m({stats:{account_age_days:0,last_login_days_ago:0,profile_completion:0,is_first_login:!1}}),u=m({first_name:"",last_name:""}),f=m(!1),L=y(()=>u.value.first_name.trim()!==""||u.value.last_name.trim()!==""),G=async()=>{},N=async()=>{},A=async()=>{},E=async()=>{},M=async()=>{if(L.value)try{f.value=!0,u.value.first_name="",u.value.last_name="",alert("Profile updated successfully!")}catch{alert("Failed to update profile. Please try again.")}finally{f.value=!1}},R=async()=>{try{await F(),P.push("/login")}catch{}},h=t=>{try{const l=new Date(t),d=$.currentLanguage==="ar"?"ar-SA":"en-US";return l.toLocaleString(d,{calendar:"gregory"})}catch{return t}};return T(async()=>{if(_.value)try{await Promise.all([N(),A()])}catch{}}),(t,l)=>(r(),i("div",{class:e(t.$style.profilePage)},[s("div",{class:e(t.$style.header)},[s("h1",null,a(D.value("navigation.profile")),1),s("button",{onClick:G,disabled:n(v),class:e(t.$style.refreshBtn)},[n(v)?(r(),i("span",O,"Refreshing...")):(r(),i("span",Q,"Refresh Data"))],10,K)],2),n(b)?(r(),i("div",{key:0,class:e(t.$style.errorAlert)},[l[4]||(l[4]=s("h3",null,"Error",-1)),s("p",null,a(n(b)),1),s("button",{onClick:l[0]||(l[0]=(...d)=>n(B)&&n(B)(...d)),class:e(t.$style.errorBtn)},"Clear Error",2)],2)):g("",!0),n(v)?(r(),i("div",{key:1,class:e(t.$style.loading)},[s("div",{class:e(t.$style.spinner)},null,2),l[5]||(l[5]=s("p",null,"Loading profile data...",-1))],2)):n(_)?(r(),i("div",{key:2,class:e(t.$style.profileContent)},[s("div",{class:e(t.$style.card)},[l[10]||(l[10]=s("h2",null,"Basic Information",-1)),s("div",{class:e(t.$style.userInfo)},[s("div",{class:e(t.$style.infoItem)},[l[6]||(l[6]=s("label",null,"Name:",-1)),s("span",null,a(V.value||"N/A"),1)],2),s("div",{class:e(t.$style.infoItem)},[l[7]||(l[7]=s("label",null,"Email:",-1)),s("span",null,a(U.value||"N/A"),1)],2),s("div",{class:e(t.$style.infoItem)},[l[8]||(l[8]=s("label",null,"User ID:",-1)),s("span",null,a(w.value||"N/A"),1)],2),s("div",{class:e(t.$style.infoItem)},[l[9]||(l[9]=s("label",null,"Status:",-1)),s("span",{class:e(I.value?t.$style.active:t.$style.inactive)},a(I.value?"Active":"Inactive"),3)],2)],2)],2),o.value?(r(),i("div",{key:0,class:e(t.$style.card)},[l[19]||(l[19]=s("h2",null,"Detailed Profile",-1)),s("div",{class:e(t.$style.userInfo)},[s("div",{class:e(t.$style.infoItem)},[l[11]||(l[11]=s("label",null,"First Name:",-1)),s("span",null,a(o.value.first_name||"N/A"),1)],2),s("div",{class:e(t.$style.infoItem)},[l[12]||(l[12]=s("label",null,"Last Name:",-1)),s("span",null,a(o.value.last_name||"N/A"),1)],2),s("div",{class:e(t.$style.infoItem)},[l[13]||(l[13]=s("label",null,"Full Name:",-1)),s("span",null,a(o.value.full_name||"N/A"),1)],2),s("div",{class:e(t.$style.infoItem)},[l[14]||(l[14]=s("label",null,"Date Joined:",-1)),s("span",null,a(h(o.value.date_joined)),1)],2),s("div",{class:e(t.$style.infoItem)},[l[15]||(l[15]=s("label",null,"Last Login:",-1)),s("span",null,a(o.value.last_login?h(o.value.last_login):"Never"),1)],2)],2),s("div",{class:e(t.$style.updateForm)},[l[18]||(l[18]=s("h3",null,"Update Profile",-1)),s("form",{onSubmit:q(M,["prevent"])},[s("div",{class:e(t.$style.formGroup)},[l[16]||(l[16]=s("label",{for:"firstName"},"First Name:",-1)),k(s("input",{id:"firstName","onUpdate:modelValue":l[1]||(l[1]=d=>u.value.first_name=d),type:"text",class:e(t.$style.input),placeholder:o.value.first_name},null,10,W),[[C,u.value.first_name]])],2),s("div",{class:e(t.$style.formGroup)},[l[17]||(l[17]=s("label",{for:"lastName"},"Last Name:",-1)),k(s("input",{id:"lastName","onUpdate:modelValue":l[2]||(l[2]=d=>u.value.last_name=d),type:"text",class:e(t.$style.input),placeholder:o.value.last_name},null,10,X),[[C,u.value.last_name]])],2),s("button",{type:"submit",disabled:f.value||!L.value,class:e(t.$style.updateBtn)},a(f.value?"Updating...":"Update Profile"),11,Z)],32)],2)],2)):g("",!0),c.value?(r(),i("div",{key:1,class:e(t.$style.card)},[l[20]||(l[20]=s("h2",null,"Account Statistics",-1)),s("div",{class:e(t.$style.stats)},[s("div",{class:e(t.$style.statItem)},[s("div",{class:e(t.$style.statValue)},a(c.value.stats.account_age_days),3),s("div",{class:e(t.$style.statLabel)},"Days Since Joined",2)],2),s("div",{class:e(t.$style.statItem)},[s("div",{class:e(t.$style.statValue)},a(c.value.stats.last_login_days_ago),3),s("div",{class:e(t.$style.statLabel)},"Days Since Last Login",2)],2),s("div",{class:e(t.$style.statItem)},[s("div",{class:e(t.$style.statValue)},a(c.value.stats.profile_completion)+"%",3),s("div",{class:e(t.$style.statLabel)},"Profile Completion",2)],2),s("div",{class:e(t.$style.statItem)},[s("div",{class:e([t.$style.statValue,c.value.stats.is_first_login?t.$style.highlight:""])},a(c.value.stats.is_first_login?"Yes":"No"),3),s("div",{class:e(t.$style.statLabel)},"First Login",2)],2)],2)],2)):g("",!0),s("div",{class:e(t.$style.actions)},[s("button",{onClick:N,disabled:n(v),class:e(t.$style.actionBtn)}," Load Detailed Profile ",10,x),s("button",{onClick:A,disabled:n(v),class:e(t.$style.actionBtn)}," Load Statistics ",10,ss),s("button",{onClick:E,disabled:n(v),class:e(t.$style.actionBtn)}," Test Backend Health ",10,ts),s("button",{onClick:R,class:e([t.$style.actionBtn,t.$style.logoutBtn])}," Logout ",2)],2)],2)):(r(),i("div",{key:3,class:e(t.$style.notAuthenticated)},[l[21]||(l[21]=s("h2",null,"Not Authenticated",-1)),l[22]||(l[22]=s("p",null,"Please log in to view your profile.",-1)),s("button",{onClick:l[3]||(l[3]=d=>t.$router.push("/login")),class:e(t.$style.loginBtn)}," Go to Login ",2)],2))],2))}}),ls="_profilePage_14yca_3",as="_header_14yca_15",ns="_refreshBtn_14yca_47",os="_errorAlert_14yca_85",is="_errorBtn_14yca_119",rs="_loading_14yca_139",us="_spinner_14yca_149",ds="_spin_14yca_149",ys="_profileContent_14yca_179",vs="_card_14yca_189",cs="_userInfo_14yca_235",ps="_infoItem_14yca_245",fs="_active_14yca_303",ms="_inactive_14yca_313",gs="_updateForm_14yca_323",$s="_formGroup_14yca_361",_s="_input_14yca_391",bs="_updateBtn_14yca_419",Bs="_stats_14yca_459",Is="_statItem_14yca_471",Ls="_statValue_14yca_493",Ns="_highlight_14yca_513",As="_statLabel_14yca_521",hs="_actions_14yca_541",ks="_actionBtn_14yca_555",Cs="_logoutBtn_14yca_595",Ps="_notAuthenticated_14yca_611",Ds="_loginBtn_14yca_657",Ss={profilePage:ls,header:as,refreshBtn:ns,errorAlert:os,errorBtn:is,loading:rs,spinner:us,spin:ds,profileContent:ys,card:vs,userInfo:cs,infoItem:ps,active:fs,inactive:ms,updateForm:gs,formGroup:$s,input:_s,updateBtn:bs,stats:Bs,statItem:Is,statValue:Ls,highlight:Ns,statLabel:As,actions:hs,actionBtn:ks,logoutBtn:Cs,notAuthenticated:Ps,loginBtn:Ds},Fs={$style:Ss},ws=Y(es,[["__cssModules",Fs]]);export{ws as default};
