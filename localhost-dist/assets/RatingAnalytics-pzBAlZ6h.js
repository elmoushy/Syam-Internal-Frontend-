import{d as N,y as M,c as d,a as c,n as a,b as t,t as n,i as w,F as m,e as $,f as b,o as u,_ as P}from"./index-C7bNMsZb.js";const D=["data-theme","dir"],z=["onClick"],q=N({__name:"RatingAnalytics",props:{analytics:{},question:{},loading:{type:Boolean,default:!1},detailed:{type:Boolean,default:!1}},emits:["ratingClick"],setup(F,{emit:S}){const y=F,I=S,C=M(),L=d(()=>C.currentTheme),B=d(()=>C.currentLanguage==="ar"),e=d(()=>C.t),v=d(()=>{var s;return(s=y.analytics)!=null&&s.distribution&&Math.max(...y.analytics.distribution.map(i=>i.rating))||5}),h=d(()=>{var s;return(s=y.analytics)!=null&&s.distribution?[...y.analytics.distribution].sort((i,l)=>l.rating-i.rating).map(i=>({value:i.rating,count:i.count,percentage:i.percentage})):[]}),A=d(()=>h.value.length?Math.max(...h.value.map(s=>s.count)):1),p=d(()=>{var l;if(!((l=y.analytics)!=null&&l.distribution))return 0;const s=Math.ceil(v.value*.7);return y.analytics.distribution.filter(r=>r.rating>=s).reduce((r,o)=>r+o.percentage,0)}),k=d(()=>{var r;if(!((r=y.analytics)!=null&&r.distribution))return 0;const s=Math.ceil(v.value*.4),i=Math.floor(v.value*.7);return y.analytics.distribution.filter(o=>o.rating>=s&&o.rating<=i).reduce((o,H)=>o+H.percentage,0)}),V=d(()=>{var l;if(!((l=y.analytics)!=null&&l.distribution))return 0;const s=Math.floor(v.value*.4);return y.analytics.distribution.filter(r=>r.rating<s).reduce((r,o)=>r+o.percentage,0)}),_=d(()=>{var r;if(!((r=y.analytics)!=null&&r.distribution))return[];const s=[],i=y.analytics.avg||0,l=y.analytics.std_dev||0;return i>=v.value*.8?s.push({icon:"fas fa-thumbs-up",color:"#4CAF50",title:e.value("survey.analytics.excellentRatings"),text:e.value("survey.analytics.excellentRatingsText")}):i<=v.value*.4?s.push({icon:"fas fa-thumbs-down",color:"#F44336",title:e.value("survey.analytics.lowRatings"),text:e.value("survey.analytics.lowRatingsText")}):s.push({icon:"fas fa-balance-scale",color:"#FF9800",title:e.value("survey.analytics.moderateRatings"),text:e.value("survey.analytics.moderateRatingsText")}),l<.5?s.push({icon:"fas fa-compress-alt",color:"#2196F3",title:e.value("survey.analytics.consistentRatings"),text:e.value("survey.analytics.consistentRatingsText")}):l>1.5&&s.push({icon:"fas fa-expand-alt",color:"#9C27B0",title:e.value("survey.analytics.variedRatings"),text:e.value("survey.analytics.variedRatingsText")}),p.value>.6&&s.push({icon:"fas fa-smile",color:"#4CAF50",title:e.value("survey.analytics.positiveResponse"),text:`${g(p.value)} ${e.value("survey.analytics.gavePositiveRatings")}`}),s}),T=s=>!s&&s!==0?"0":new Intl.NumberFormat().format(s),f=s=>!s&&s!==0?"0.0":s.toFixed(1),g=s=>!s&&s!==0?"0%":`${(s*100).toFixed(1)}%`,R=s=>{const i=s/v.value;return i>=.8?"#4CAF50":i>=.6?"#8BC34A":i>=.4?"#FF9800":i>=.2?"#FF5722":"#F44336"},G=(s,i)=>{I("ratingClick",s,i)};return(s,i)=>(u(),c("div",{class:a(s.$style.ratingAnalytics),"data-theme":L.value,dir:B.value?"rtl":"ltr"},[s.loading?(u(),c("div",{key:0,class:a(s.$style.loadingContainer)},[t("div",{class:a(s.$style.loadingSpinner)},null,2),t("p",{class:a(s.$style.loadingText)},n(e.value("survey.analytics.loadingAnalytics")),3)],2)):!s.analytics||!s.analytics.distribution?(u(),c("div",{key:1,class:a(s.$style.emptyContainer)},[t("div",{class:a(s.$style.emptyIcon)},i[0]||(i[0]=[t("i",{class:"fas fa-star"},null,-1)]),2),t("p",{class:a(s.$style.emptyText)},n(e.value("survey.analytics.noAnalyticsData")),3)],2)):(u(),c("div",{key:2,class:a(s.$style.analyticsContent)},[t("div",{class:a(s.$style.summarySection)},[t("div",{class:a(s.$style.summaryGrid)},[t("div",{class:a(s.$style.summaryCard)},[t("div",{class:a(s.$style.summaryIcon)},i[1]||(i[1]=[t("i",{class:"fas fa-users",style:{color:"#4CAF50"}},null,-1)]),2),t("div",{class:a(s.$style.summaryContent)},[t("div",{class:a(s.$style.summaryNumber)},n(T(s.analytics.total_responses)),3),t("div",{class:a(s.$style.summaryLabel)},n(e.value("survey.analytics.totalResponses")),3)],2)],2),t("div",{class:a(s.$style.summaryCard)},[t("div",{class:a(s.$style.summaryIcon)},i[2]||(i[2]=[t("i",{class:"fas fa-calculator",style:{color:"#2196F3"}},null,-1)]),2),t("div",{class:a(s.$style.summaryContent)},[t("div",{class:a(s.$style.summaryNumber)},n(f(s.analytics.avg)),3),t("div",{class:a(s.$style.summaryLabel)},n(e.value("survey.analytics.average")),3)],2)],2),t("div",{class:a(s.$style.summaryCard)},[t("div",{class:a(s.$style.summaryIcon)},i[3]||(i[3]=[t("i",{class:"fas fa-chart-line",style:{color:"#FF9800"}},null,-1)]),2),t("div",{class:a(s.$style.summaryContent)},[t("div",{class:a(s.$style.summaryNumber)},n(f(s.analytics.median)),3),t("div",{class:a(s.$style.summaryLabel)},n(e.value("survey.analytics.median")),3)],2)],2),t("div",{class:a(s.$style.summaryCard)},[t("div",{class:a(s.$style.summaryIcon)},i[4]||(i[4]=[t("i",{class:"fas fa-crown",style:{color:"#9C27B0"}},null,-1)]),2),t("div",{class:a(s.$style.summaryContent)},[t("div",{class:a(s.$style.summaryNumber)},n(s.analytics.mode),3),t("div",{class:a(s.$style.summaryLabel)},n(e.value("survey.analytics.mode")),3)],2)],2)],2)],2),t("div",{class:a(s.$style.distributionSection)},[t("div",{class:a(s.$style.chartHeader)},[t("h4",{class:a(s.$style.chartTitle)},n(e.value("survey.analytics.ratingDistribution")),3)],2),t("div",{class:a(s.$style.distributionChart)},[t("div",{class:a(s.$style.ratingBars)},[(u(!0),c(m,null,$(h.value,(l,r)=>(u(),c("div",{key:l.value,class:a(s.$style.ratingBar),onClick:o=>G(l,r)},[t("div",{class:a(s.$style.ratingLabel)},[t("div",{class:a(s.$style.ratingStars)},[(u(!0),c(m,null,$(l.value,o=>(u(),c("i",{key:o,class:"fas fa-star",style:b({color:R(l.value)})},null,4))),128)),(u(!0),c(m,null,$(v.value-l.value,o=>(u(),c("i",{key:`empty-${o}`,class:"far fa-star",style:{color:"#ddd"}}))),128))],2),t("span",{class:a(s.$style.ratingText)},n(l.value)+" "+n(e.value("survey.analytics.stars")),3)],2),t("div",{class:a(s.$style.ratingBarContainer)},[t("div",{class:a(s.$style.ratingBarFill),style:b({width:`${l.count/A.value*100}%`,backgroundColor:R(l.value)})},null,6)],2),t("div",{class:a(s.$style.ratingStats)},[t("span",{class:a(s.$style.ratingCount)},n(T(l.count)),3),t("span",{class:a(s.$style.ratingPercentage)},"("+n(g(l.percentage))+")",3)],2)],10,z))),128))],2),t("div",{class:a(s.$style.distributionInsights)},[t("div",{class:a(s.$style.insightCard)},[t("div",{class:a(s.$style.insightLabel)},n(e.value("survey.analytics.positiveRatings")),3),t("div",{class:a(s.$style.insightValue),style:{color:"#4CAF50"}},n(g(p.value)),3)],2),t("div",{class:a(s.$style.insightCard)},[t("div",{class:a(s.$style.insightLabel)},n(e.value("survey.analytics.neutralRatings")),3),t("div",{class:a(s.$style.insightValue),style:{color:"#FF9800"}},n(g(k.value)),3)],2),t("div",{class:a(s.$style.insightCard)},[t("div",{class:a(s.$style.insightLabel)},n(e.value("survey.analytics.negativeRatings")),3),t("div",{class:a(s.$style.insightValue),style:{color:"#F44336"}},n(g(V.value)),3)],2)],2)],2)],2),t("div",{class:a(s.$style.statisticsSection)},[t("div",{class:a(s.$style.statisticsHeader)},[t("h4",{class:a(s.$style.statisticsTitle)},n(e.value("survey.analytics.statisticalAnalysis")),3)],2),t("div",{class:a(s.$style.statisticsGrid)},[t("div",{class:a(s.$style.statisticCard)},[t("div",{class:a(s.$style.statisticIcon)},i[5]||(i[5]=[t("i",{class:"fas fa-chart-area",style:{color:"#2196F3"}},null,-1)]),2),t("div",{class:a(s.$style.statisticContent)},[t("div",{class:a(s.$style.statisticLabel)},n(e.value("survey.analytics.standardDeviation")),3),t("div",{class:a(s.$style.statisticValue)},n(f(s.analytics.std_dev)),3)],2)],2),t("div",{class:a(s.$style.statisticCard)},[t("div",{class:a(s.$style.statisticIcon)},i[6]||(i[6]=[t("i",{class:"fas fa-arrow-down",style:{color:"#F44336"}},null,-1)]),2),t("div",{class:a(s.$style.statisticContent)},[t("div",{class:a(s.$style.statisticLabel)},n(e.value("survey.analytics.minimum")),3),t("div",{class:a(s.$style.statisticValue)},n(s.analytics.min),3)],2)],2),t("div",{class:a(s.$style.statisticCard)},[t("div",{class:a(s.$style.statisticIcon)},i[7]||(i[7]=[t("i",{class:"fas fa-arrow-up",style:{color:"#4CAF50"}},null,-1)]),2),t("div",{class:a(s.$style.statisticContent)},[t("div",{class:a(s.$style.statisticLabel)},n(e.value("survey.analytics.maximum")),3),t("div",{class:a(s.$style.statisticValue)},n(s.analytics.max),3)],2)],2),t("div",{class:a(s.$style.statisticCard)},[t("div",{class:a(s.$style.statisticIcon)},i[8]||(i[8]=[t("i",{class:"fas fa-percentage",style:{color:"'#9C27B0'"}},null,-1)]),2),t("div",{class:a(s.$style.statisticContent)},[t("div",{class:a(s.$style.statisticLabel)},n(e.value("survey.analytics.responseRate")),3),t("div",{class:a(s.$style.statisticValue)},n(g(s.analytics.response_rate||1)),3)],2)],2)],2)],2),_.value.length>0?(u(),c("div",{key:0,class:a(s.$style.insightsSection)},[t("div",{class:a(s.$style.insightsHeader)},[t("h4",{class:a(s.$style.insightsTitle)},n(e.value("survey.analytics.insights")),3)],2),t("div",{class:a(s.$style.insightsGrid)},[(u(!0),c(m,null,$(_.value,(l,r)=>(u(),c("div",{key:r,class:a(s.$style.insightCard)},[t("div",{class:a(s.$style.insightIcon)},[t("i",{class:a(l.icon),style:b(`color: ${l.color}`)},null,6)],2),t("div",{class:a(s.$style.insightContent)},[t("h5",{class:a(s.$style.insightTitle)},n(l.title),3),t("p",{class:a(s.$style.insightText)},n(l.text),3)],2)],2))),128))],2)],2)):w("",!0)],2))],10,D))}}),E="_ratingAnalytics_y6yn9_3",j="_loadingContainer_y6yn9_11",J="_emptyContainer_y6yn9_13",K="_loadingSpinner_y6yn9_31",O="_spin_y6yn9_1",Q="_loadingText_y6yn9_59",U="_emptyText_y6yn9_61",W="_emptyIcon_y6yn9_73",X="_analyticsContent_y6yn9_85",Y="_summarySection_y6yn9_99",Z="_summaryGrid_y6yn9_111",x="_summaryCard_y6yn9_123",ss="_summaryIcon_y6yn9_143",ts="_summaryContent_y6yn9_165",as="_summaryNumber_y6yn9_173",is="_summaryLabel_y6yn9_189",ns="_distributionSection_y6yn9_205",es="_chartHeader_y6yn9_219",ls="_chartTitle_y6yn9_231",rs="_distributionChart_y6yn9_245",ys="_ratingBars_y6yn9_259",os="_ratingBar_y6yn9_259",cs="_ratingLabel_y6yn9_301",us="_ratingStars_y6yn9_313",ds="_ratingText_y6yn9_331",vs="_ratingBarContainer_y6yn9_343",gs="_ratingBarFill_y6yn9_357",ms="_ratingStats_y6yn9_369",$s="_ratingCount_y6yn9_385",Cs="_ratingPercentage_y6yn9_397",hs="_distributionInsights_y6yn9_407",ps="_insightCard_y6yn9_421",fs="_insightLabel_y6yn9_435",bs="_insightValue_y6yn9_451",_s="_statisticsSection_y6yn9_465",Ts="_statisticsHeader_y6yn9_479",Rs="_statisticsTitle_y6yn9_491",Fs="_statisticsGrid_y6yn9_505",Ss="_statisticCard_y6yn9_517",Is="_statisticIcon_y6yn9_537",Ls="_statisticContent_y6yn9_559",Bs="_statisticLabel_y6yn9_567",As="_statisticValue_y6yn9_583",ks="_insightsSection_y6yn9_599",Vs="_insightsHeader_y6yn9_613",Gs="_insightsTitle_y6yn9_625",Hs="_insightsGrid_y6yn9_639",Ns="_insightIcon_y6yn9_669",Ms="_insightContent_y6yn9_693",ws="_insightTitle_y6yn9_701",Ps="_insightText_y6yn9_715",Ds={ratingAnalytics:E,loadingContainer:j,emptyContainer:J,loadingSpinner:K,spin:O,loadingText:Q,emptyText:U,emptyIcon:W,analyticsContent:X,summarySection:Y,summaryGrid:Z,summaryCard:x,summaryIcon:ss,summaryContent:ts,summaryNumber:as,summaryLabel:is,distributionSection:ns,chartHeader:es,chartTitle:ls,distributionChart:rs,ratingBars:ys,ratingBar:os,ratingLabel:cs,ratingStars:us,ratingText:ds,ratingBarContainer:vs,ratingBarFill:gs,ratingStats:ms,ratingCount:$s,ratingPercentage:Cs,distributionInsights:hs,insightCard:ps,insightLabel:fs,insightValue:bs,statisticsSection:_s,statisticsHeader:Ts,statisticsTitle:Rs,statisticsGrid:Fs,statisticCard:Ss,statisticIcon:Is,statisticContent:Ls,statisticLabel:Bs,statisticValue:As,insightsSection:ks,insightsHeader:Vs,insightsTitle:Gs,insightsGrid:Hs,insightIcon:Ns,insightContent:Ms,insightTitle:ws,insightText:Ps},zs={$style:Ds},Es=P(q,[["__cssModules",zs]]);export{Es as default};
