import{d as N,y as D,c as p,r as P,a as i,n as a,b as o,t as d,i as w,F as b,e as f,f as $,C as E,o as c,_ as W}from"./index-C7bNMsZb.js";const Y=["data-theme"],j=["viewBox"],q=["onClick","onMouseover"],J=["x","y","width","height"],K=["x","y","width","height","fill"],O=["x","y"],Q=["x","y"],U=["x1","y1","x2","y2"],X=["x","y"],Z=N({__name:"HorizontalBarChart",props:{data:{},colors:{default:()=>["#4CAF50","#2196F3","#FF9800","#F44336","#9C27B0","#795548"]},labels:{default:()=>[]},loading:{type:Boolean,default:!1},width:{default:600},height:{default:400},showPercentage:{type:Boolean,default:!1}},emits:["barClick","barHover"],setup(M,{emit:H}){const s=M,B=H,k=D(),V=p(()=>k.currentTheme),v=p(()=>k.t),n={top:20,right:80,bottom:40,left:150},h=P({show:!1,x:0,y:0,data:null}),g=p(()=>s.width-n.left-n.right),L=p(()=>s.height-n.top-n.bottom),y=p(()=>{if(!s.data||s.data.length===0)return 0;const t=L.value,l=Math.min(10,t*.1);return Math.max(20,(t-(s.data.length-1)*l)/s.data.length)}),m=p(()=>!s.data||s.data.length===0?0:Math.max(...s.data.map(t=>t.value))||1),x=p(()=>{if(!s.data||s.data.length===0)return[];const t=Math.min(10,L.value*.1);return s.data.map((l,e)=>{const r=n.top+e*(y.value+t),u=l.value/m.value*g.value,_=s.colors[e%s.colors.length],R=s.labels[e]||`Item ${e+1}`;return{y:r,width:Math.max(2,u),color:_,label:R,value:l.value,percentage:l.percentage,index:e}})}),I=p(()=>{const t=[];for(let e=0;e<=5;e++){const r=m.value/5*e,u=n.left+r/m.value*g.value;t.push({value:r,x:u})}return t}),S=p(()=>{const t=[];for(let e=0;e<=5;e++){const r=m.value/5*e,u=n.left+r/m.value*g.value;t.push({value:r,x:u})}return t}),C=t=>!t&&t!==0?"0":new Intl.NumberFormat().format(Math.round(t)),T=t=>!t&&t!==0?"0%":`${Math.round(t*100)}%`,z=(t,l)=>t.length<=l?t:t.substring(0,l-3)+"...",F=(t,l)=>{B("barClick",t,l)},G=async(t,l,e)=>{var _;B("barHover",t,l),await E();const r=e.target.getBoundingClientRect(),u=(_=e.target.closest(".horizontalBarChart"))==null?void 0:_.getBoundingClientRect();u&&(h.value={show:!0,x:r.right-u.left+10,y:r.top-u.top,data:t})},A=()=>{h.value.show=!1};return(t,l)=>(c(),i("div",{class:a(t.$style.horizontalBarChart),"data-theme":V.value},[t.loading?(c(),i("div",{key:0,class:a(t.$style.loadingContainer)},[o("div",{class:a(t.$style.loadingSpinner)},null,2),o("p",{class:a(t.$style.loadingText)},d(v.value("survey.analytics.loadingChart")),3)],2)):!t.data||t.data.length===0?(c(),i("div",{key:1,class:a(t.$style.emptyContainer)},[o("div",{class:a(t.$style.emptyIcon)},l[0]||(l[0]=[o("i",{class:"fas fa-chart-bar"},null,-1)]),2),o("p",{class:a(t.$style.emptyText)},d(v.value("survey.analytics.noData")),3)],2)):(c(),i("div",{key:2,class:a(t.$style.chartContainer)},[(c(),i("svg",{class:a(t.$style.chartSvg),viewBox:`0 0 ${t.width} ${t.height}`,preserveAspectRatio:"xMidYMid meet"},[o("g",{class:a(t.$style.barsGroup)},[(c(!0),i(b,null,f(x.value,(e,r)=>(c(),i("g",{key:r,class:a(t.$style.barGroup),onClick:u=>F(e,r),onMouseover:u=>G(e,r,u),onMouseleave:A},[o("rect",{x:n.left,y:e.y,width:g.value,height:y.value,class:a(t.$style.barBackground)},null,10,J),o("rect",{x:n.left,y:e.y,width:e.width,height:y.value,fill:e.color,class:a(t.$style.dataBar)},null,10,K),o("text",{x:n.left-10,y:e.y+y.value/2,class:a(t.$style.barLabel),"text-anchor":"end","dominant-baseline":"middle"},d(z(e.label,20)),11,O),o("text",{x:n.left+e.width+10,y:e.y+y.value/2,class:a(t.$style.barValue),"text-anchor":"start","dominant-baseline":"middle"},d(C(e.value)),11,Q)],42,q))),128))],2),o("g",{class:a(t.$style.gridLines)},[(c(!0),i(b,null,f(I.value,e=>(c(),i("line",{key:e.value,x1:e.x,y1:n.top,x2:e.x,y2:t.height-n.bottom,class:a(t.$style.gridLine)},null,10,U))),128))],2),o("g",{class:a(t.$style.axisLabels)},[(c(!0),i(b,null,f(S.value,e=>(c(),i("text",{key:e.value,x:e.x,y:t.height-n.bottom+20,class:a(t.$style.axisLabel),"text-anchor":"middle"},d(C(e.value)),11,X))),128))],2)],10,j)),h.value.show?(c(),i("div",{key:0,class:a(t.$style.tooltip),style:$({left:h.value.x+"px",top:h.value.y+"px"})},[o("div",{class:a(t.$style.tooltipHeader)},d(h.value.data.label),3),o("div",{class:a(t.$style.tooltipContent)},[o("div",{class:a(t.$style.tooltipItem)},[o("span",{class:a(t.$style.tooltipColor),style:$({backgroundColor:h.value.data.color})},null,6),o("span",{class:a(t.$style.tooltipLabel)},d(v.value("survey.analytics.value"))+":",3),o("span",{class:a(t.$style.tooltipValue)},d(C(h.value.data.value)),3)],2),h.value.data.percentage?(c(),i("div",{key:0,class:a(t.$style.tooltipItem)},[o("span",{class:a(t.$style.tooltipColor),style:$({backgroundColor:h.value.data.color})},null,6),o("span",{class:a(t.$style.tooltipLabel)},d(v.value("survey.analytics.percentage"))+":",3),o("span",{class:a(t.$style.tooltipValue)},d(T(h.value.data.percentage)),3)],2)):w("",!0)],2)],6)):w("",!0)],2))],10,Y))}}),tt="_horizontalBarChart_1ih9m_3",et="_loadingContainer_1ih9m_15",at="_emptyContainer_1ih9m_17",ot="_loadingSpinner_1ih9m_35",lt="_spin_1ih9m_1",st="_loadingText_1ih9m_63",nt="_emptyText_1ih9m_65",rt="_emptyIcon_1ih9m_77",it="_chartContainer_1ih9m_89",ct="_chartSvg_1ih9m_101",ut="_barGroup_1ih9m_111",ht="_barBackground_1ih9m_119",dt="_dataBar_1ih9m_129",pt="_barLabel_1ih9m_149",yt="_barValue_1ih9m_163",mt="_gridLine_1ih9m_177",vt="_axisLabel_1ih9m_189",gt="_tooltip_1ih9m_201",_t="_tooltipHeader_1ih9m_225",Ct="_tooltipContent_1ih9m_239",bt="_tooltipItem_1ih9m_251",ft="_tooltipColor_1ih9m_265",$t="_tooltipLabel_1ih9m_279",Bt="_tooltipValue_1ih9m_289",kt={horizontalBarChart:tt,loadingContainer:et,emptyContainer:at,loadingSpinner:ot,spin:lt,loadingText:st,emptyText:nt,emptyIcon:rt,chartContainer:it,chartSvg:ct,barGroup:ut,barBackground:ht,dataBar:dt,barLabel:pt,barValue:yt,gridLine:mt,axisLabel:vt,tooltip:gt,tooltipHeader:_t,tooltipContent:Ct,tooltipItem:bt,tooltipColor:ft,tooltipLabel:$t,tooltipValue:Bt},Lt={$style:kt},Mt=W(Z,[["__cssModules",Lt]]);export{Mt as H};
